import{d as be,e as j,r as _,u as $e,p as V,ao as we,o as m,q as v,g as e,w as t,j as u,k as s,h as C,s as B,ar as U,f as x,i as f,ae as Ve,aK as Ce,gD as Ie,aM as ze,aN as Se,aQ as De,F as qe,aO as Te,I as Ne,aP as Be,b0 as Ue,aR as Fe,aS as Le,m as Pe,aT as Oe,aU as Ae,B as Ke,aj as Ee,a4 as Me,aV as Re,a5 as je,aW as xe,a9 as He,aa as Qe,a6 as We,aX as Xe,C as Ye,aY as Ze,aZ as Ge,a_ as Je,b3 as ea,_ as aa}from"./index.9d2a6f93.js";import{u as ta}from"./loading.2f897f78.js";/* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as F,S as oa}from"./sortable.esm.74e8cc8f.js";/* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              */import{s as la,q as na}from"./key.493bda66.js";import{q as sa}from"./model.d6c87741.js";const ca={class:"container"},ua={class:"action-icon"},ra={class:"action-icon"},ia={id:"tableSetting"},da={style:{"margin-right":"4px",cursor:"move"}},pa={class:"title"},ma={key:0,class:"circle"},_a={key:1,class:"circle pass"},fa={name:"KeyList"},ya=be({...fa,setup(va){const H=j({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),L=_([]);(async()=>{try{const{data:a}=await sa();L.value=a.items}catch{}})();const Q=async a=>{g(!0);try{await la(a),$()}catch{}finally{g(!1)}},P=()=>({type:2,corp:"",key:"",models:[],quota:_(),status:_(),created_at:[]}),{loading:W,setLoading:g}=ta(!0),{t:c}=$e(),O=_([]),n=_(P()),y=_([]),b=_([]),I=_("medium"),z={current:1,pageSize:10,showTotal:!0},S=j({...z}),X=V(()=>[{name:c("searchTable.size.mini"),value:"mini"},{name:c("searchTable.size.small"),value:"small"},{name:c("searchTable.size.medium"),value:"medium"},{name:c("searchTable.size.large"),value:"large"}]),Y=V(()=>[{title:c("key.columns.corp"),dataIndex:"corp",slotName:"corp"},{title:c("key.columns.key"),dataIndex:"key",slotName:"key"},{title:c("key.columns.models"),dataIndex:"model_names",slotName:"model_names"},{title:c("key.columns.status"),dataIndex:"status",slotName:"status"},{title:c("key.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at"},{title:c("key.columns.operations"),dataIndex:"operations",slotName:"operations"}]),Z=V(()=>[{label:c("key.dict.corp.OpenAI"),value:"OpenAI"}]),G=V(()=>[{label:c("key.dict.status.1"),value:1},{label:c("key.dict.status.2"),value:2}]),$=async(a={current:1,pageSize:10,type:2})=>{g(!0);try{const{data:l}=await na(a);O.value=l.items,S.current=a.current,S.total=l.paging.total}catch{}finally{g(!1)}},A=()=>{$({...z,...n.value})},J=a=>{$({...z,...n.value,current:a})};$();const ee=()=>{n.value=P()},ae=(a,l)=>{I.value=a},te=(a,l,d)=>{a?y.value.splice(d,0,l):y.value=b.value.filter(r=>r.dataIndex!==l.dataIndex)},K=(a,l,d,r=!1)=>{const p=r?F(a):a;return l>-1&&d>-1&&p.splice(l,1,p.splice(d,1,p[l]).pop()),p},oe=a=>{a&&Ce(()=>{const l=document.getElementById("tableSetting");new oa(l,{onEnd(d){const{oldIndex:r,newIndex:p}=d;K(y.value,r,p),K(b.value,r,p)}})})};return we(()=>Y.value,a=>{y.value=F(a),y.value.forEach((l,d)=>{l.checked=!0}),b.value=F(y.value)},{deep:!0,immediate:!0}),(a,l)=>{const d=Ie,r=ze,p=Se,D=De,k=qe,i=Te,le=Ne,ne=Be,se=Ue,ce=Fe,q=Le,ue=Pe,E=Oe,re=Ae,h=Ke,M=Ee,R=Me,ie=Re,T=je,de=xe,pe=He,me=Qe,_e=We,fe=Xe,ye=Ye,ve=Ze,ke=Ge,he=Je,ge=ea;return m(),v("div",ca,[e(p,{class:"container-breadcrumb"},{default:t(()=>[e(r,null,{default:t(()=>[e(d)]),_:1}),e(r,null,{default:t(()=>[u(s(a.$t("menu.key")),1)]),_:1}),e(r,null,{default:t(()=>[u(s(a.$t("menu.key.model.list")),1)]),_:1})]),_:1}),e(ge,{class:"general-card",title:a.$t("menu.key.model.list"),bordered:!1},{default:t(()=>[e(q,null,{default:t(()=>[e(i,{flex:1},{default:t(()=>[e(ue,{model:n.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(q,{gutter:16},{default:t(()=>[e(i,{span:8},{default:t(()=>[e(k,{field:"corp",label:a.$t("key.form.corp")},{default:t(()=>[e(D,{modelValue:n.value.corp,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value.corp=o),options:C(Z),placeholder:a.$t("key.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(i,{span:8},{default:t(()=>[e(k,{field:"key",label:a.$t("key.form.key")},{default:t(()=>[e(le,{modelValue:n.value.key,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value.key=o),placeholder:a.$t("key.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(i,{span:8},{default:t(()=>[e(k,{field:"models",label:a.$t("key.form.models")},{default:t(()=>[e(D,{modelValue:n.value.models,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.models=o),placeholder:a.$t("key.form.selectDefault"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(m(!0),v(B,null,U(L.value,o=>(m(),x(ne,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(i,{span:8},{default:t(()=>[e(k,{field:"quota",label:a.$t("key.form.quota")},{default:t(()=>[e(se,{modelValue:n.value.quota,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.quota=o),placeholder:a.$t("key.form.quota.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(i,{span:8},{default:t(()=>[e(k,{field:"status",label:a.$t("key.form.status")},{default:t(()=>[e(D,{modelValue:n.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>n.value.status=o),options:C(G),placeholder:a.$t("key.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(i,{span:8},{default:t(()=>[e(k,{field:"created_at",label:a.$t("key.form.created_at")},{default:t(()=>[e(ce,{modelValue:n.value.created_at,"onUpdate:modelValue":l[5]||(l[5]=o=>n.value.created_at=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(E,{style:{height:"84px"},direction:"vertical"}),e(i,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(R,{direction:"vertical",size:18},{default:t(()=>[e(h,{type:"primary",onClick:A},{icon:t(()=>[e(re)]),default:t(()=>[u(" "+s(a.$t("key.form.search")),1)]),_:1}),e(h,{onClick:ee},{icon:t(()=>[e(M)]),default:t(()=>[u(" "+s(a.$t("key.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{style:{"margin-top":"0"}}),e(q,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(R,null,{default:t(()=>[e(h,{type:"primary",onClick:l[6]||(l[6]=o=>a.$router.push({name:"KeyCreate"}))},{icon:t(()=>[e(ie)]),default:t(()=>[u(" "+s(a.$t("key.operation.create")),1)]),_:1})]),_:1})]),_:1}),e(i,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[e(T,{content:a.$t("searchTable.actions.refresh")},{default:t(()=>[f("div",{class:"action-icon",onClick:A},[e(M,{size:"18"})])]),_:1},8,["content"]),e(me,{onSelect:ae},{content:t(()=>[(m(!0),v(B,null,U(C(X),o=>(m(),x(pe,{key:o.value,value:o.value,class:Ve({active:o.value===I.value})},{default:t(()=>[f("span",null,s(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(T,{content:a.$t("searchTable.actions.density")},{default:t(()=>[f("div",ua,[e(de,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(T,{content:a.$t("searchTable.actions.columnSetting")},{default:t(()=>[e(ve,{trigger:"click",position:"bl",onPopupVisibleChange:oe},{content:t(()=>[f("div",ia,[(m(!0),v(B,null,U(b.value,(o,w)=>(m(),v("div",{key:o.dataIndex,class:"setting"},[f("div",da,[e(fe)]),f("div",null,[e(ye,{modelValue:o.checked,"onUpdate:modelValue":N=>o.checked=N,onChange:N=>te(N,o,w)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),f("div",pa,s(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:t(()=>[f("div",ra,[e(_e,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(he,{"row-key":"id",loading:C(W),pagination:S,columns:y.value,data:O.value,bordered:!1,size:I.value,"row-selection":H,onPageChange:J},{type:t(({record:o})=>[u(s(a.$t(`key.dict.type.${o.type}`)),1)]),corp:t(({record:o})=>[u(s(a.$t(`key.dict.corp.${o.corp}`)),1)]),dataFormat:t(({record:o})=>[u(s(a.$t(`key.dict.data_format.${o.data_format}`)),1)]),status:t(({record:o})=>[o.status===3?(m(),v("span",ma)):(m(),v("span",_a)),u(" "+s(a.$t(`key.dict.status.${o.status}`)),1)]),operations:t(({record:o})=>[e(h,{type:"text",size:"small",onClick:w=>a.$router.push({name:"KeyDetail",query:{id:`${o.id}`}})},{default:t(()=>[u(s(a.$t("key.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(h,{type:"text",size:"small",onClick:w=>a.$router.push({name:"KeyUpdate",query:{id:`${o.id}`}})},{default:t(()=>[u(s(a.$t("key.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(ke,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:w=>Q({id:`${o.id}`})},{default:t(()=>[e(h,{type:"text",size:"small"},{default:t(()=>[u(s(a.$t("key.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1},8,["title"])])}}});const Pa=aa(ya,[["__scopeId","data-v-5eeb7226"]]);export{Pa as default};
