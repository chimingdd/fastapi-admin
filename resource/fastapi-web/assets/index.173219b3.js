import{B as E,_ as N}from"./index.5b226ddc.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as O,e as m,B as i,C as c,aH as a,aG as t,aL as d,aM as u,F as w,aJ as C,aI as L,aD as B,u as z,aK as G,aF as H,bE as J,bA as P,bB as Q,b2 as j,bO as W,bP as X,aT as Y,aU as Z,bi as x,b5 as ee,bI as ae,bQ as le,g as te}from"./arco.553b67be.js";import{u as oe}from"./loading.9398a00f.js";import{f as re}from"./vue.d21e79d3.js";import{d as se}from"./key.32208e91.js";import{q as ne}from"./corp.bd6a9cbd.js";import{a as de}from"./model.d1a49f4b.js";import{f as ue}from"./agent.e76516e0.js";import"./chart.05df75e9.js";import"./base.87fcf6e2.js";const me={class:"container"},ie={class:"wrapper"},pe={class:"submit-btn"},ce={name:"KeyCreate"},_e=O({...ce,setup(fe){const{loading:q,setLoading:s}=oe(!1),{proxy:A}=te(),M=re(),_=m([]);(async()=>{s(!0);try{const{data:e}=await ne();_.value=e.items}catch{}finally{s(!1)}})();const f=m([]);(async()=>{s(!0);try{const{data:e}=await de();f.value=e.items}catch{}finally{s(!1)}})();const y=m([]);(async()=>{s(!0);try{const{data:e}=await ue();y.value=e.items}catch{}finally{s(!1)}})();const b=m(),r=m({corp:"",key:"",remark:"",models:[],model_agents:[],is_agents_only:!1}),F=async()=>{var o;if(!await((o=b.value)==null?void 0:o.validate())){s(!0);try{await se(r.value).then(()=>{A.$message.success("\u65B0\u5EFA\u6210\u529F"),M.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(e,o)=>{const g=E,p=G,I=H,k=J,v=P,h=Q,n=j,$=W,S=X,T=Y,V=Z,U=x,D=ee,K=ae,R=le;return i(),c("div",me,[a(I,{class:"container-breadcrumb"},{default:t(()=>[a(p,null,{default:t(()=>[a(g)]),_:1}),a(p,null,{default:t(()=>[d(u(e.$t("menu.key")),1)]),_:1}),a(p,null,{default:t(()=>[d(u(e.$t("menu.key.create")),1)]),_:1})]),_:1}),a(R,{loading:z(q),style:{width:"100%"}},{default:t(()=>[a(K,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[w("div",ie,[a(D,{ref_key:"formRef",ref:b,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:t(()=>[a(k,{orientation:"left"},{default:t(()=>[d(u(e.$t("model.title.baseInfo")),1)]),_:1}),a(n,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:t(()=>[a(h,{modelValue:r.value.corp,"onUpdate:modelValue":o[0]||(o[0]=l=>r.value.corp=l),placeholder:e.$t("key.placeholder.corp"),"allow-search":""},{default:t(()=>[(i(!0),c(C,null,L(_.value,l=>(i(),B(v,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:t(()=>[a($,{modelValue:r.value.key,"onUpdate:modelValue":o[1]||(o[1]=l=>r.value.key=l),placeholder:e.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"remark",label:e.$t("key.label.remark"),rules:[{required:!1}]},{default:t(()=>[a($,{modelValue:r.value.remark,"onUpdate:modelValue":o[2]||(o[2]=l=>r.value.remark=l),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(k,{orientation:"left"},{default:t(()=>[d(u(e.$t("model.title.advanced")),1)]),_:1}),a(n,{field:"models",label:e.$t("key.label.models")},{default:t(()=>[a(S,{modelValue:r.value.models,"onUpdate:modelValue":o[3]||(o[3]=l=>r.value.models=l),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:f.value,placeholder:e.$t("key.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),a(n,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:t(()=>[a(h,{modelValue:r.value.model_agents,"onUpdate:modelValue":o[4]||(o[4]=l=>r.value.model_agents=l),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(i(!0),c(C,null,L(y.value,l=>(i(),B(v,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:t(()=>[a(T,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":o[5]||(o[5]=l=>r.value.is_agents_only=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(U,null,{default:t(()=>[w("div",pe,[a(V,{type:"secondary",onClick:o[6]||(o[6]=l=>e.$router.push({name:"ModelKeyList"}))},{default:t(()=>[d(u(e.$t("button.cancel")),1)]),_:1}),a(V,{type:"primary",onClick:F},{default:t(()=>[d(u(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ge=N(_e,[["__scopeId","data-v-ae83da34"]]);export{Ge as default};
