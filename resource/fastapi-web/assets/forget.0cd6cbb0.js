import{u as R,g as x,f as k,_ as S}from"./index.313639ab.js";/* empty css               *//* empty css               */import{d as T,e as r,c as U,r as D,t as L,B as z,C as E,F as G,aM as g,aH as t,aG as n,u as o,aL as V,aJ as H,b3 as J,b4 as K,aW as M,b5 as P,b7 as W,g as j}from"./arco.4eee3931.js";import{f as A}from"./vue.a3868d4c.js";const O={class:"sub-title"},Q=T({__name:"forget",setup(X){const{proxy:h}=j(),{t:s}=R(),y=A(),p=r(!1),c=r(!1),m=r(!1),u=r(60),_=r(),i=r("login.captcha.get"),$=U(()=>s(i.value)),C=D({form:{email:"",password:"",captcha:""},rules:{email:[{required:!0,message:s("login.email.error.required.email")}],password:[{required:!0,message:s("login.email.error.required.password")}],captcha:[{required:!0,message:s("login.email.error.required.captcha")}]}}),{form:a,rules:I}=L(C),v=()=>{window.clearInterval(_.value),u.value=60,i.value="login.captcha.get",m.value=!1},B=()=>{c.value||h.$refs.formRef.validateField("email",l=>{l||(c.value=!0,i.value="login.captcha.ing",x({email:a.value.email,channel:"forget_account"}).then(()=>{c.value=!1,m.value=!0,i.value=`${s("login.captcha.get")}(${u.value-=1}s)`,_.value=window.setInterval(()=>{u.value-=1,i.value=`${s("login.captcha.get")}(${u.value}s)`,u.value<=0&&v()},1e3)}).catch(()=>{v(),c.value=!1}))})},F=({errors:l,values:e})=>{p.value||l||(p.value=!0,k({account:e.email,password:e.password,terminal:"web",code:e.captcha}).then(()=>{h.$message.success(s("forget.success")),y.go(0)}).catch(()=>{a.value.captcha=""}).finally(()=>{p.value=!1}))};return(l,e)=>{const w=J,f=K,b=M,q=P,N=W;return z(),E(H,null,[G("div",O,g(l.$t("login.form.forget.title")),1),t(N,{ref:"formRef",model:o(a),rules:o(I),layout:"vertical",size:"large",class:"login-form",onSubmit:F},{default:n(()=>[t(f,{field:"email","hide-label":""},{default:n(()=>[t(w,{modelValue:o(a).email,"onUpdate:modelValue":e[0]||(e[0]=d=>o(a).email=d),placeholder:l.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(f,{field:"captcha","hide-label":""},{default:n(()=>[t(w,{modelValue:o(a).captcha,"onUpdate:modelValue":e[1]||(e[1]=d=>o(a).captcha=d),placeholder:l.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),t(b,{class:"captcha-btn",loading:c.value,disabled:m.value,onClick:B},{default:n(()=>[V(g(o($)),1)]),_:1},8,["loading","disabled"])]),_:1}),t(f,{field:"password","hide-label":""},{default:n(()=>[t(q,{modelValue:o(a).password,"onUpdate:modelValue":e[2]||(e[2]=d=>o(a).password=d),placeholder:l.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(b,{class:"btn",loading:p.value,type:"primary","html-type":"submit"},{default:n(()=>[V(g(l.$t("forget.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const te=S(Q,[["__scopeId","data-v-e8718137"]]);export{te as F};
