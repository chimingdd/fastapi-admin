import{u as ve,E as he,p as ye,y as we,i as ke,z as Ce,_ as xe}from"./index.5a37e086.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as V,S as Se}from"./sortable.esm.073617af.js";/* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css              */import{d as ze,r as N,e as u,c as $,w as Ie,bP as Ve,B as d,C as b,aH as e,aG as a,aL as v,aM as _,bu as E,aD as L,u as h,F as p,aJ as R,aI as U,D as $e,n as De,aK as Te,aF as qe,aS as Be,b2 as Fe,bC as Pe,bB as Ne,bD as Ee,bE as Le,b5 as Re,bF as Ue,ab as Ae,aU as Me,bi as je,bj as Ge,bl as He,bm as Je,b4 as Oe,bG as Ke,bI as We,bJ as Qe}from"./arco.7559a143.js";import{u as Xe}from"./loading.de2385ad.js";import{q as A}from"./common.4fed7ae4.js";import{a as Ye}from"./finance.acf9954e.js";import"./chart.1f478bf1.js";import"./vue.7fd3bfc3.js";const Ze={class:"container"},ea={class:"action-icon"},aa={class:"action-icon"},ta={id:"tableSetting"},na={style:{"margin-right":"4px",cursor:"move"}},oa={class:"title"},sa={key:0,class:"circle red"},la={key:1,class:"circle"},ca={name:"DealRecordList"},ia=ze({...ca,setup(ra){const M=N({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),j=()=>({user_id:u(),status:u(),created_at:[]}),{loading:G,setLoading:D}=Xe(!0),{t:c}=ve(),T=u([]),s=u(j()),m=u([]),y=u([]),C=u("medium"),H=u(),f={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},w=N({...f}),J=$(()=>[{name:c("searchTable.size.mini"),value:"mini"},{name:c("searchTable.size.small"),value:"small"},{name:c("searchTable.size.medium"),value:"medium"},{name:c("searchTable.size.large"),value:"large"}]),O=$(()=>[{title:c("finance.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center"},{title:c("finance.columns.quota"),dataIndex:"quota",slotName:"quota",align:"center"},{title:c("finance.columns.status"),dataIndex:"status",slotName:"status",align:"center"},{title:c("finance.columns.created_at"),dataIndex:"created_at",slotName:"created_at",align:"center"}]),K=$(()=>[{label:c("finance.dict.status.1"),value:1}]),k=async(t={...f})=>{D(!0);try{const{data:o}=await Ye(t);T.value=o.items,w.current=t.current,w.pageSize=t.pageSize,w.total=o.paging.total}catch{}finally{D(!1)}},q=()=>{k({...f,...s.value})},W=t=>{k({...f,...s.value,current:t})},Q=t=>{f.pageSize=t,k({...f,...s.value})};k();const X=(t,o)=>{C.value=t},Y=(t,o,i)=>{t?m.value.splice(i,0,o):m.value=y.value.filter(l=>l.dataIndex!==o.dataIndex)},B=(t,o,i,l=!1)=>{const r=l?V(t):t;return o>-1&&i>-1&&r.splice(o,1,r.splice(i,1,r[o]).pop()),r},Z=t=>{t&&De(()=>{const o=document.getElementById("tableSetting");new Se(o,{onEnd(i){const{oldIndex:l,newIndex:r}=i;B(m.value,l,r),B(y.value,l,r)}})})};return Ie(()=>O.value,t=>{m.value=V(t),m.value.forEach((o,i)=>{o.checked=!0}),y.value=V(m.value)},{deep:!0,immediate:!0}),(t,o)=>{const i=he,l=Te,r=qe,ee=Be,x=Fe,g=Pe,ae=Ne,te=Ee,S=Le,ne=Re,F=Ue,oe=Ae,se=Me,le=je,ce=ye,z=Ge,ie=we,re=He,ue=Je,de=ke,_e=Ce,pe=Oe,me=Ke,fe=We,ge=Qe,P=Ve("permission");return d(),b("div",Ze,[e(r,{class:"container-breadcrumb"},{default:a(()=>[e(l,null,{default:a(()=>[e(i)]),_:1}),e(l,null,{default:a(()=>[v(_(t.$t("menu.finance")),1)]),_:1}),e(l,null,{default:a(()=>[v(_(t.$t("menu.deal_record.list")),1)]),_:1})]),_:1}),e(ge,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[E((d(),L(S,null,{default:a(()=>[e(g,{flex:1},{default:a(()=>[e(ne,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(S,{gutter:16},{default:a(()=>[e(g,{span:8},{default:a(()=>[e(x,{field:"name",label:t.$t("finance.form.user_id")},{default:a(()=>[e(ee,{modelValue:s.value.user_id,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.user_id=n),placeholder:t.$t("finance.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(g,{span:8},{default:a(()=>[e(x,{field:"status",label:t.$t("finance.form.status")},{default:a(()=>[e(ae,{modelValue:s.value.status,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.status=n),options:h(K),placeholder:t.$t("finance.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(g,{span:8},{default:a(()=>[e(x,{field:"created_at",label:t.$t("finance.form.created_at")},{default:a(()=>[e(te,{modelValue:s.value.created_at,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.created_at=n),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{style:{height:"42px"},direction:"vertical"}),e(g,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(le,{direction:"vertical",size:18},{default:a(()=>[e(se,{type:"primary",onClick:q},{icon:a(()=>[e(oe)]),default:a(()=>[v(" "+_(t.$t("finance.form.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})),[[P,["admin"]]]),E(e(F,{style:{"margin-top":"0","margin-bottom":"16px"}},null,512),[[P,["admin"]]]),e(S,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(g,{span:24,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(z,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[p("div",{class:"action-icon",onClick:q},[e(ce,{size:"18"})])]),_:1},8,["content"]),e(ue,{onSelect:X},{content:a(()=>[(d(!0),b(R,null,U(h(J),n=>(d(),L(re,{key:n.value,value:n.value,class:$e({active:n.value===C.value})},{default:a(()=>[p("span",null,_(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(z,{content:t.$t("searchTable.actions.density")},{default:a(()=>[p("div",ea,[e(ie,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(z,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(me,{trigger:"click",position:"bl",onPopupVisibleChange:Z},{content:a(()=>[p("div",ta,[(d(!0),b(R,null,U(y.value,(n,be)=>(d(),b("div",{key:n.dataIndex,class:"setting"},[p("div",na,[e(_e)]),p("div",null,[e(pe,{modelValue:n.checked,"onUpdate:modelValue":I=>n.checked=I,onChange:I=>Y(I,n,be)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),p("div",oa,_(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:a(()=>[p("div",aa,[e(de,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(fe,{ref_key:"tableRef",ref:H,"row-key":"id",loading:h(G),pagination:w,columns:m.value,data:T.value,bordered:!1,size:C.value,"row-selection":M,onPageChange:W,onPageSizeChange:Q},{quota:a(({record:n})=>[v(_(n.quota>0?`$${h(A)(n.quota)}`:n.quota<0?`-$${h(A)(-n.quota)}`:"$0.00"),1)]),remark:a(({record:n})=>[v(_(n.remark||"-"),1)]),status:a(({record:n})=>[n.status===2?(d(),b("span",sa)):(d(),b("span",la)),v(" "+_(t.$t(`finance.dict.status.${n.status}`)),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Fa=xe(ia,[["__scopeId","data-v-b1da6b77"]]);export{Fa as default};
