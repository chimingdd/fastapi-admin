import{u as Ve,C as Fe,o as Ie,x as Se,I as Be,y as Ee,_ as De}from"./index.16caf63c.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                */import{c as U,S as ze}from"./sortable.esm.bb8fac92.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as xe,r as G,e as u,c as N,w as Ae,B as w,C as B,aH as e,aG as a,aL as r,aM as p,u as L,F as v,aJ as J,aI as K,aD as Te,D as Ue,n as Ne,aK as Le,aF as Pe,b1 as Me,b2 as Oe,bC as Re,bB as qe,bD as He,bE as je,b5 as Ge,bF as Je,ab as Ke,aU as Qe,bi as We,bj as Xe,bl as Ye,bm as Ze,b4 as et,bG as tt,aT as at,bH as ot,bI as lt,bJ as nt,g as st}from"./arco.88eb8c02.js";import{u as ut}from"./loading.7dd88939.js";import{s as rt,a as ct,b as it,c as dt}from"./corp.aa4d373a.js";import{q as pt}from"./model.b3ec1c65.js";import"./chart.3301baad.js";import"./vue.f52bac7b.js";import"./base.87fcf6e2.js";const mt={class:"container"},_t={class:"action-icon"},ft={class:"action-icon"},vt={id:"tableSetting"},gt={style:{"margin-right":"4px",cursor:"move"}},ht={class:"title"},bt={name:"CorpList"},Ct=xe({...bt,setup(yt){const{proxy:E}=st(),Q=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),W=u([]);(async()=>{try{const{data:t}=await pt();W.value=t.items}catch{}})();const X=async t=>{_(!0);try{await rt(t),$()}catch{}finally{_(!1)}},P=()=>({name:"",code:"",sort:u(),remark:"",status:u(),created_at:[]}),{loading:Y,setLoading:_}=ut(!0),{t:s}=Ve(),M=u([]),n=u(P()),g=u([]),V=u([]),D=u("medium"),h=u([]),b=u(!0),O=u(),C={current:1,pageSize:10,showTotal:!0,showPageSize:!0},F=G({...C}),Z=N(()=>[{name:s("searchTable.size.mini"),value:"mini"},{name:s("searchTable.size.small"),value:"small"},{name:s("searchTable.size.medium"),value:"medium"},{name:s("searchTable.size.large"),value:"large"}]),ee=N(()=>[{title:s("corp.columns.name"),dataIndex:"name",slotName:"name",align:"center"},{title:s("corp.columns.code"),dataIndex:"code",slotName:"code",align:"center"},{title:s("corp.columns.sort"),dataIndex:"sort",slotName:"sort",align:"center"},{title:s("corp.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center"},{title:s("corp.columns.status"),dataIndex:"status",slotName:"status",align:"center"},{title:s("corp.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center"},{title:s("corp.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:130}]),te=N(()=>[{label:s("corp.dict.status.1"),value:1},{label:s("corp.dict.status.2"),value:2}]),I=async(t={...C})=>{_(!0);try{const{data:o}=await ct(t);M.value=o.items,F.current=t.current,F.pageSize=t.pageSize,F.total=o.paging.total}catch{}finally{_(!1)}},$=()=>{I({...C,...n.value})},ae=t=>{I({...C,...n.value,current:t})},oe=t=>{C.pageSize=t,I({...C,...n.value})};I();const le=()=>{n.value=P()},ne=async t=>{_(!0);try{await it(t),$()}catch{}finally{_(!1)}},se=(t,o)=>{D.value=t},ue=(t,o,c)=>{t?g.value.splice(c,0,o):g.value=V.value.filter(i=>i.dataIndex!==o.dataIndex)},R=(t,o,c,i=!1)=>{const m=i?U(t):t;return o>-1&&c>-1&&m.splice(o,1,m.splice(c,1,m[o]).pop()),m},re=t=>{t&&Ne(()=>{const o=document.getElementById("tableSetting");new ze(o,{onEnd(c){const{oldIndex:i,newIndex:m}=c;R(g.value,i,m),R(V.value,i,m)}})})};Ae(()=>ee.value,t=>{g.value=U(t),g.value.forEach((o,c)=>{o.checked=!0}),V.value=U(g.value)},{deep:!0,immediate:!0});const ce=t=>{h.value=t,b.value=!t.length},z=t=>{if(h.value.length===0)E.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let o=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;switch(t.action){case"status":t.value===1?o=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`:o=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;break;case"delete":o=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;break}E.$modal.warning({title:"\u8B66\u544A",titleAlign:"start",content:o,hideCancel:!1,onOk:()=>{_(!0),t.ids=h.value,dt(t).then(c=>{_(!1),E.$message.success("\u64CD\u4F5C\u6210\u529F"),$(),O.value.selectAll(!1)})}})}};return(t,o)=>{const c=Fe,i=Le,m=Pe,S=Me,y=Oe,d=Re,ie=qe,de=He,x=je,pe=Ge,q=Je,me=Ke,f=Qe,H=Ie,j=We,A=Xe,_e=Se,fe=Ye,ve=Ze,ge=Be,he=Ee,be=et,Ce=tt,ye=at,ke=ot,$e=lt,we=nt;return w(),B("div",mt,[e(m,{class:"container-breadcrumb"},{default:a(()=>[e(i,null,{default:a(()=>[e(c)]),_:1}),e(i,null,{default:a(()=>[r(p(t.$t("menu.corp")),1)]),_:1}),e(i,null,{default:a(()=>[r(p(t.$t("menu.corp.list")),1)]),_:1})]),_:1}),e(we,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(x,null,{default:a(()=>[e(d,{flex:1},{default:a(()=>[e(pe,{model:n.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(x,{gutter:16},{default:a(()=>[e(d,{span:8},{default:a(()=>[e(y,{field:"name",label:t.$t("corp.form.name")},{default:a(()=>[e(S,{modelValue:n.value.name,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value.name=l),placeholder:t.$t("corp.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(y,{field:"code",label:t.$t("corp.form.code")},{default:a(()=>[e(S,{modelValue:n.value.code,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value.code=l),placeholder:t.$t("corp.form.code.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(y,{field:"sort",label:t.$t("corp.form.sort")},{default:a(()=>[e(S,{modelValue:n.value.sort,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.sort=l),placeholder:t.$t("corp.form.sort.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(y,{field:"remark",label:t.$t("corp.form.remark")},{default:a(()=>[e(S,{modelValue:n.value.remark,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.remark=l),placeholder:t.$t("corp.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(y,{field:"status",label:t.$t("corp.form.status")},{default:a(()=>[e(ie,{modelValue:n.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>n.value.status=l),options:L(te),placeholder:t.$t("corp.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(y,{field:"created_at",label:t.$t("corp.form.created_at")},{default:a(()=>[e(de,{modelValue:n.value.created_at,"onUpdate:modelValue":o[5]||(o[5]=l=>n.value.created_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(q,{style:{height:"84px"},direction:"vertical"}),e(d,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(j,{direction:"vertical",size:18},{default:a(()=>[e(f,{type:"primary",onClick:$},{icon:a(()=>[e(me)]),default:a(()=>[r(" "+p(t.$t("corp.form.search")),1)]),_:1}),e(f,{onClick:le},{icon:a(()=>[e(H)]),default:a(()=>[r(" "+p(t.$t("corp.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(x,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(j,null,{default:a(()=>[e(f,{type:"primary",onClick:o[6]||(o[6]=l=>t.$router.push({name:"CorpCreate"}))},{default:a(()=>[r(p(t.$t("corp.operation.create")),1)]),_:1}),e(f,{type:"primary",status:"success",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[7]||(o[7]=l=>z({action:"status",value:1}))},{default:a(()=>[r(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(f,{type:"primary",status:"danger",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[8]||(o[8]=l=>z({action:"status",value:2}))},{default:a(()=>[r(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(f,{type:"primary",status:"danger",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[9]||(o[9]=l=>z({action:"delete"}))},{default:a(()=>[r(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(d,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(A,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[v("div",{class:"action-icon",onClick:$},[e(H,{size:"18"})])]),_:1},8,["content"]),e(ve,{onSelect:se},{content:a(()=>[(w(!0),B(J,null,K(L(Z),l=>(w(),Te(fe,{key:l.value,value:l.value,class:Ue({active:l.value===D.value})},{default:a(()=>[v("span",null,p(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(A,{content:t.$t("searchTable.actions.density")},{default:a(()=>[v("div",_t,[e(_e,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(A,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(Ce,{trigger:"click",position:"bl",onPopupVisibleChange:re},{content:a(()=>[v("div",vt,[(w(!0),B(J,null,K(V.value,(l,k)=>(w(),B("div",{key:l.dataIndex,class:"setting"},[v("div",gt,[e(he)]),v("div",null,[e(be,{modelValue:l.checked,"onUpdate:modelValue":T=>l.checked=T,onChange:T=>ue(T,l,k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),v("div",ht,p(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:a(()=>[v("div",ft,[e(ge,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e($e,{ref_key:"tableRef",ref:O,"row-key":"id",loading:L(Y),pagination:F,columns:g.value,data:M.value,bordered:!1,size:D.value,"row-selection":Q,onPageChange:ae,onPageSizeChange:oe,onSelectionChange:ce},{remark:a(({record:l})=>[r(p(l.remark||"-"),1)]),status:a(({record:l})=>[e(ye,{modelValue:l.status,"onUpdate:modelValue":k=>l.status=k,"checked-value":1,"unchecked-value":2,onChange:k=>ne({id:`${l.id}`,status:Number(`${l.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:l})=>[e(f,{type:"text",size:"small",onClick:k=>t.$router.push({name:"CorpUpdate",query:{id:`${l.id}`}})},{default:a(()=>[r(p(t.$t("corp.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(ke,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:k=>X({id:`${l.id}`})},{default:a(()=>[e(f,{type:"text",size:"small"},{default:a(()=>[r(p(t.$t("corp.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Gt=De(Ct,[["__scopeId","data-v-66ca4d2f"]]);export{Gt as default};
