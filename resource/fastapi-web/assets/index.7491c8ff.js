import{_ as M,E as Q}from"./index.525e8576.js";/* empty css               *//* empty css                */import{d as S,e as F,B as p,aD as g,aG as a,aH as e,aL as s,aM as y,bB as B,bC as D,b2 as R,b1 as j,bK as G,aU as C,b5 as L,aE as w,C as U,aJ as J,aI as P,bX as H,bi as E,aS as X,aT as W,bz as Y,F as Z,bs as x,u as ee,aK as le,aF as ae,bL as oe,bM as te,bJ as ue,bN as de}from"./arco.aed15247.js";import{u as A}from"./loading.b5911e1d.js";import{d as N,e as re}from"./model.570552fc.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as T}from"./vue.0cc5b64a.js";/* empty css               *//* empty css                */import{e as ne}from"./agent.63c3e84e.js";/* empty css               */import"./chart.9aa6eafa.js";import"./base.87fcf6e2.js";const se=S({__name:"base-info",emits:["changeStep"],setup($,{emit:v}){const{setLoading:c}=A(!0),m=T(),b=F(),d=F({id:"",corp:"",name:"",model:"",type:"",remark:"",prompt:"",status:1});(async(r={id:m.query.id})=>{c(!0);try{const{data:u}=await N(r);d.value.id=u.id,d.value.corp=u.corp,d.value.name=u.name,d.value.model=u.model,d.value.type=String(u.type),d.value.remark=u.remark,d.value.prompt=u.prompt,d.value.status=u.status}catch{}finally{c(!1)}})();const l=async()=>{var u;await((u=b.value)==null?void 0:u.validate())||v("changeStep","forward",{...d.value})};return(r,u)=>{const _=B,t=D,o=R,V=j,h=G,f=C,k=L;return p(),g(k,{ref_key:"formRef",ref:b,model:d.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:a(()=>[e(o,{field:"corp",label:r.$t("model.label.corp"),rules:[{required:!0,message:r.$t("model.error.corp.required")}]},{default:a(()=>[e(t,{modelValue:d.value.corp,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value.corp=i),placeholder:r.$t("model.placeholder.corp")},{default:a(()=>[e(_,{value:"OpenAI"},{default:a(()=>[s("OpenAI")]),_:1}),e(_,{value:"Midjourney"},{default:a(()=>[s("Midjourney")]),_:1}),e(_,{value:"GLM"},{default:a(()=>[s("\u667A\u8C31AI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(o,{field:"name",label:r.$t("model.label.name"),rules:[{required:!0,message:r.$t("model.error.name.required")}]},{default:a(()=>[e(V,{modelValue:d.value.name,"onUpdate:modelValue":u[1]||(u[1]=i=>d.value.name=i),placeholder:r.$t("model.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(o,{field:"model",label:r.$t("model.label.model"),rules:[{required:!0,message:r.$t("model.error.model.required")},{message:r.$t("model.error.model.pattern")}]},{default:a(()=>[e(V,{modelValue:d.value.model,"onUpdate:modelValue":u[2]||(u[2]=i=>d.value.model=i),placeholder:r.$t("model.placeholder.model")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(o,{field:"type",label:r.$t("model.label.type"),rules:[{required:!0,message:r.$t("model.error.type.required")}]},{default:a(()=>[e(t,{modelValue:d.value.type,"onUpdate:modelValue":u[3]||(u[3]=i=>d.value.type=i),placeholder:r.$t("model.placeholder.type")},{default:a(()=>[e(_,{value:"1"},{default:a(()=>[s("\u6587\u751F\u6587")]),_:1}),e(_,{value:"2"},{default:a(()=>[s("\u6587\u751F\u56FE")]),_:1}),e(_,{value:"3"},{default:a(()=>[s("\u56FE\u751F\u6587")]),_:1}),e(_,{value:"4"},{default:a(()=>[s("\u56FE\u751F\u56FE")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(o,{field:"prompt",label:r.$t("model.label.prompt")},{default:a(()=>[e(h,{modelValue:d.value.prompt,"onUpdate:modelValue":u[4]||(u[4]=i=>d.value.prompt=i),placeholder:r.$t("model.placeholder.prompt")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,{field:"remark",label:r.$t("model.label.remark")},{default:a(()=>[e(h,{modelValue:d.value.remark,"onUpdate:modelValue":u[5]||(u[5]=i=>d.value.remark=i),placeholder:r.$t("model.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(o,null,{default:a(()=>[e(f,{type:"primary",onClick:l},{default:a(()=>[s(y(r.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const me=M(se,[["__scopeId","data-v-fc8f0082"]]),ie=S({__name:"advanced",emits:["changeStep"],setup($,{emit:v}){const{setLoading:c}=A(!0),m=T(),b=F([]);(async()=>{c(!0);try{const{data:t}=await ne();b.value=t.items}catch{}finally{c(!1)}})();const q=F(),l=F({billing_method:"1",prompt_ratio:1,completion_ratio:1,fixed_quota:1,data_format:"",is_enable_model_agent:!1,model_agents:[],is_public:!0});(async(t={id:m.query.id})=>{c(!0);try{const{data:o}=await N(t);l.value.billing_method=String(o.billing_method),l.value.prompt_ratio=o.prompt_ratio,l.value.completion_ratio=o.completion_ratio,l.value.fixed_quota=o.fixed_quota,l.value.data_format=String(o.data_format),l.value.is_enable_model_agent=o.is_enable_model_agent,l.value.model_agents=o.model_agents,l.value.is_public=o.is_public}catch{}finally{c(!1)}})();const u=async()=>{var o;await((o=q.value)==null?void 0:o.validate())||v("changeStep","submit",{...l.value})},_=()=>{v("changeStep","backward")};return(t,o)=>{const V=H,h=E,f=R,k=X,i=W,z=B,K=D,I=C,O=L;return p(),g(O,{ref_key:"formRef",ref:q,model:l.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:a(()=>[e(f,{field:"billing_method",label:t.$t("model.label.billingMethod"),rules:[{required:!0,message:t.$t("model.error.billingMethod.required")}]},{default:a(()=>[e(h,{size:"large"},{default:a(()=>[e(V,{modelValue:l.value.billing_method,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value.billing_method=n),value:"1"},{default:a(()=>[s("\u500D\u7387")]),_:1},8,["modelValue"]),e(V,{modelValue:l.value.billing_method,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value.billing_method=n),value:"2"},{default:a(()=>[s("\u56FA\u5B9A\u989D\u5EA6")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),l.value.billing_method==="1"?(p(),g(f,{key:0,field:"prompt_ratio",label:t.$t("model.label.promptRatio"),rules:[{required:!0,message:t.$t("model.error.promptRatio.required")}]},{default:a(()=>[e(k,{modelValue:l.value.prompt_ratio,"onUpdate:modelValue":o[2]||(o[2]=n=>l.value.prompt_ratio=n),min:.001,placeholder:t.$t("model.placeholder.promptRatio")},null,8,["modelValue","min","placeholder"])]),_:1},8,["label","rules"])):w("",!0),l.value.billing_method==="1"?(p(),g(f,{key:1,field:"completion_ratio",label:t.$t("model.label.completionRatio"),rules:[{required:!0,message:t.$t("model.error.completionRatio.required")}]},{default:a(()=>[e(k,{modelValue:l.value.completion_ratio,"onUpdate:modelValue":o[3]||(o[3]=n=>l.value.completion_ratio=n),min:.001,placeholder:t.$t("model.placeholder.completionRatio")},null,8,["modelValue","min","placeholder"])]),_:1},8,["label","rules"])):w("",!0),l.value.billing_method==="2"?(p(),g(f,{key:2,field:"fixed_quota",label:t.$t("model.label.fixedQuota"),rules:[{required:!0,message:t.$t("model.error.fixedQuota.required")}]},{default:a(()=>[e(k,{modelValue:l.value.fixed_quota,"onUpdate:modelValue":o[4]||(o[4]=n=>l.value.fixed_quota=n),min:0,max:9999999999999,placeholder:t.$t("model.placeholder.fixedQuota")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):w("",!0),e(f,{field:"data_format",label:t.$t("model.label.dataFormat"),rules:[{required:!0,message:t.$t("model.error.dataFormat.required")}]},{default:a(()=>[e(h,{size:"large"},{default:a(()=>[e(V,{modelValue:l.value.data_format,"onUpdate:modelValue":o[5]||(o[5]=n=>l.value.data_format=n),value:"1"},{default:a(()=>[s("\u7EDF\u4E00\u683C\u5F0F")]),_:1},8,["modelValue"]),e(V,{modelValue:l.value.data_format,"onUpdate:modelValue":o[6]||(o[6]=n=>l.value.data_format=n),value:"2"},{default:a(()=>[s("\u5B98\u65B9\u683C\u5F0F")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(f,{field:"is_public",label:t.$t("model.label.isPublic"),rules:[{required:!0}]},{default:a(()=>[e(i,{modelValue:l.value.is_public,"onUpdate:modelValue":o[7]||(o[7]=n=>l.value.is_public=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(f,{field:"is_enable_model_agent",label:t.$t("model.label.isEnableModelAgent")},{default:a(()=>[e(i,{modelValue:l.value.is_enable_model_agent,"onUpdate:modelValue":o[8]||(o[8]=n=>l.value.is_enable_model_agent=n)},null,8,["modelValue"])]),_:1},8,["label"]),l.value.is_enable_model_agent?(p(),g(f,{key:3,field:"model_agents",label:t.$t("model.label.modelAgents"),rules:[{required:!0,message:t.$t("model.error.modelAgents.required")}]},{default:a(()=>[e(K,{modelValue:l.value.model_agents,"onUpdate:modelValue":o[9]||(o[9]=n=>l.value.model_agents=n),placeholder:t.$t("model.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(p(!0),U(J,null,P(b.value,n=>(p(),g(z,{key:n.id,value:n.id,label:n.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):w("",!0),e(f,null,{default:a(()=>[e(h,null,{default:a(()=>[e(I,{type:"secondary",onClick:_},{default:a(()=>[s(y(t.$t("model.button.prev")),1)]),_:1}),e(I,{type:"primary",onClick:u},{default:a(()=>[s(y(t.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const pe=M(ie,[["__scopeId","data-v-1c818c0a"]]);const _e={},fe={class:"success-wrap"};function ce($,v){const c=Y,m=C,b=E;return p(),U("div",fe,[e(c,{status:"success",title:$.$t("model.success.title"),subtitle:$.$t("model.success.update.subTitle")},null,8,["title","subtitle"]),e(b,{size:16},{default:a(()=>[e(m,{key:"finish",type:"secondary",onClick:v[0]||(v[0]=d=>$.$router.push({name:"ModelList"}))},{default:a(()=>[s(y($.$t("model.button.return")),1)]),_:1}),e(m,{key:"again",type:"primary",onClick:v[1]||(v[1]=d=>$.$router.push({name:"ModelDetail",query:{id:`${$.$route.query.id}`}}))},{default:a(()=>[s(y($.$t("model.button.view")),1)]),_:1})]),_:1})])}const be=M(_e,[["render",ce],["__scopeId","data-v-829f16db"]]),ve={class:"container"},ge={class:"wrapper"},ye={name:"ModelUpdate"},$e=S({...ye,setup($){const{loading:v,setLoading:c}=A(!1),m=F(1),b=F({}),d=async()=>{c(!0);try{await re(b.value),m.value=3,b.value={}}catch{}finally{c(!1)}},q=(l,r)=>{if(typeof l=="number"){m.value=l;return}if(l==="forward"||l==="submit"){if(b.value={...b.value,...r},l==="submit"){d();return}m.value+=1}else l==="backward"&&(m.value-=1)};return(l,r)=>{const u=Q,_=le,t=ae,o=oe,V=te,h=ue,f=de;return p(),U("div",ve,[e(t,{class:"container-breadcrumb"},{default:a(()=>[e(_,null,{default:a(()=>[e(u)]),_:1}),e(_,null,{default:a(()=>[s(y(l.$t("menu.model")),1)]),_:1}),e(_,null,{default:a(()=>[s(y(l.$t("menu.model.update")),1)]),_:1})]),_:1}),e(f,{loading:ee(v),style:{width:"100%"}},{default:a(()=>[e(h,{class:"general-card",bordered:!1},{title:a(()=>[s(y(l.$t("model.title.update")),1)]),default:a(()=>[Z("div",ge,[e(V,{current:m.value,"onUpdate:current":r[0]||(r[0]=k=>m.value=k),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(o,{description:l.$t("model.subTitle.baseInfo")},{default:a(()=>[s(y(l.$t("model.title.baseInfo")),1)]),_:1},8,["description"]),e(o,{description:l.$t("model.subTitle.advanced")},{default:a(()=>[s(y(l.$t("model.title.advanced")),1)]),_:1},8,["description"]),e(o,{description:l.$t("model.subTitle.update.finish")},{default:a(()=>[s(y(l.$t("model.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(p(),g(x,null,[m.value===1?(p(),g(me,{key:0,onChangeStep:q})):m.value===2?(p(),g(pe,{key:1,onChangeStep:q})):m.value===3?(p(),g(be,{key:2,onChangeStep:q})):w("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const ze=M($e,[["__scopeId","data-v-b52a59e3"]]);export{ze as default};
