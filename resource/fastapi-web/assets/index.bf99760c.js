import{u as Fe,C as Ve,o as Ie,x as Se,I as Be,y as Ee,_ as xe}from"./index.67674545.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                */import{c as T,S as De}from"./sortable.esm.8b1710c2.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css              */import{d as ze,r as G,e as i,c as L,w as Ae,B as $,C as S,aH as t,aG as a,aL as u,aM as d,u as N,F as g,aJ as J,aI as K,aD as Te,D as Le,n as Ne,aK as Ue,aF as Pe,b1 as Me,b2 as qe,bB as Oe,bA as Re,bD as He,bE as je,b5 as Ge,bF as Je,ab as Ke,aU as Qe,bi as We,bj as Xe,bl as Ye,bm as Ze,b4 as et,bG as tt,aT as at,bH as ot,bI as nt,bJ as lt,g as st}from"./arco.47b3c23b.js";import{u as ut}from"./loading.b238ab8e.js";import{s as ct,q as rt,a as it,b as dt}from"./corp.4cd71bbc.js";import{q as pt}from"./model.7898afa1.js";import"./chart.49ffccb2.js";import"./vue.94924b34.js";import"./base.87fcf6e2.js";const mt={class:"container"},_t={class:"action-icon"},ft={class:"action-icon"},gt={id:"tableSetting"},vt={style:{"margin-right":"4px",cursor:"move"}},ht={class:"title"},bt={name:"CorpList"},Ct=ze({...bt,setup(yt){const{proxy:B}=st(),Q=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),W=i([]);(async()=>{try{const{data:e}=await pt();W.value=e.items}catch{}})();const X=async e=>{m(!0);try{await ct(e),k()}catch{}finally{m(!1)}},U=()=>({name:"",code:"",status:i(),created_at:[]}),{loading:Y,setLoading:m}=ut(!0),{t:s}=Fe(),P=i([]),l=i(U()),v=i([]),w=i([]),E=i("medium"),h=i([]),b=i(!0),M=i(),C={current:1,pageSize:10,showTotal:!0,showPageSize:!0},F=G({...C}),Z=L(()=>[{name:s("searchTable.size.mini"),value:"mini"},{name:s("searchTable.size.small"),value:"small"},{name:s("searchTable.size.medium"),value:"medium"},{name:s("searchTable.size.large"),value:"large"}]),ee=L(()=>[{title:s("corp.columns.name"),dataIndex:"name",slotName:"name",align:"center"},{title:s("corp.columns.code"),dataIndex:"code",slotName:"code",align:"center"},{title:s("corp.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center"},{title:s("corp.columns.status"),dataIndex:"status",slotName:"status",align:"center"},{title:s("corp.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center"},{title:s("corp.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:130}]),te=L(()=>[{label:s("corp.dict.status.1"),value:1},{label:s("corp.dict.status.2"),value:2}]),V=async(e={...C})=>{m(!0);try{const{data:o}=await rt(e);P.value=o.items,F.current=e.current,F.pageSize=e.pageSize,F.total=o.paging.total}catch{}finally{m(!1)}},k=()=>{V({...C,...l.value})},ae=e=>{V({...C,...l.value,current:e})},oe=e=>{C.pageSize=e,V({...C,...l.value})};V();const ne=()=>{l.value=U()},le=async e=>{m(!0);try{await it(e),k()}catch{}finally{m(!1)}},se=(e,o)=>{E.value=e},ue=(e,o,c)=>{e?v.value.splice(c,0,o):v.value=w.value.filter(r=>r.dataIndex!==o.dataIndex)},q=(e,o,c,r=!1)=>{const p=r?T(e):e;return o>-1&&c>-1&&p.splice(o,1,p.splice(c,1,p[o]).pop()),p},ce=e=>{e&&Ne(()=>{const o=document.getElementById("tableSetting");new De(o,{onEnd(c){const{oldIndex:r,newIndex:p}=c;q(v.value,r,p),q(w.value,r,p)}})})};Ae(()=>ee.value,e=>{v.value=T(e),v.value.forEach((o,c)=>{o.checked=!0}),w.value=T(v.value)},{deep:!0,immediate:!0});const re=e=>{h.value=e,b.value=!e.length},x=e=>{if(h.value.length===0)B.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let o=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;switch(e.action){case"status":e.value===1?o=`\u662F\u5426\u786E\u5B9A\u542F\u7528\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`:o=`\u662F\u5426\u786E\u5B9A\u7981\u7528\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;break;case"delete":o=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${h.value.length}\u6761\u6570\u636E?`;break}B.$modal.warning({title:"\u8B66\u544A",titleAlign:"start",content:o,hideCancel:!1,onOk:()=>{m(!0),e.ids=h.value,dt(e).then(c=>{m(!1),B.$message.success("\u64CD\u4F5C\u6210\u529F"),k(),M.value.selectAll(!1)})}})}};return(e,o)=>{const c=Ve,r=Ue,p=Pe,O=Me,I=qe,_=Oe,ie=Re,de=He,D=je,pe=Ge,R=Je,me=Ke,f=Qe,H=Ie,j=We,z=Xe,_e=Se,fe=Ye,ge=Ze,ve=Be,he=Ee,be=et,Ce=tt,ye=at,ke=ot,$e=nt,we=lt;return $(),S("div",mt,[t(p,{class:"container-breadcrumb"},{default:a(()=>[t(r,null,{default:a(()=>[t(c)]),_:1}),t(r,null,{default:a(()=>[u(d(e.$t("menu.corp")),1)]),_:1}),t(r,null,{default:a(()=>[u(d(e.$t("menu.corp.list")),1)]),_:1})]),_:1}),t(we,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[t(D,null,{default:a(()=>[t(_,{flex:1},{default:a(()=>[t(pe,{model:l.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[t(D,{gutter:16},{default:a(()=>[t(_,{span:8},{default:a(()=>[t(I,{field:"name",label:e.$t("corp.form.name")},{default:a(()=>[t(O,{modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=n=>l.value.name=n),placeholder:e.$t("corp.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(_,{span:8},{default:a(()=>[t(I,{field:"code",label:e.$t("corp.form.code")},{default:a(()=>[t(O,{modelValue:l.value.code,"onUpdate:modelValue":o[1]||(o[1]=n=>l.value.code=n),placeholder:e.$t("corp.form.code.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(_,{span:8},{default:a(()=>[t(I,{field:"status",label:e.$t("corp.form.status")},{default:a(()=>[t(ie,{modelValue:l.value.status,"onUpdate:modelValue":o[2]||(o[2]=n=>l.value.status=n),options:N(te),placeholder:e.$t("corp.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),t(_,{span:8},{default:a(()=>[t(I,{field:"created_at",label:e.$t("corp.form.created_at")},{default:a(()=>[t(de,{modelValue:l.value.created_at,"onUpdate:modelValue":o[3]||(o[3]=n=>l.value.created_at=n),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(R,{style:{height:"84px"},direction:"vertical"}),t(_,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[t(j,{direction:"vertical",size:18},{default:a(()=>[t(f,{type:"primary",onClick:k},{icon:a(()=>[t(me)]),default:a(()=>[u(" "+d(e.$t("corp.form.search")),1)]),_:1}),t(f,{onClick:ne},{icon:a(()=>[t(H)]),default:a(()=>[u(" "+d(e.$t("corp.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{style:{"margin-top":"0","margin-bottom":"16px"}}),t(D,{style:{"margin-bottom":"16px"}},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(j,null,{default:a(()=>[t(f,{type:"primary",onClick:o[4]||(o[4]=n=>e.$router.push({name:"CorpCreate"}))},{default:a(()=>[u(d(e.$t("corp.operation.create")),1)]),_:1}),t(f,{type:"primary",status:"success",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[5]||(o[5]=n=>x({action:"status",value:1}))},{default:a(()=>[u(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),t(f,{type:"primary",status:"danger",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[6]||(o[6]=n=>x({action:"status",value:2}))},{default:a(()=>[u(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),t(f,{type:"primary",status:"danger",disabled:b.value,title:b.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[7]||(o[7]=n=>x({action:"delete"}))},{default:a(()=>[u(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),t(_,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[t(z,{content:e.$t("searchTable.actions.refresh")},{default:a(()=>[g("div",{class:"action-icon",onClick:k},[t(H,{size:"18"})])]),_:1},8,["content"]),t(ge,{onSelect:se},{content:a(()=>[($(!0),S(J,null,K(N(Z),n=>($(),Te(fe,{key:n.value,value:n.value,class:Le({active:n.value===E.value})},{default:a(()=>[g("span",null,d(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[t(z,{content:e.$t("searchTable.actions.density")},{default:a(()=>[g("div",_t,[t(_e,{size:"18"})])]),_:1},8,["content"])]),_:1}),t(z,{content:e.$t("searchTable.actions.columnSetting")},{default:a(()=>[t(Ce,{trigger:"click",position:"bl",onPopupVisibleChange:ce},{content:a(()=>[g("div",gt,[($(!0),S(J,null,K(w.value,(n,y)=>($(),S("div",{key:n.dataIndex,class:"setting"},[g("div",vt,[t(he)]),g("div",null,[t(be,{modelValue:n.checked,"onUpdate:modelValue":A=>n.checked=A,onChange:A=>ue(A,n,y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),g("div",ht,d(n.title==="#"?"\u5E8F\u5217\u53F7":n.title),1)]))),128))])]),default:a(()=>[g("div",ft,[t(ve,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),t($e,{ref_key:"tableRef",ref:M,"row-key":"id",loading:N(Y),pagination:F,columns:v.value,data:P.value,bordered:!1,size:E.value,"row-selection":Q,onPageChange:ae,onPageSizeChange:oe,onSelectionChange:re},{remark:a(({record:n})=>[u(d(n.remark||"-"),1)]),status:a(({record:n})=>[t(ye,{modelValue:n.status,"onUpdate:modelValue":y=>n.status=y,"checked-value":1,"unchecked-value":2,onChange:y=>le({id:`${n.id}`,status:Number(`${n.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:n})=>[t(f,{type:"text",size:"small",onClick:y=>e.$router.push({name:"CorpUpdate",query:{id:`${n.id}`}})},{default:a(()=>[u(d(e.$t("corp.columns.operations.update")),1)]),_:2},1032,["onClick"]),t(ke,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:y=>X({id:`${n.id}`})},{default:a(()=>[t(f,{type:"text",size:"small"},{default:a(()=>[u(d(e.$t("corp.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Gt=xe(Ct,[["__scopeId","data-v-c7f88672"]]);export{Gt as default};
