import{_ as q,E as G}from"./index.2884bedb.js";import{u as I}from"./loading.f132a353.js";/* empty css                */import{d as L,e as k,B as _,aD as g,aG as a,aH as e,aL as p,aM as f,bC as B,bD as M,b3 as N,b2 as H,bL as J,aV as K,b6 as F,C,aJ as D,aI as U,aU as P,bj as R,bA as Q,F as W,bt as X,aE as Y,u as Z,aK as x,aF as ee,bM as ae,bN as te,bK as le,bO as oe}from"./arco.25045eac.js";import{q as T,d as se}from"./key.d91976fe.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as O}from"./vue.8f4cc2df.js";/* empty css               */import{q as ne}from"./model.be0d19d1.js";import{e as re}from"./agent.63eec52f.js";/* empty css               */import"./chart.871a9cd2.js";const ue=L({__name:"base-info",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=I(!1),u=O(),i=k(),n=k({id:"",corp:"",key:"",remark:"",status:1});(async(o={id:u.query.id})=>{d(!0);try{const{data:t}=await T(o);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{d(!1)}})();const l=async()=>{var t;await((t=i.value)==null?void 0:t.validate())||m("changeStep","forward",{...n.value})};return(o,t)=>{const h=B,S=M,b=N,s=H,r=J,w=K,V=F;return _(),g(V,{ref_key:"formRef",ref:i,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"corp",label:o.$t("key.label.corp"),rules:[{required:!0,message:o.$t("key.error.corp.required")}]},{default:a(()=>[e(S,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=v=>n.value.corp=v),placeholder:o.$t("key.placeholder.corp")},{default:a(()=>[e(h,{value:"OpenAI"},{default:a(()=>[p("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"key",label:o.$t("key.label.key"),rules:[{required:!0,message:o.$t("key.error.key.required")}]},{default:a(()=>[e(s,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=v=>n.value.key=v),placeholder:o.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"remark",label:o.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(r,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=v=>n.value.remark=v),placeholder:o.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(w,{type:"primary",onClick:l},{default:a(()=>[p(f(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=q(ue,[["__scopeId","data-v-213bf2fd"]]),ce=L({__name:"advanced",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=I(!0),u=O(),i=k([]);(async()=>{d(!0);try{const{data:s}=await ne();i.value=s.items}catch{}finally{d(!1)}})();const $=k([]);(async()=>{d(!0);try{const{data:s}=await re();$.value=s.items}catch{}finally{d(!1)}})();const o=k(),t=k({models:[],model_agents:[],is_agents_only:!1});(async(s={id:u.query.id})=>{d(!0);try{const{data:r}=await T(s);t.value.models=r.models,t.value.model_agents=r.model_agents,t.value.is_agents_only=r.is_agents_only}catch{}finally{d(!1)}})();const S=async()=>{var r;await((r=o.value)==null?void 0:r.validate())||m("changeStep","submit",{...t.value})},b=()=>{m("changeStep","backward")};return(s,r)=>{const w=B,V=M,v=N,E=P,A=K,j=R,z=F;return _(),g(z,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(v,{field:"models",label:s.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":r[0]||(r[0]=c=>t.value.models=c),placeholder:s.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),C(D,null,U(i.value,c=>(_(),g(w,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,{field:"model_agents",label:s.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":r[1]||(r[1]=c=>t.value.model_agents=c),placeholder:s.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(_(!0),C(D,null,U($.value,c=>(_(),g(w,{key:c.id,value:c.id,label:c.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,{field:"is_agents_only",label:s.$t("key.label.isAgentsOnly")},{default:a(()=>[e(E,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":r[2]||(r[2]=c=>t.value.is_agents_only=c)},null,8,["modelValue"])]),_:1},8,["label"]),e(v,null,{default:a(()=>[e(j,null,{default:a(()=>[e(A,{type:"secondary",onClick:b},{default:a(()=>[p(f(s.$t("key.button.prev")),1)]),_:1}),e(A,{type:"primary",onClick:S},{default:a(()=>[p(f(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ie=q(ce,[["__scopeId","data-v-d826004b"]]);const pe={},_e={class:"success-wrap"};function me(y,m){const d=Q,u=K,i=R;return _(),C("div",_e,[e(d,{status:"success",title:y.$t("key.success.title"),subtitle:y.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(i,{size:16},{default:a(()=>[e(u,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=n=>y.$router.push({name:"KeyModelList"}))},{default:a(()=>[p(f(y.$t("key.button.return")),1)]),_:1}),e(u,{key:"again",type:"primary",onClick:m[1]||(m[1]=n=>y.$router.push({name:"KeyDetail",query:{id:`${y.$route.query.id}`}}))},{default:a(()=>[p(f(y.$t("key.button.view")),1)]),_:1})]),_:1})])}const fe=q(pe,[["render",me],["__scopeId","data-v-016ee704"]]),ye={class:"container"},be={class:"wrapper"},ve={name:"KeyUpdate"},ke=L({...ve,setup(y){const{loading:m,setLoading:d}=I(!1),u=k(1),i=k({}),n=async()=>{d(!0);try{await se(i.value),u.value=3,i.value={}}catch{}finally{d(!1)}},$=(l,o)=>{if(typeof l=="number"){u.value=l;return}if(l==="forward"||l==="submit"){if(i.value={...i.value,...o},l==="submit"){n();return}u.value+=1}else l==="backward"&&(u.value-=1)};return(l,o)=>{const t=G,h=x,S=ee,b=ae,s=te,r=le,w=oe;return _(),C("div",ye,[e(S,{class:"container-breadcrumb"},{default:a(()=>[e(h,null,{default:a(()=>[e(t)]),_:1}),e(h,null,{default:a(()=>[p(f(l.$t("menu.key")),1)]),_:1}),e(h,null,{default:a(()=>[p(f(l.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:Z(m),style:{width:"100%"}},{default:a(()=>[e(r,{class:"general-card",bordered:!1},{title:a(()=>[p(f(l.$t("key.title.update")),1)]),default:a(()=>[W("div",be,[e(s,{current:u.value,"onUpdate:current":o[0]||(o[0]=V=>u.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(b,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[p(f(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[p(f(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.update.finish")},{default:a(()=>[p(f(l.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(_(),g(X,null,[u.value===1?(_(),g(de,{key:0,onChangeStep:$})):u.value===2?(_(),g(ie,{key:1,onChangeStep:$})):u.value===3?(_(),g(fe,{key:2,onChangeStep:$})):Y("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Fe=q(ke,[["__scopeId","data-v-b0da38cd"]]);export{Fe as default};
