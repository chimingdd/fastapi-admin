import{i as G,_ as J}from"./index.fcb5fd7e.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               */import{d as K,e as b,B as p,C as w,aH as o,aG as r,aL as s,aM as u,F,aD as v,aJ as L,aI as I,aE as V,u as d,bT as i,aK as M,aF as P,b1 as Q,b2 as W,bA as X,bB as Y,bQ as Z,bi as x,b4 as ee,aS as le,bW as ae,bO as te,aU as oe,b5 as re,bI as se,bR as ue,g as de}from"./arco.75032696.js";import{f as ne}from"./vue.ebfaaf45.js";import{u as ie}from"./loading.96e1cbd7.js";import{c as pe}from"./notice.2971f775.js";import{q as me}from"./admin_user.d7e34427.js";import{i as ce}from"./admin_reseller.87e11a23.js";import{A as fe}from"./aieditor.4c3c2a6d.js";import"./chart.f8f3ffb1.js";const be={class:"container"},ve={class:"wrapper"},_e={class:"submit-btn"},ye={name:"NoticeCreate"},Ve=K({...ye,setup($e){const{proxy:H}=de(),{loading:N,setLoading:c}=ie(!1),R=ne(),U=b(),l=b({title:"",content:"",category:b(),scope:"1",users:[],resellers:[],methods:["1","2"],priority:b(),expires_at:"",scheduled_time:"",remark:"",status:1}),q=b([]);(async()=>{c(!0);try{const{data:e}=await me();q.value=e.items}catch{}finally{c(!1)}})();const C=b([]);(async()=>{c(!0);try{const{data:e}=await ce();C.value=e.items}catch{}finally{c(!1)}})();const $=async e=>{var y;if(!await((y=U.value)==null?void 0:y.validate())){c(!0);try{l.value.status=e,await pe(l.value).then(()=>{let m="\u64CD\u4F5C\u6210\u529F";e===1?m="\u53D1\u5E03\u6210\u529F":e===2&&(m="\u4FDD\u5B58\u6210\u529F"),H.$message.success(m),R.push({name:"NoticeList"})})}catch{}finally{c(!1)}}};return(e,t)=>{const y=G,m=M,S=P,E=Q,n=W,_=X,g=Y,f=Z,h=x,D=ee,A=le,B=ae,T=te,k=oe,z=re,O=se,j=ue;return p(),w("div",be,[o(S,{class:"container-breadcrumb"},{default:r(()=>[o(m,null,{default:r(()=>[o(y)]),_:1}),o(m,null,{default:r(()=>[s(u(e.$t("menu.sys")),1)]),_:1}),o(m,null,{default:r(()=>[s(u(e.$t("menu.notice.create")),1)]),_:1})]),_:1}),o(j,{loading:d(N),style:{width:"100%"}},{default:r(()=>[o(O,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[F("div",ve,[o(z,{ref_key:"formRef",ref:U,model:l.value,class:"form","label-col-props":{span:3},"wrapper-col-props":{span:18}},{default:r(()=>[o(n,{field:"title",label:e.$t("notice.label.title"),rules:[{required:!0,message:e.$t("notice.error.title.required")}]},{default:r(()=>[o(E,{modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.title=a),placeholder:e.$t("notice.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(n,{field:"category",label:e.$t("notice.label.category"),rules:[{required:!0,message:e.$t("notice.error.category.required")}]},{default:r(()=>[o(g,{modelValue:l.value.category,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.category=a),placeholder:e.$t("notice.placeholder.category"),scrollbar:!1,"allow-search":""},{default:r(()=>[o(_,{value:"1"},{default:r(()=>[s(u(e.$t("notice.dict.category.1")),1)]),_:1}),o(_,{value:"2"},{default:r(()=>[s(u(e.$t("notice.dict.category.2")),1)]),_:1}),o(_,{value:"3"},{default:r(()=>[s(u(e.$t("notice.dict.category.3")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(n,{field:"scope",label:e.$t("notice.label.scope"),rules:[{required:!0,message:e.$t("notice.error.scope.required")}]},{default:r(()=>[o(h,{size:"large"},{default:r(()=>[o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.scope=a),value:"1"},{default:r(()=>[s(u(e.$t("notice.dict.scope.1")),1)]),_:1},8,["modelValue"]),o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.scope=a),value:"2"},{default:r(()=>[s(u(e.$t("notice.dict.scope.2")),1)]),_:1},8,["modelValue"]),o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.scope=a),value:"3"},{default:r(()=>[s(u(e.$t("notice.dict.scope.3")),1)]),_:1},8,["modelValue"]),o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.scope=a),value:"4"},{default:r(()=>[s(u(e.$t("notice.dict.scope.4")),1)]),_:1},8,["modelValue"]),o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.scope=a),value:"5"},{default:r(()=>[s(u(e.$t("notice.dict.scope.5")),1)]),_:1},8,["modelValue"]),o(f,{modelValue:l.value.scope,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.scope=a),value:"6"},{default:r(()=>[s(u(e.$t("notice.dict.scope.6")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),l.value.scope==="4"||l.value.scope==="6"?(p(),v(n,{key:0,field:"users",label:e.$t("notice.label.users"),rules:[{required:!0,message:e.$t("notice.error.users.required")}]},{default:r(()=>[o(g,{modelValue:l.value.users,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.users=a),placeholder:e.$t("notice.placeholder.users"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(p(!0),w(L,null,I(q.value,a=>(p(),v(_,{key:a.user_id,value:a.user_id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):V("",!0),l.value.scope==="5"||l.value.scope==="6"?(p(),v(n,{key:1,field:"resellers",label:e.$t("notice.label.resellers"),rules:[{required:!0,message:e.$t("notice.error.resellers.required")}]},{default:r(()=>[o(g,{modelValue:l.value.resellers,"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.resellers=a),placeholder:e.$t("notice.placeholder.resellers"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(p(!0),w(L,null,I(C.value,a=>(p(),v(_,{key:a.user_id,value:a.user_id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):V("",!0),o(n,{field:"methods",label:e.$t("notice.label.methods"),rules:[{required:!0,message:e.$t("notice.error.methods.required")}]},{default:r(()=>[o(h,{size:"large"},{default:r(()=>[o(D,{modelValue:l.value.methods,"onUpdate:modelValue":t[10]||(t[10]=a=>l.value.methods=a),value:"1","default-checked":!0},{default:r(()=>[s(u(e.$t("notice.dict.methods.1")),1)]),_:1},8,["modelValue"]),o(D,{modelValue:l.value.methods,"onUpdate:modelValue":t[11]||(t[11]=a=>l.value.methods=a),value:"2"},{default:r(()=>[s(u(e.$t("notice.dict.methods.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),o(n,{field:"priority",label:e.$t("notice.label.priority")},{default:r(()=>[o(A,{modelValue:l.value.priority,"onUpdate:modelValue":t[12]||(t[12]=a=>l.value.priority=a),placeholder:e.$t("notice.placeholder.priority"),precision:0,min:-999,max:99999},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(n,{field:"expires_at",label:e.$t("notice.label.expires_at")},{default:r(()=>[o(B,{modelValue:l.value.expires_at,"onUpdate:modelValue":t[13]||(t[13]=a=>l.value.expires_at=a),placeholder:e.$t("notice.placeholder.expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":a=>d(i)(a).isBefore(d(i)().subtract(1,"day")),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>d(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),o(n,{field:"scheduled_time",label:e.$t("notice.label.scheduled_time")},{default:r(()=>[o(B,{modelValue:l.value.scheduled_time,"onUpdate:modelValue":t[14]||(t[14]=a=>l.value.scheduled_time=a),placeholder:e.$t("notice.placeholder.scheduled_time"),"disabled-date":a=>d(i)(a).isBefore(d(i)().subtract(1,"day")),style:{width:"100%"},"show-time":""},null,8,["modelValue","placeholder","disabled-date"])]),_:1},8,["label"]),o(n,{field:"content",label:e.$t("notice.label.content"),rules:[{required:!0,message:e.$t("notice.error.content.required")}]},{default:r(()=>[o(fe,{modelValue:l.value.content,"onUpdate:modelValue":t[15]||(t[15]=a=>l.value.content=a),style:{flex:"1",height:"500px"}},null,8,["modelValue"])]),_:1},8,["label","rules"]),o(n,{field:"remark",label:e.$t("notice.label.remark")},{default:r(()=>[o(T,{modelValue:l.value.remark,"onUpdate:modelValue":t[16]||(t[16]=a=>l.value.remark=a),placeholder:e.$t("notice.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,null,{default:r(()=>[F("div",_e,[o(k,{type:"secondary",onClick:t[17]||(t[17]=a=>$(2))},{default:r(()=>[s(u(e.$t("button.draft")),1)]),_:1}),l.value.scheduled_time?V("",!0):(p(),v(k,{key:0,type:"primary",onClick:t[18]||(t[18]=a=>$(1))},{default:r(()=>[s(u(e.$t("button.publish")),1)]),_:1})),l.value.scheduled_time?(p(),v(k,{key:1,type:"primary",onClick:t[19]||(t[19]=a=>$(3))},{default:r(()=>[s(u(e.$t("button.scheduled")),1)]),_:1})):V("",!0)])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ke=J(Ve,[["__scopeId","data-v-87d0b651"]]);export{Ke as default};
