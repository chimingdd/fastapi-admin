import{u as ne,i as Ee,s as Ue,A as qe,k as Ae,B as Pe,_ as Le}from"./index.b0442b91.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               */import{d as oe,e as g,B as u,C as m,aH as e,aG as t,u as i,aD as y,aM as c,bS as Oe,bT as Re,bU as He,bV as Me,r as te,c as P,w as je,aL as f,F as S,aJ as ae,aI as le,D as Ge,n as Je,aK as Qe,aF as Ke,b1 as We,b2 as Xe,bM as Ye,bL as Ze,bN as et,b5 as tt,bO as at,ab as lt,aU as nt,bl as ot,bu as st,bw as it,bx as ut,b4 as ct,bv as dt,aT as rt,bP as pt,bQ as mt,aV as _t,bR as ft,g as bt}from"./arco.98c6b47e.js";import{u as se}from"./loading.145cbdec.js";import{q as vt,s as ht,a as gt,b as yt,c as kt,d as wt}from"./notice_template.a26653cb.js";import{c as G,S as $t}from"./sortable.esm.9b1f3954.js";/* empty css                *//* empty css                */import"./chart.30821537.js";import"./vue.a64f92cf.js";const Ct={style:{margin:"10px 0 30px 10px"}},Vt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},xt={key:1},Dt={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},St={key:1},Ft={key:1},Nt={key:1},It={key:1,style:{"max-height":"110px",display:"block",overflow:"auto"}},zt={key:1},Bt={key:1},Tt={key:1},Et={name:"NoticeTemplateDetail"},Ut=oe({...Et,props:{id:{type:String,default:""}},setup(J){const D=J,{t:r}=ne(),{loading:b,setLoading:B}=se(!0),_=g({});return(async(s={id:D.id})=>{B(!0);try{const{data:V}=await vt(s);for(let o=0;o<V.scenes.length;o+=1)V.scenes[o]=r(`notice.template.dict.scenes.${V.scenes[o]}`);_.value=V}catch{}finally{B(!1)}})(),(s,V)=>{const o=Oe,d=Re,p=He,T=Me;return u(),m("div",Ct,[e(T,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:t(()=>[e(p,{label:i(r)("notice.template.detail.name"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Vt,c(_.value.name),1))]),_:1},8,["label"]),e(p,{label:i(r)("notice.template.detail.scenes"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",xt,c(_.value.scenes.toString()),1))]),_:1},8,["label"]),e(p,{label:i(r)("notice.template.detail.title"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Dt,c(_.value.title),1))]),_:1},8,["label"]),e(p,{label:i(r)("notice.template.detail.channels"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",St,c(s.$t(`notice.template.dict.channels.${_.value.channels}`)),1))]),_:1},8,["label"]),e(p,{label:i(r)("notice.template.detail.is_popup"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Ft,c(i(r)(`dict.${_.value.is_popup||!1}`)),1))]),_:1},8,["label"]),e(p,{label:i(r)("common.is_public"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Nt,c(i(r)(`dict.public.${_.value.is_public||!1}`)),1))]),_:1},8,["label"]),e(p,{label:i(r)("common.remark"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",It,c(_.value.remark||"-"),1))]),_:1},8,["label"]),e(p,{label:i(r)("common.status"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",zt,c(s.$t(`dict.status.${_.value.status}`)),1))]),_:1},8,["label"]),e(p,{label:i(r)("common.created_at"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Bt,c(_.value.created_at),1))]),_:1},8,["label"]),e(p,{label:i(r)("common.updated_at"),span:2},{default:t(()=>[i(b)?(u(),y(d,{key:0,animation:!0},{default:t(()=>[e(o,{rows:1})]),_:1})):(u(),m("span",Tt,c(_.value.updated_at),1))]),_:1},8,["label"])]),_:1})])}}}),qt={class:"container"},At={class:"action-icon"},Pt={class:"action-icon"},Lt={id:"tableSetting"},Ot={style:{"margin-right":"4px",cursor:"move"}},Rt={class:"title"},Ht={name:"NoticeTemplateList"},Mt=oe({...Ht,setup(J){const{proxy:D}=bt(),r=te({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),b=async a=>{v(!0);try{await ht(a),D.$message.success("\u5220\u9664\u6210\u529F"),N()}catch{}finally{v(!1)}},B=()=>({name:"",scenes:[],channels:[],title:"",content:"",remark:""}),{loading:_,setLoading:v}=se(!0),{t:s}=ne(),V=g([]),o=g(B()),d=g([]),p=g([]),T=g("medium"),E=g([]),F=g(!0),L=g(),I={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},U=te({...I}),ie=P(()=>[{name:s("size.mini"),value:"mini"},{name:s("size.small"),value:"small"},{name:s("size.medium"),value:"medium"},{name:s("size.large"),value:"large"}]),ue=P(()=>[{title:s("notice.template.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center",width:80},{title:s("notice.template.columns.name"),dataIndex:"name",slotName:"name",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.is_public"),dataIndex:"is_public",slotName:"is_public",align:"center",width:65},{title:s("notice.template.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center",ellipsis:!0,tooltip:!0},{title:s("notice.template.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:s("notice.template.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:s("notice.template.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:220}]),ce=P(()=>[{label:s("notice.template.dict.scenes.code"),value:"code"},{label:s("notice.template.dict.scenes.login"),value:"login"},{label:s("notice.template.dict.scenes.register"),value:"register"},{label:s("notice.template.dict.scenes.forget_password"),value:"forget_password"},{label:s("notice.template.dict.scenes.change_password"),value:"change_password"},{label:s("notice.template.dict.scenes.change_email"),value:"change_email"},{label:s("notice.template.dict.scenes.quota_warning"),value:"quota_warning"},{label:s("notice.template.dict.scenes.quota_exhaustion"),value:"quota_exhaustion"},{label:s("notice.template.dict.scenes.quota_expire_warning"),value:"quota_expire_warning"},{label:s("notice.template.dict.scenes.quota_expire"),value:"quota_expire"},{label:s("notice.template.dict.scenes.notice"),value:"notice"}]),de=P(()=>[{label:s("notice.template.dict.channels.web"),value:"web"},{label:s("notice.template.dict.channels.email"),value:"email"}]),q=async(a={...I})=>{v(!0);try{const{data:n}=await gt(a);V.value=n.items,U.current=a.current,U.pageSize=a.pageSize,U.total=n.paging.total}catch{}finally{v(!1),L.value.selectAll(!1)}},N=()=>{q({...I,...o.value})},re=a=>{q({...I,...o.value,current:a})},pe=a=>{I.pageSize=a,q({...I,...o.value})};q();const me=()=>{o.value=B(),N()},_e=async a=>{v(!0);try{await yt(a),D.$message.success("\u64CD\u4F5C\u6210\u529F"),N()}catch{}finally{v(!1)}},fe=async a=>{v(!0);try{await kt(a),D.$message.success("\u64CD\u4F5C\u6210\u529F"),N()}catch{}finally{v(!1)}},be=(a,n)=>{T.value=a},ve=(a,n,k)=>{a?d.value.splice(k,0,n):d.value=p.value.filter(w=>w.dataIndex!==n.dataIndex)},Q=(a,n,k,w=!1)=>{const x=w?G(a):a;return n>-1&&k>-1&&x.splice(n,1,x.splice(k,1,x[n]).pop()),x},he=a=>{a&&Je(()=>{const n=document.getElementById("tableSetting");new $t(n,{onEnd(k){const{oldIndex:w,newIndex:x}=k;Q(d.value,w,x),Q(p.value,w,x)}})})};je(()=>ue.value,a=>{d.value=G(a),d.value.forEach((n,k)=>{n.checked=!0}),p.value=G(d.value)},{deep:!0,immediate:!0});const ge=a=>{E.value=a,F.value=!a.length},O=a=>{if(E.value.length===0)D.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let n=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${E.value.length}\u6761\u6570\u636E?`;switch(a.action){case"delete":n=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${E.value.length}\u6761\u6570\u636E?`;break}D.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:n,hideCancel:!1,onOk:()=>{v(!0),a.ids=E.value,wt(a).then(k=>{v(!1),D.$message.success("\u64CD\u4F5C\u6210\u529F"),N(),L.value.selectAll(!1)})}})}},R=g(!1),K=g(),ye=a=>{R.value=!0,K.value=a},ke=()=>{R.value=!1};return(a,n)=>{const k=Ee,w=Qe,x=Ke,A=We,z=Xe,$=Ye,W=Ze,H=et,we=tt,X=at,$e=lt,C=nt,Y=Ue,Z=ot,M=st,Ce=qe,Ve=it,xe=ut,De=Ae,Se=Pe,Fe=ct,Ne=dt,ee=rt,Ie=pt,ze=mt,Be=_t,Te=ft;return u(),m("div",qt,[e(x,{class:"container-breadcrumb"},{default:t(()=>[e(w,null,{default:t(()=>[e(k)]),_:1}),e(w,null,{default:t(()=>[f(c(a.$t("menu.notice")),1)]),_:1}),e(w,null,{default:t(()=>[f(c(a.$t("menu.notice.template.list")),1)]),_:1})]),_:1}),e(Te,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:t(()=>[e(H,null,{default:t(()=>[e($,{flex:1},{default:t(()=>[e(we,{model:o.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(H,{gutter:16},{default:t(()=>[e($,{span:8},{default:t(()=>[e(z,{field:"name",label:a.$t("notice.template.form.name")},{default:t(()=>[e(A,{modelValue:o.value.title,"onUpdate:modelValue":n[0]||(n[0]=l=>o.value.title=l),placeholder:a.$t("notice.template.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"title",label:a.$t("notice.template.form.title")},{default:t(()=>[e(A,{modelValue:o.value.title,"onUpdate:modelValue":n[1]||(n[1]=l=>o.value.title=l),placeholder:a.$t("notice.template.form.title.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"content",label:a.$t("notice.template.form.content")},{default:t(()=>[e(A,{modelValue:o.value.content,"onUpdate:modelValue":n[2]||(n[2]=l=>o.value.content=l),placeholder:a.$t("notice.template.form.content.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"scenes",label:a.$t("notice.template.form.scenes")},{default:t(()=>[e(W,{modelValue:o.value.scenes,"onUpdate:modelValue":n[3]||(n[3]=l=>o.value.scenes=l),placeholder:a.$t("notice.template.form.selectDefault"),options:i(ce),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"channels",label:a.$t("notice.template.form.channels")},{default:t(()=>[e(W,{modelValue:o.value.channels,"onUpdate:modelValue":n[4]||(n[4]=l=>o.value.channels=l),placeholder:a.$t("notice.template.form.selectDefault"),options:i(de),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e($,{span:8},{default:t(()=>[e(z,{field:"remark",label:a.$t("notice.template.form.remark")},{default:t(()=>[e(A,{modelValue:o.value.remark,"onUpdate:modelValue":n[5]||(n[5]=l=>o.value.remark=l),placeholder:a.$t("notice.template.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(X,{style:{height:"84px"},direction:"vertical"}),e($,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(Z,{direction:"vertical",size:18},{default:t(()=>[e(C,{type:"primary",onClick:N},{icon:t(()=>[e($e)]),default:t(()=>[f(" "+c(a.$t("notice.template.form.search")),1)]),_:1}),e(C,{onClick:me},{icon:t(()=>[e(Y)]),default:t(()=>[f(" "+c(a.$t("notice.template.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(H,{style:{"margin-bottom":"16px"}},{default:t(()=>[e($,{span:12},{default:t(()=>[e(Z,null,{default:t(()=>[e(C,{type:"primary",onClick:n[6]||(n[6]=l=>a.$router.push({name:"NoticeTemplateCreate"}))},{default:t(()=>[f(c(a.$t("notice.template.operation.create")),1)]),_:1}),e(C,{type:"primary",status:"success",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:n[7]||(n[7]=l=>O({action:"status",value:1}))},{default:t(()=>[f(" \u542F\u7528 ")]),_:1},8,["disabled","title"]),e(C,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:n[8]||(n[8]=l=>O({action:"status",value:2}))},{default:t(()=>[f(" \u7981\u7528 ")]),_:1},8,["disabled","title"]),e(C,{type:"primary",status:"danger",disabled:F.value,title:F.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:n[9]||(n[9]=l=>O({action:"delete"}))},{default:t(()=>[f(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e($,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:t(()=>[e(M,{content:a.$t("actions.refresh")},{default:t(()=>[S("div",{class:"action-icon",onClick:N},[e(Y,{size:"18"})])]),_:1},8,["content"]),e(xe,{onSelect:be},{content:t(()=>[(u(!0),m(ae,null,le(i(ie),l=>(u(),y(Ve,{key:l.value,value:l.value,class:Ge({active:l.value===T.value})},{default:t(()=>[S("span",null,c(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(M,{content:a.$t("actions.density")},{default:t(()=>[S("div",At,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(M,{content:a.$t("actions.column_setting")},{default:t(()=>[e(Ne,{trigger:"click",position:"bl",onPopupVisibleChange:he},{content:t(()=>[S("div",Lt,[(u(!0),m(ae,null,le(p.value,(l,h)=>(u(),m("div",{key:l.dataIndex,class:"setting"},[S("div",Ot,[e(Se)]),S("div",null,[e(Fe,{modelValue:l.checked,"onUpdate:modelValue":j=>l.checked=j,onChange:j=>ve(j,l,h)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),S("div",Rt,c(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:t(()=>[S("div",Pt,[e(De,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ze,{ref_key:"tableRef",ref:L,"row-key":"id",loading:i(_),pagination:U,columns:d.value,data:V.value,bordered:!1,size:T.value,"row-selection":r,onPageChange:re,onPageSizeChange:pe,onSelectionChange:ge},{is_public:t(({record:l})=>[e(ee,{modelValue:l.is_public,"onUpdate:modelValue":h=>l.is_public=h,"checked-value":!0,"unchecked-value":!1,onChange:h=>_e({id:`${l.id}`,is_public:`${l.is_public}`})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),status:t(({record:l})=>[e(ee,{modelValue:l.status,"onUpdate:modelValue":h=>l.status=h,"checked-value":1,"unchecked-value":2,onChange:h=>fe({id:`${l.id}`,status:Number(`${l.status}`)})},null,8,["modelValue","onUpdate:modelValue","onChange"])]),remark:t(({record:l})=>[f(c(l.remark||"-"),1)]),operations:t(({record:l})=>[e(C,{type:"text",size:"small",onClick:h=>ye(l.id)},{default:t(()=>[f(c(a.$t("operations.view")),1)]),_:2},1032,["onClick"]),e(C,{type:"text",size:"small",onClick:h=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${l.id}`,action:"copy"}})},{default:t(()=>[f(c(a.$t("notice.template.columns.operations.copy")),1)]),_:2},1032,["onClick"]),e(C,{type:"text",size:"small",onClick:h=>a.$router.push({name:"NoticeTemplateUpdate",query:{id:`${l.id}`}})},{default:t(()=>[f(c(a.$t("notice.template.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(Ie,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:h=>b({id:`${l.id}`})},{default:t(()=>[e(C,{type:"text",size:"small"},{default:t(()=>[f(c(a.$t("notice.template.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),e(Be,{title:a.$t("menu.notice.template.detail"),"unmount-on-close":"","render-to-body":"",width:700,footer:!1,visible:R.value,onCancel:ke},{default:t(()=>[e(Ut,{id:K.value},null,8,["id"])]),_:1},8,["title","visible"])]),_:1})])}}});const ba=Le(Mt,[["__scopeId","data-v-bd274de6"]]);export{ba as default};
