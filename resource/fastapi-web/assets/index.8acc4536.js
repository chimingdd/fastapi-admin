import{x as N,_ as O}from"./index.c0f50ad7.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as z,e as m,B as p,C as k,aH as l,aG as r,aL as d,aM as u,F as w,aJ as G,aI as H,aD as U,aE as J,u as K,aK as P,aF as Q,bE as j,bA as W,bB as X,b2 as Y,b1 as Z,bO as x,bP as ee,bi as le,aS as ae,bQ as te,aT as oe,aU as re,b5 as ne,bI as de,bR as se,g as ue}from"./arco.e79a5475.js";import{u as me}from"./loading.d06bc570.js";import{f as pe}from"./vue.2a7862c7.js";import{d as ie}from"./agent.68373156.js";import{q as ce}from"./corp.d247a35f.js";import{a as be}from"./model.82ed5b80.js";import"./chart.f33778db.js";import"./base.87fcf6e2.js";const _e={class:"container"},ge={class:"wrapper"},fe={class:"submit-btn"},ve={name:"ModelAgentCreate"},ye=z({...ve,setup(Ve){const{loading:C,setLoading:s}=me(!1),{proxy:q}=ue(),B=pe(),b=m([]);(async()=>{s(!0);try{const{data:e}=await ce();b.value=e.items}catch{}finally{s(!1)}})();const _=m([]);(async()=>{s(!0);try{const{data:e}=await be();_.value=e.items}catch{}finally{s(!1)}})();const g=m(),t=m({corp:"",name:"",base_url:"",path:"",lb_strategy:"1",weight:m(20),remark:"",models:[],key:"",is_agents_only:!0}),I=async()=>{var a;if(!await((a=g.value)==null?void 0:a.validate())){s(!0);try{await ie(t.value).then(()=>{q.$message.success("\u65B0\u5EFA\u6210\u529F"),B.push({name:"ModelAgentList"})})}catch{}finally{s(!1)}}};return(e,a)=>{const f=N,i=P,F=Q,v=j,L=W,M=X,n=Y,c=Z,y=x,V=ee,h=le,A=ae,R=te,S=oe,$=re,T=ne,D=de,E=se;return p(),k("div",_e,[l(F,{class:"container-breadcrumb"},{default:r(()=>[l(i,null,{default:r(()=>[l(f)]),_:1}),l(i,null,{default:r(()=>[d(u(e.$t("menu.agent")),1)]),_:1}),l(i,null,{default:r(()=>[d(u(e.$t("menu.model.agent.create")),1)]),_:1})]),_:1}),l(E,{loading:K(C),style:{width:"100%"}},{default:r(()=>[l(D,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[w("div",ge,[l(T,{ref_key:"formRef",ref:g,model:t.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:r(()=>[l(v,{orientation:"left"},{default:r(()=>[d(u(e.$t("model.title.baseInfo")),1)]),_:1}),l(n,{field:"corp",label:e.$t("model.agent.label.corp"),rules:[{required:!0,message:e.$t("model.agent.error.corp.required")}]},{default:r(()=>[l(M,{modelValue:t.value.corp,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.corp=o),placeholder:e.$t("model.agent.placeholder.corp"),"allow-search":""},{default:r(()=>[(p(!0),k(G,null,H(b.value,o=>(p(),U(L,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(n,{field:"name",label:e.$t("model.agent.label.name"),rules:[{required:!0,message:e.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:e.$t("model.agent.error.name.pattern")}]},{default:r(()=>[l(c,{modelValue:t.value.name,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.name=o),placeholder:e.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(n,{field:"base_url",label:e.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:e.$t("model.agent.error.baseUrl.required")}]},{default:r(()=>[l(c,{modelValue:t.value.base_url,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.base_url=o),placeholder:e.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),l(n,{field:"path",label:e.$t("model.agent.label.path")},{default:r(()=>[l(c,{modelValue:t.value.path,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.path=o),placeholder:e.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{field:"remark",label:e.$t("model.agent.label.remark")},{default:r(()=>[l(y,{modelValue:t.value.remark,"onUpdate:modelValue":a[4]||(a[4]=o=>t.value.remark=o),placeholder:e.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(v,{orientation:"left"},{default:r(()=>[d(u(e.$t("model.title.advanced")),1)]),_:1}),l(n,{field:"lb_strategy",label:e.$t("model.agent.label.lb_strategy"),rules:[{required:!0}]},{default:r(()=>[l(h,{size:"large"},{default:r(()=>[l(V,{modelValue:t.value.lb_strategy,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.lb_strategy=o),value:"1","default-checked":!0},{default:r(()=>[d(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),l(V,{modelValue:t.value.lb_strategy,"onUpdate:modelValue":a[6]||(a[6]=o=>t.value.lb_strategy=o),value:"2"},{default:r(()=>[d("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),t.value.lb_strategy==="2"?(p(),U(n,{key:0,field:"weight",label:e.$t("model.agent.label.weight"),rules:[{required:t.value.lb_strategy==="2",message:e.$t("model.agent.error.weight.required")}]},{default:r(()=>[l(A,{modelValue:t.value.weight,"onUpdate:modelValue":a[7]||(a[7]=o=>t.value.weight=o),precision:0,min:1,max:100,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):J("",!0),l(n,{field:"models",label:e.$t("model.agent.label.models")},{default:r(()=>[l(R,{modelValue:t.value.models,"onUpdate:modelValue":a[8]||(a[8]=o=>t.value.models=o),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:_.value,placeholder:e.$t("model.agent.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),l(n,{field:"key",label:e.$t("model.agent.label.key")},{default:r(()=>[l(y,{modelValue:t.value.key,"onUpdate:modelValue":a[9]||(a[9]=o=>t.value.key=o),placeholder:e.$t("model.agent.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(n,{field:"is_agents_only",label:e.$t("model.agent.label.isAgentsOnly")},{default:r(()=>[l(S,{modelValue:t.value.is_agents_only,"onUpdate:modelValue":a[10]||(a[10]=o=>t.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),l(h,null,{default:r(()=>[w("div",fe,[l($,{type:"secondary",onClick:a[11]||(a[11]=o=>e.$router.push({name:"ModelAgentList"}))},{default:r(()=>[d(u(e.$t("button.cancel")),1)]),_:1}),l($,{type:"primary",onClick:I},{default:r(()=>[d(u(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Qe=O(ye,[["__scopeId","data-v-112298d7"]]);export{Qe as default};
