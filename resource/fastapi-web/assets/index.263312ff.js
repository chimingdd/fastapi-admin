import{u as M,a as X,_ as N,g as H,r as Z,f as ee}from"./index.3029f51b.js";/* empty css              */import{F as ae}from"./index.fb33d1eb.js";import{d as T,e as i,r as x,t as D,B as k,aD as B,aG as s,aH as e,u as t,F as y,aL as C,aM as w,b3 as z,b4 as E,b5 as J,b6 as le,aW as K,b7 as P,g as W,c as j,C as A,aJ as O,b8 as te,b9 as oe,aE as G,ba as se,bb as ne,bc as ce}from"./arco.fd20202f.js";/* empty css              *//* empty css               */import{f as Q,g as re}from"./vue.70a4bb93.js";import"./chart.57980958.js";const ie={class:"remember-me"},ue=T({__name:"account-login",setup(S){const{proxy:g}=W(),{t:a}=M(),$=Q(),f=X(),r=i(!1),n=re("login-config",{rememberMe:!0,username:"",password:""}),m=x({form:{username:n.value.username,password:n.value.password,captcha:"",uuid:""},rules:{username:[{required:!0,message:a("login.account.error.required.username")}],password:[{required:!0,message:a("login.account.error.required.password")}],captcha:[{required:!0,message:a("login.account.error.required.captcha")}]}}),{form:u,rules:p}=D(m),h=({errors:o,values:d})=>{r.value||o||(r.value=!0,f.login({account:d.username,password:d.password,terminal:"web",channel:"user",method:"account"}).then(()=>{const{redirect:V,...q}=$.currentRoute.value.query;$.push({name:V||"Workplace",query:{...q}});const{rememberMe:R}=n.value,{username:c}=d;n.value.username=R?c:"",g.$message.success(a("login.success"))}).catch(()=>{}).finally(()=>{r.value=!1}))},F=o=>{n.value.rememberMe=o};return(o,d)=>{const V=z,q=E,R=J,c=le,l=K,v=P;return k(),B(v,{ref:"formRef",model:t(u),rules:t(p),layout:"vertical",size:"large",class:"login-form",onSubmit:h},{default:s(()=>[e(q,{field:"username","hide-label":""},{default:s(()=>[e(V,{modelValue:t(u).username,"onUpdate:modelValue":d[0]||(d[0]=_=>t(u).username=_),placeholder:o.$t("login.account.placeholder.username"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(q,{field:"password","hide-label":""},{default:s(()=>[e(R,{modelValue:t(u).password,"onUpdate:modelValue":d[1]||(d[1]=_=>t(u).password=_),placeholder:o.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),y("div",ie,[e(c,{"model-value":t(n).rememberMe,onChange:F},{default:s(()=>[C(w(o.$t("login.rememberMe")),1)]),_:1},8,["model-value","onChange"])]),e(l,{class:"btn",loading:r.value,type:"primary","html-type":"submit"},{default:s(()=>[C(w(o.$t("login.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])}}});const de=N(ue,[["__scopeId","data-v-5ea56b45"]]),me={class:"login-email-title"},pe=T({__name:"email-login",setup(S){const{proxy:g}=W(),{t:a}=M(),$=Q(),f=X(),r=i(!1),n=i(!1),m=i(!1),u=i(60),p=i(),h=i("login.captcha.get"),F=j(()=>a(h.value)),o=x({form:{email:"",captcha:"",terminal:"web",channel:"login"},rules:{email:[{required:!0,message:a("login.email.error.required.email")}],captcha:[{required:!0,message:a("login.email.error.required.captcha")}]}}),{form:d,rules:V}=D(o),q=()=>{window.clearInterval(p.value),u.value=60,h.value="login.captcha.get",m.value=!1},R=()=>{n.value||g.$refs.formRef.validateField("email",l=>{l||(n.value=!0,h.value="login.captcha.ing",H({email:d.value.email,channel:"login"}).then(()=>{n.value=!1,m.value=!0,h.value=`${a("login.captcha.get")}(${u.value-=1}s)`,p.value=window.setInterval(()=>{u.value-=1,h.value=`${a("login.captcha.get")}(${u.value}s)`,u.value<=0&&q()},1e3)}).catch(()=>{q(),n.value=!1}))})},c=({errors:l,values:v})=>{r.value||l||(r.value=!0,f.login({account:v.email,code:v.captcha,terminal:"web",channel:"user",method:"code"}).then(()=>{const{redirect:_,...I}=$.currentRoute.value.query;$.push({name:_||"Workplace",query:{...I}}),g.$message.success(a("login.success"))}).catch(()=>{d.value.captcha=""}).finally(()=>{r.value=!1}))};return(l,v)=>{const _=z,I=E,L=K,U=P;return k(),A(O,null,[y("div",me,w(l.$t("login.email.title")),1),e(U,{ref:"formRef",model:t(d),rules:t(V),layout:"vertical",size:"large",class:"login-form",onSubmit:c},{default:s(()=>[e(I,{field:"email","hide-label":""},{default:s(()=>[e(_,{modelValue:t(d).email,"onUpdate:modelValue":v[0]||(v[0]=b=>t(d).email=b),placeholder:l.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(I,{field:"captcha","hide-label":""},{default:s(()=>[e(_,{modelValue:t(d).captcha,"onUpdate:modelValue":v[1]||(v[1]=b=>t(d).captcha=b),placeholder:l.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),e(L,{class:"captcha-btn",loading:n.value,disabled:m.value,onClick:R},{default:s(()=>[C(w(t(F)),1)]),_:1},8,["loading","disabled"])]),_:1}),e(L,{class:"btn",loading:r.value,type:"primary","html-type":"submit"},{default:s(()=>[C(w(l.$t("login.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const ge=N(pe,[["__scopeId","data-v-d90942c8"]]),_e={class:"sub-title"},fe=T({__name:"register",setup(S){const{proxy:g}=W(),{t:a}=M(),$=Q(),f=i(!1),r=i(!1),n=i(!1),m=i(60),u=i(),p=i("login.captcha.get"),h=j(()=>a(p.value)),F=x({form:{email:"",password:"",captcha:""},rules:{email:[{required:!0,message:a("login.email.error.required.email")}],password:[{required:!0,message:a("login.email.error.required.password")}],captcha:[{required:!0,message:a("login.email.error.required.captcha")}]}}),{form:o,rules:d}=D(F),V=()=>{window.clearInterval(u.value),m.value=60,p.value="login.captcha.get",n.value=!1},q=()=>{r.value||g.$refs.formRef.validateField("email",c=>{c||(r.value=!0,p.value="login.captcha.ing",H({email:o.value.email,channel:"register"}).then(()=>{r.value=!1,n.value=!0,p.value=`${a("login.captcha.get")}(${m.value-=1}s)`,u.value=window.setInterval(()=>{m.value-=1,p.value=`${a("login.captcha.get")}(${m.value}s)`,m.value<=0&&V()},1e3)}).catch(()=>{V(),r.value=!1}))})},R=({errors:c,values:l})=>{f.value||c||(f.value=!0,Z({account:l.email,password:l.password,terminal:"web",code:l.captcha}).then(()=>{g.$message.success(a("register.success")),$.go(0)}).catch(()=>{o.value.captcha=""}).finally(()=>{f.value=!1}))};return(c,l)=>{const v=z,_=E,I=K,L=J,U=P;return k(),A(O,null,[y("div",_e,w(c.$t("login.form.register.title")),1),e(U,{ref:"formRef",model:t(o),rules:t(d),layout:"vertical",size:"large",class:"login-form",onSubmit:R},{default:s(()=>[e(_,{field:"email","hide-label":""},{default:s(()=>[e(v,{modelValue:t(o).email,"onUpdate:modelValue":l[0]||(l[0]=b=>t(o).email=b),placeholder:c.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(_,{field:"captcha","hide-label":""},{default:s(()=>[e(v,{modelValue:t(o).captcha,"onUpdate:modelValue":l[1]||(l[1]=b=>t(o).captcha=b),placeholder:c.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),e(I,{class:"captcha-btn",loading:r.value,disabled:n.value,onClick:q},{default:s(()=>[C(w(t(h)),1)]),_:1},8,["loading","disabled"])]),_:1}),e(_,{field:"password","hide-label":""},{default:s(()=>[e(L,{modelValue:t(o).password,"onUpdate:modelValue":l[2]||(l[2]=b=>t(o).password=b),placeholder:c.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(I,{class:"btn",loading:f.value,type:"primary","html-type":"submit"},{default:s(()=>[C(w(c.$t("register.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const he=N(fe,[["__scopeId","data-v-34c4a05c"]]),ve={class:"sub-title"},be=T({__name:"forget",setup(S){const{proxy:g}=W(),{t:a}=M(),$=Q(),f=i(!1),r=i(!1),n=i(!1),m=i(60),u=i(),p=i("login.captcha.get"),h=j(()=>a(p.value)),F=x({form:{email:"",password:"",captcha:""},rules:{email:[{required:!0,message:a("login.email.error.required.email")}],password:[{required:!0,message:a("login.email.error.required.password")}],captcha:[{required:!0,message:a("login.email.error.required.captcha")}]}}),{form:o,rules:d}=D(F),V=()=>{window.clearInterval(u.value),m.value=60,p.value="login.captcha.get",n.value=!1},q=()=>{r.value||g.$refs.formRef.validateField("email",c=>{c||(r.value=!0,p.value="login.captcha.ing",H({email:o.value.email,channel:"forget_account"}).then(()=>{r.value=!1,n.value=!0,p.value=`${a("login.captcha.get")}(${m.value-=1}s)`,u.value=window.setInterval(()=>{m.value-=1,p.value=`${a("login.captcha.get")}(${m.value}s)`,m.value<=0&&V()},1e3)}).catch(()=>{V(),r.value=!1}))})},R=({errors:c,values:l})=>{f.value||c||(f.value=!0,ee({account:l.email,password:l.password,terminal:"web",code:l.captcha}).then(()=>{g.$message.success(a("forget.success")),$.go(0)}).catch(()=>{o.value.captcha=""}).finally(()=>{f.value=!1}))};return(c,l)=>{const v=z,_=E,I=K,L=J,U=P;return k(),A(O,null,[y("div",ve,w(c.$t("login.form.forget.title")),1),e(U,{ref:"formRef",model:t(o),rules:t(d),layout:"vertical",size:"large",class:"login-form",onSubmit:R},{default:s(()=>[e(_,{field:"email","hide-label":""},{default:s(()=>[e(v,{modelValue:t(o).email,"onUpdate:modelValue":l[0]||(l[0]=b=>t(o).email=b),placeholder:c.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(_,{field:"captcha","hide-label":""},{default:s(()=>[e(v,{modelValue:t(o).captcha,"onUpdate:modelValue":l[1]||(l[1]=b=>t(o).captcha=b),placeholder:c.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),e(I,{class:"captcha-btn",loading:r.value,disabled:n.value,onClick:q},{default:s(()=>[C(w(t(h)),1)]),_:1},8,["loading","disabled"])]),_:1}),e(_,{field:"password","hide-label":""},{default:s(()=>[e(L,{modelValue:t(o).password,"onUpdate:modelValue":l[2]||(l[2]=b=>t(o).password=b),placeholder:c.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),e(I,{class:"btn",loading:f.value,type:"primary","html-type":"submit"},{default:s(()=>[C(w(c.$t("forget.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const we=N(be,[["__scopeId","data-v-e8718137"]]),Y=S=>(se("data-v-347b187b"),S=S(),ne(),S),ye={class:"root"},$e=Y(()=>y("div",{class:"logo"},[y("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"}),y("div",{class:"logo-text"},"Fast API")],-1)),Ve={class:"container"},qe=Y(()=>y("div",{class:"left-banner"},null,-1)),ke={class:"login-card"},Ce={class:"title"},Ie={class:"actions"},Re={class:"footer"},Se=T({__name:"index",setup(S){const g=i(!1),a=i(!1),$=()=>{g.value=!1,a.value=!1},f=()=>{g.value=!0,a.value=!1},r=()=>{a.value=!0,g.value=!1};return(n,m)=>{const u=ce,p=te,h=oe;return k(),A("div",ye,[$e,y("div",Ve,[qe,y("div",ke,[y("div",Ce,w(n.$t("login.welcome")),1),g.value?(k(),B(he,{key:0})):a.value?(k(),B(we,{key:1})):(k(),B(p,{key:2,class:"account-tab","default-active-key":"1"},{default:s(()=>[e(u,{key:"1",title:n.$t("login.account")},{default:s(()=>[e(de)]),_:1},8,["title"]),e(u,{key:"2",title:n.$t("login.email")},{default:s(()=>[e(ge)]),_:1},8,["title"])]),_:1})),y("div",Ie,[a.value?G("",!0):(k(),B(h,{key:0,onClick:r},{default:s(()=>[C(w(n.$t("login.form.forget")),1)]),_:1})),g.value?G("",!0):(k(),B(h,{key:1,onClick:f},{default:s(()=>[C(w(n.$t("login.form.register")),1)]),_:1})),g.value||a.value?(k(),B(h,{key:2,onClick:$},{default:s(()=>[C(w(n.$t("login.form.login")),1)]),_:1})):G("",!0)])])]),y("div",Re,[e(ae)])])}}});const De=N(Se,[["__scopeId","data-v-347b187b"]]);export{De as default};
