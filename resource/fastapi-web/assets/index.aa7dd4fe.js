import{u as be,M as he,_ as we}from"./index.ac90f642.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as ye,e as i,B as _,C as y,aH as u,aG as r,aL as m,aM as g,F as ae,aJ as V,aI as $,aD as f,aE as b,bn as ke,bo as Ve,u as $e,aK as xe,aF as Me,bJ as Ae,bF as Ue,bG as Ne,b2 as Se,b1 as Ce,bO as Fe,bQ as Ee,bi as Ie,aT as De,aS as Re,b4 as Be,a5 as Le,aU as je,a4 as Oe,b5 as Qe,bN as Pe,bR as Te,g as Ge}from"./arco.ceb3b32e.js";import{u as ze}from"./loading.7c8370f4.js";import{h as He,f as Ke}from"./vue.39e0c239.js";import{r as s,p as n}from"./common.df364eef.js";import{q as Je,i as We,c as Ze}from"./model.b2ef6e13.js";import{q as Xe}from"./provider.61c03340.js";import{f as Ye}from"./agent.4642000e.js";import{q as ea}from"./group.0e940de5.js";import{P as aa}from"./pricing.ecdd7840.js";import"./chart.214504ad.js";/* empty css               */const la={class:"container"},oa={class:"wrapper"},ta={class:"submit-btn"},ua={name:"ModelUpdate"},ra=ye({...ua,setup(ia){const{loading:le,setLoading:h}=ze(!0),{proxy:z}=Ge(),{t:oe}=be(),te=He(),ue=Ke(),N=i([]),S=new Map;(async()=>{h(!0);try{const{data:a}=await Xe();N.value=a.items;for(let o=0;o<N.value.length;o+=1)S.set(N.value[o].id,N.value[o])}catch{}finally{h(!1)}})();const C=i([]);(async()=>{h(!0);try{const{data:a}=await Je();C.value=a.items}catch{}finally{h(!1)}})();const T=i([]);(async()=>{h(!0);try{const{data:a}=await Ye();T.value=a.items}catch{}finally{h(!1)}})();const H=i([]);(async()=>{try{const{data:a}=await ea();H.value=a.items}catch{}finally{h(!1)}})();const K=i(),e=i({id:"",provider_id:"",name:"",model:"",type:"1",base_url:"",path:"",remark:"",is_enable_preset_config:!1,preset_config:{is_support_system_role:!0,system_role_prompt:"",min_tokens:i(),max_tokens:i(),is_support_stream:!0},pricing:{billing_rule:1,billing_items:[],text:{input_ratio:i(),output_ratio:i()},text_cache:{read_ratio:i()},tiered_text:[],tiered_text_cache:[],image:{input_ratio:i(),output_ratio:i()},image_generation:[],image_cache:{read_ratio:i()},vision:[],audio:{input_ratio:i(),output_ratio:i()},audio_cache:{read_ratio:i()},search:[],midjourney:[]},text_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},image_quota:{billing_method:"1",generation_quotas:[],text_ratio:1,input_ratio:1,output_ratio:1,cached_ratio:1,fixed_quota:i(),text_price:i(),input_price:i(),output_price:i(),cached_price:i()},audio_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},multimodal_quota:{billing_rule:"1",text_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},vision_quotas:[],search_quota:i(),search_quotas:[]},realtime_quota:{text_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},audio_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},fixed_quota:i()},multimodal_audio_quota:{text_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},audio_quota:{billing_method:"1",prompt_ratio:1,completion_ratio:1,cached_ratio:1,fixed_quota:i(),prompt_price:i(),completion_price:i(),cached_price:i()},fixed_quota:i()},midjourney_quotas:[],request_data_format:"1",response_data_format:"1",is_public:!0,groups:[],is_enable_model_agent:!0,lb_strategy:"1",model_agents:[],is_enable_forward:!1,forward_config:{forward_rule:"1",match_rule:["2"],target_model:"",decision_model:"",keywords:[],target_models:[],content_length:i()},is_enable_fallback:!1,fallback_config:{model_agent:"",model:""}}),J=i(),re=async()=>{var p,v;const a=S.get(e.value.provider_id);if(e.value.type==="2"?a&&a.code==="Midjourney"?(e.value.image_quota.generation_quotas=[],e.value.multimodal_quota.vision_quotas=[]):(e.value.multimodal_quota.vision_quotas=[],e.value.midjourney_quotas=[],e.value.image_quota.billing_method==="2"&&(e.value.image_quota.generation_quotas=[])):e.value.type==="100"?(e.value.image_quota.generation_quotas=[],e.value.midjourney_quotas=[],a&&a.code!=="OpenAI"&&(e.value.multimodal_quota.search_quotas=[])):(e.value.image_quota.generation_quotas=[],e.value.multimodal_quota.vision_quotas=[],e.value.midjourney_quotas=[],e.value.multimodal_quota.search_quotas=[]),!await((p=K.value)==null?void 0:p.validate())){if(await((v=J.value)==null?void 0:v.validate())){z.$message.warning(oe("model.error.pricing.required"));return}h(!0);try{e.value.text_quota.prompt_price&&(e.value.text_quota.prompt_ratio=s(e.value.text_quota.prompt_price)),e.value.text_quota.completion_price&&(e.value.text_quota.completion_ratio=s(e.value.text_quota.completion_price)),e.value.text_quota.cached_price&&(e.value.text_quota.cached_ratio=s(e.value.text_quota.cached_price)),e.value.image_quota.text_price&&(e.value.image_quota.text_ratio=s(e.value.image_quota.text_price)),e.value.image_quota.input_price&&(e.value.image_quota.input_ratio=s(e.value.image_quota.input_price)),e.value.image_quota.output_price&&(e.value.image_quota.output_ratio=s(e.value.image_quota.output_price)),e.value.image_quota.cached_price&&(e.value.image_quota.cached_ratio=s(e.value.image_quota.cached_price)),e.value.audio_quota.prompt_price&&(e.value.audio_quota.prompt_ratio=s(e.value.audio_quota.prompt_price)),e.value.audio_quota.completion_price&&(e.value.audio_quota.completion_ratio=s(e.value.audio_quota.completion_price)),e.value.audio_quota.cached_price&&(e.value.audio_quota.cached_ratio=s(e.value.audio_quota.cached_price)),e.value.multimodal_quota.text_quota.prompt_price&&(e.value.multimodal_quota.text_quota.prompt_ratio=s(e.value.multimodal_quota.text_quota.prompt_price)),e.value.multimodal_quota.text_quota.completion_price&&(e.value.multimodal_quota.text_quota.completion_ratio=s(e.value.multimodal_quota.text_quota.completion_price)),e.value.multimodal_quota.text_quota.cached_price&&(e.value.multimodal_quota.text_quota.cached_ratio=s(e.value.multimodal_quota.text_quota.cached_price)),e.value.realtime_quota.text_quota.prompt_price&&(e.value.realtime_quota.text_quota.prompt_ratio=s(e.value.realtime_quota.text_quota.prompt_price)),e.value.realtime_quota.text_quota.completion_price&&(e.value.realtime_quota.text_quota.completion_ratio=s(e.value.realtime_quota.text_quota.completion_price)),e.value.realtime_quota.text_quota.cached_price&&(e.value.realtime_quota.text_quota.cached_ratio=s(e.value.realtime_quota.text_quota.cached_price)),e.value.realtime_quota.audio_quota.prompt_price&&(e.value.realtime_quota.audio_quota.prompt_ratio=s(e.value.realtime_quota.audio_quota.prompt_price)),e.value.realtime_quota.audio_quota.completion_price&&(e.value.realtime_quota.audio_quota.completion_ratio=s(e.value.realtime_quota.audio_quota.completion_price)),e.value.realtime_quota.audio_quota.cached_price&&(e.value.realtime_quota.audio_quota.cached_ratio=s(e.value.realtime_quota.audio_quota.cached_price)),e.value.multimodal_audio_quota.text_quota.prompt_price&&(e.value.multimodal_audio_quota.text_quota.prompt_ratio=s(e.value.multimodal_audio_quota.text_quota.prompt_price)),e.value.multimodal_audio_quota.text_quota.completion_price&&(e.value.multimodal_audio_quota.text_quota.completion_ratio=s(e.value.multimodal_audio_quota.text_quota.completion_price)),e.value.multimodal_audio_quota.text_quota.cached_price&&(e.value.multimodal_audio_quota.text_quota.cached_ratio=s(e.value.multimodal_audio_quota.text_quota.cached_price)),e.value.multimodal_audio_quota.audio_quota.prompt_price&&(e.value.multimodal_audio_quota.audio_quota.prompt_ratio=s(e.value.multimodal_audio_quota.audio_quota.prompt_price)),e.value.multimodal_audio_quota.audio_quota.completion_price&&(e.value.multimodal_audio_quota.audio_quota.completion_ratio=s(e.value.multimodal_audio_quota.audio_quota.completion_price)),e.value.multimodal_audio_quota.audio_quota.cached_price&&(e.value.multimodal_audio_quota.audio_quota.cached_ratio=s(e.value.multimodal_audio_quota.audio_quota.cached_price)),await We(e.value).then(()=>{z.$message.success("\u66F4\u65B0\u6210\u529F"),ue.push({name:"ModelList"})})}catch{}finally{h(!1)}}};(async(a={id:te.query.id})=>{var o,p,v,w,A,c,q;h(!0);try{const{data:l}=await Ze(a);e.value.id=l.id,e.value.provider_id=l.provider_id,e.value.name=l.name,e.value.model=l.model,e.value.type=String(l.type),e.value.base_url=l.base_url,e.value.path=l.path,e.value.remark=l.remark,e.value.status=l.status,e.value.pricing=l.pricing;for(let d=0;d<e.value.pricing.image_generation.length;d+=1)if(e.value.pricing.image_generation[d].is_default){e.value.pricing.image_generation[d].is_default="1";break}for(let d=0;d<e.value.pricing.vision.length;d+=1)if(e.value.pricing.vision[d].is_default){e.value.pricing.vision[d].is_default="1";break}for(let d=0;d<e.value.pricing.search.length;d+=1)if(e.value.pricing.search[d].is_default){e.value.pricing.search[d].is_default="1";break}if(e.value.request_data_format=String(l.request_data_format||1),e.value.response_data_format=String(l.response_data_format||1),e.value.is_public=l.is_public,e.value.groups=l.groups,e.value.is_enable_preset_config=l.is_enable_preset_config,e.value.preset_config=l.preset_config,e.value.is_enable_model_agent=l.is_enable_model_agent,e.value.lb_strategy=String(l.lb_strategy),e.value.model_agents=l.model_agents,e.value.is_enable_forward=l.is_enable_forward,l.text_quota&&(e.value.text_quota=l.text_quota,e.value.text_quota.prompt_price=Number(n(l.text_quota.prompt_ratio)),e.value.text_quota.completion_price=Number(n(l.text_quota.completion_ratio)),e.value.text_quota.cached_price=Number(n(l.text_quota.cached_ratio)),e.value.text_quota.billing_method=String(e.value.text_quota.billing_method)),l.image_quota){F.value=e.value.type==="2"&&l.provider_code!=="Midjourney",l.image_quota.generation_quotas||(l.image_quota.generation_quotas=[]),e.value.image_quota=l.image_quota,e.value.image_quota.billing_method=String(e.value.image_quota.billing_method);for(let d=0;d<e.value.image_quota.generation_quotas.length;d+=1)if(e.value.image_quota.generation_quotas[d].is_default){e.value.image_quota.generation_quotas[d].is_default="1";break}e.value.image_quota.text_price=Number(n(l.image_quota.text_ratio)),e.value.image_quota.input_price=Number(n(l.image_quota.input_ratio)),e.value.image_quota.output_price=Number(n(l.image_quota.output_ratio)),e.value.image_quota.cached_price=Number(n(l.image_quota.cached_ratio))}if(l.audio_quota&&(E.value=e.value.type==="5"||e.value.type==="6",e.value.audio_quota=l.audio_quota,e.value.audio_quota.prompt_price=Number(n(l.audio_quota.prompt_ratio)),e.value.audio_quota.completion_price=Number(n(l.audio_quota.completion_ratio)),e.value.audio_quota.cached_price=Number(n(l.audio_quota.cached_ratio)),e.value.audio_quota.billing_method=String(e.value.audio_quota.billing_method)),l.multimodal_quota){if(j.value=e.value.type==="100"&&l.provider_code!=="Midjourney",O.value=e.value.type==="100"&&l.provider_code!=="Midjourney",R.value=e.value.type==="100"&&l.provider_code==="Google",B.value=e.value.type==="100"&&l.provider_code==="OpenAI",e.value.multimodal_quota=l.multimodal_quota,e.value.multimodal_quota.billing_rule=String(e.value.multimodal_quota.billing_rule),e.value.multimodal_quota.text_quota.prompt_price=Number(n(l.multimodal_quota.text_quota.prompt_ratio)),e.value.multimodal_quota.text_quota.completion_price=Number(n(l.multimodal_quota.text_quota.completion_ratio)),e.value.multimodal_quota.text_quota.cached_price=Number(n(l.multimodal_quota.text_quota.cached_ratio)),e.value.multimodal_quota.text_quota.billing_method=String(e.value.multimodal_quota.text_quota.billing_method),e.value.multimodal_quota.vision_quotas){for(let d=0;d<e.value.multimodal_quota.vision_quotas.length;d+=1)if(e.value.multimodal_quota.vision_quotas[d].is_default){e.value.multimodal_quota.vision_quotas[d].is_default="1";break}}else e.value.multimodal_quota.vision_quotas=[];if(e.value.multimodal_quota.search_quotas){for(let d=0;d<e.value.multimodal_quota.search_quotas.length;d+=1)if(e.value.multimodal_quota.search_quotas[d].is_default){e.value.multimodal_quota.search_quotas[d].is_default="1";break}}else e.value.multimodal_quota.search_quotas=[]}l.realtime_quota&&(I.value=e.value.type==="101"&&l.provider_code!=="Midjourney",e.value.realtime_quota=l.realtime_quota,e.value.realtime_quota.text_quota.prompt_price=Number(n(l.realtime_quota.text_quota.prompt_ratio)),e.value.realtime_quota.text_quota.completion_price=Number(n(l.realtime_quota.text_quota.completion_ratio)),e.value.realtime_quota.text_quota.cached_price=Number(n(l.realtime_quota.text_quota.cached_ratio)),e.value.realtime_quota.audio_quota.prompt_price=Number(n(l.realtime_quota.audio_quota.prompt_ratio)),e.value.realtime_quota.audio_quota.completion_price=Number(n(l.realtime_quota.audio_quota.completion_ratio)),e.value.realtime_quota.audio_quota.cached_price=Number(n(l.realtime_quota.audio_quota.cached_ratio)),e.value.realtime_quota.audio_quota.completion_price=Number(n(l.realtime_quota.audio_quota.completion_ratio)),e.value.realtime_quota.text_quota.billing_method=String(e.value.realtime_quota.text_quota.billing_method),e.value.realtime_quota.audio_quota.billing_method=String(e.value.realtime_quota.audio_quota.billing_method)),l.multimodal_audio_quota&&(D.value=e.value.type==="102"&&l.provider_code!=="Midjourney",e.value.multimodal_audio_quota=l.multimodal_audio_quota,e.value.multimodal_audio_quota.text_quota.prompt_price=Number(n(l.multimodal_audio_quota.text_quota.prompt_ratio)),e.value.multimodal_audio_quota.text_quota.completion_price=Number(n(l.multimodal_audio_quota.text_quota.completion_ratio)),e.value.multimodal_audio_quota.text_quota.cached_price=Number(n(l.multimodal_audio_quota.text_quota.cached_ratio)),e.value.multimodal_audio_quota.audio_quota.prompt_price=Number(n(l.multimodal_audio_quota.audio_quota.prompt_ratio)),e.value.multimodal_audio_quota.audio_quota.completion_price=Number(n(l.multimodal_audio_quota.audio_quota.completion_ratio)),e.value.multimodal_audio_quota.audio_quota.cached_price=Number(n(l.multimodal_audio_quota.audio_quota.cached_ratio)),e.value.multimodal_audio_quota.text_quota.billing_method=String(e.value.multimodal_audio_quota.text_quota.billing_method),e.value.multimodal_audio_quota.audio_quota.billing_method=String(e.value.multimodal_audio_quota.audio_quota.billing_method)),l.midjourney_quotas&&(Q.value=e.value.type==="2"&&l.provider_code==="Midjourney",e.value.midjourney_quotas=l.midjourney_quotas),l.forward_config&&(l.forward_config.forward_rule&&(e.value.forward_config.forward_rule=String(l.forward_config.forward_rule)),l.forward_config.match_rule&&(e.value.forward_config.match_rule=l.forward_config.match_rule.map(String)),e.value.forward_config.content_length=(o=l.forward_config)==null?void 0:o.content_length,e.value.forward_config.target_model=(p=l.forward_config)==null?void 0:p.target_model,e.value.forward_config.decision_model=(v=l.forward_config)==null?void 0:v.decision_model,e.value.forward_config.keywords=(w=l.forward_config)==null?void 0:w.keywords,e.value.forward_config.target_models=(A=l.forward_config)==null?void 0:A.target_models),e.value.is_enable_fallback=l.is_enable_fallback,l.fallback_config&&(e.value.fallback_config.model_agent=(c=l.fallback_config)==null?void 0:c.model_agent,e.value.fallback_config.model=(q=l.fallback_config)==null?void 0:q.model)}catch{}finally{h(!1)}})();const ie=()=>{F.value=!1,E.value=!1,I.value=!1,D.value=!1,Q.value=!1,R.value=!1,B.value=!1;const a=S.get(e.value.provider_id);if(a&&a.code==="Midjourney"){Z();return}W()},F=i(!1),E=i(!1),j=i(!1),O=i(!1),I=i(!1),D=i(!1),Q=i(!1),R=i(!1),B=i(!1),W=()=>{if(F.value=!1,E.value=!1,j.value=!1,O.value=!1,I.value=!1,D.value=!1,Q.value=!1,R.value=!1,B.value=!1,e.value.text_quota.billing_method="1",e.value.type==="2"){const a=S.get(e.value.provider_id);if(a&&a.code==="Midjourney"){Z();return}if(F.value=!0,e.value.image_quota.generation_quotas.length===0){const o=["high","high","high","medium","medium","medium","low","low","low","hd","hd","hd","standard","standard","standard"],p=[1024,1024,1536,1024,1024,1536,1024,1024,1536,1024,1024,1792,1024,1024,1792],v=[1024,1536,1024,1024,1536,1024,1024,1536,1024,1024,1792,1024,1024,1792,1024];for(let w=0;w<o.length;w+=1)de(o[w],p[w],v[w])}}else if(e.value.type==="5"||e.value.type==="6")E.value=!0;else if(e.value.type==="100"){const a=S.get(e.value.provider_id);if(j.value=!0,O.value=!0,a&&(a.code==="OpenAI"||a.name==="OpenAI")&&(B.value=!0),e.value.multimodal_quota.vision_quotas.length===0){const o=["auto","high","low"];for(let p=0;p<o.length;p+=1)_e(o[p])}if(a&&(a.code==="Google"||a.name==="Google")&&(R.value=!0),e.value.multimodal_quota.search_quotas.length===0&&a&&(a.code==="OpenAI"||a.name==="OpenAI")){const o=["medium","high","low"];for(let p=0;p<o.length;p+=1)me(o[p])}}else e.value.type==="101"?I.value=!0:e.value.type==="102"&&(D.value=!0)},de=(a,o,p)=>{const v={quality:a,width:o,height:p,fixed_quota:i(),is_default:e.value.image_quota.generation_quotas.length===0?"1":""};e.value.image_quota.generation_quotas.push(v)},_e=a=>{const o={mode:a,fixed_quota:i(),is_default:e.value.multimodal_quota.vision_quotas.length===0?"1":""};e.value.multimodal_quota.vision_quotas.push(o)},me=a=>{const o={search_context_size:a,fixed_quota:i(),is_default:e.value.multimodal_quota.search_quotas.length===0?"1":""};e.value.multimodal_quota.search_quotas.push(o)},Z=()=>{if(F.value=!1,E.value=!1,j.value=!1,O.value=!1,I.value=!1,D.value=!1,Q.value=!0,R.value=!1,B.value=!1,e.value.type="2",e.value.text_quota.billing_method="2",e.value.midjourney_quotas.length===0){const a=["\u7ED8\u56FE","\u653E\u5927","\u53D8\u6362","\u5F3A\u53D8\u6362","\u5F31\u53D8\u6362","\u63CF\u8FF0","\u6DF7\u56FE","\u91CD\u7ED8","\u5C40\u90E8\u91CD\u7ED8","\u53D8\u7126","\u81EA\u5B9A\u4E49\u53D8\u7126","\u5E73\u79FB","\u7F29\u8BCD","\u7A97\u53E3","\u6362\u8138","\u4EFB\u52A1"],o=["IMAGINE","UPSCALE","VARIATION","HIGH_VARIATION","LOW_VARIATION","DESCRIBE","BLEND","REROLL","INPAINT","ZOOM","CUSTOM_ZOOM","PAN","SHORTEN","MODAL","SWAP_FACE","TASK"],p=["/submit/imagine","/submit/change","/submit/change","/submit/action","/submit/action","/submit/describe","/submit/blend","/submit/action","/submit/action","/submit/action","/submit/action","/submit/action","/submit/shorten","/submit/modal","/insight-face/swap","/task/*"];for(let v=0;v<a.length;v+=1)ne(a[v],o[v],p[v])}},ne=(a,o,p)=>{const v={name:a,action:o,path:p,fixed_quota:i()};e.value.midjourney_quotas.push(v)},X=()=>{!e.value.is_enable_forward&&e.value.forward_config.keywords&&(e.value.forward_config.keywords[0]===""||e.value.forward_config.target_models[0]==="")?(e.value.forward_config.keywords=[],e.value.forward_config.target_models=[]):e.value.forward_config.forward_rule==="2"&&(!e.value.forward_config.keywords||e.value.forward_config.keywords.length===0)?(e.value.forward_config.keywords=[""],e.value.forward_config.target_models=[""]):(e.value.forward_config.forward_rule==="1"||e.value.forward_config.forward_rule==="3")&&e.value.forward_config.keywords&&(e.value.forward_config.keywords[0]===""||e.value.forward_config.target_models[0]==="")&&(e.value.forward_config.keywords=[],e.value.forward_config.target_models=[])},se=()=>{e.value.forward_config.keywords.push(""),e.value.forward_config.target_models.push("")},pe=a=>{e.value.forward_config.keywords.length>1&&(e.value.forward_config.keywords.splice(a,1),e.value.forward_config.target_models.splice(a,1))};return(a,o)=>{const p=he,v=xe,w=Me,A=Ae,c=Ue,q=Ne,l=Se,d=Ce,Y=Fe,U=Ee,L=Ie,M=De,G=Re,ee=Be,ce=Le,P=je,fe=Oe,ve=Qe,ge=Pe,qe=Te;return _(),y("div",la,[u(w,{class:"container-breadcrumb"},{default:r(()=>[u(v,null,{default:r(()=>[u(p)]),_:1}),u(v,null,{default:r(()=>[m(g(a.$t("menu.model")),1)]),_:1}),u(v,null,{default:r(()=>[m(g(a.$t("menu.model.update")),1)]),_:1})]),_:1}),u(qe,{loading:$e(le),style:{width:"100%"}},{default:r(()=>[u(ge,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[ae("div",oa,[u(ve,{ref_key:"formRef",ref:K,model:e.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:r(()=>[u(A,{orientation:"left"},{default:r(()=>[m(g(a.$t("common.title.baseInfo")),1)]),_:1}),u(l,{field:"provider_id",label:a.$t("model.label.provider"),rules:[{required:!0,message:a.$t("model.error.provider.required")}]},{default:r(()=>[u(q,{modelValue:e.value.provider_id,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.provider_id=t),placeholder:a.$t("model.placeholder.provider"),scrollbar:!1,"allow-search":"",style:{width:"762px"},onChange:ie},{default:r(()=>[(_(!0),y(V,null,$(N.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),u(l,{field:"name",label:a.$t("model.label.name"),rules:[{required:!0,message:a.$t("model.error.name.required")}]},{default:r(()=>[u(d,{modelValue:e.value.name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.name=t),placeholder:a.$t("model.placeholder.name"),class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),u(l,{field:"model",label:a.$t("model.label.model"),rules:[{required:!0,message:a.$t("model.error.model.required")}]},{default:r(()=>[u(d,{modelValue:e.value.model,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.model=t),placeholder:a.$t("model.placeholder.model"),class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),u(l,{field:"type",label:a.$t("model.label.type"),rules:[{required:!0,message:a.$t("model.error.type.required")}]},{default:r(()=>[u(q,{modelValue:e.value.type,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.type=t),placeholder:a.$t("model.placeholder.type"),scrollbar:!1,"allow-search":"",style:{width:"762px"},onChange:W},{default:r(()=>[u(c,{value:"1"},{default:r(()=>[m(g(a.$t("dict.model_type.1")),1)]),_:1}),u(c,{value:"2"},{default:r(()=>[m(g(a.$t("dict.model_type.2")),1)]),_:1}),u(c,{value:"3"},{default:r(()=>[m(g(a.$t("dict.model_type.3")),1)]),_:1}),u(c,{value:"4"},{default:r(()=>[m(g(a.$t("dict.model_type.4")),1)]),_:1}),u(c,{value:"5"},{default:r(()=>[m(g(a.$t("dict.model_type.5")),1)]),_:1}),u(c,{value:"6"},{default:r(()=>[m(g(a.$t("dict.model_type.6")),1)]),_:1}),u(c,{value:"100"},{default:r(()=>[m(g(a.$t("dict.model_type.100")),1)]),_:1}),u(c,{value:"101"},{default:r(()=>[m(g(a.$t("dict.model_type.101")),1)]),_:1}),u(c,{value:"102"},{default:r(()=>[m(g(a.$t("dict.model_type.102")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),u(l,{field:"base_url",label:a.$t("model.label.base_url")},{default:r(()=>[u(d,{modelValue:e.value.base_url,"onUpdate:modelValue":o[4]||(o[4]=t=>e.value.base_url=t),placeholder:a.$t("model.placeholder.base_url"),class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(l,{field:"path",label:a.$t("model.label.path")},{default:r(()=>[u(d,{modelValue:e.value.path,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.path=t),placeholder:a.$t("model.placeholder.path"),class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(l,{field:"remark",label:a.$t("model.label.remark")},{default:r(()=>[u(Y,{modelValue:e.value.remark,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.remark=t),placeholder:a.$t("model.placeholder.remark"),class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(A,{orientation:"left"},{default:r(()=>[m(g(a.$t("common.title.advanced")),1)]),_:1}),u(aa,{ref_key:"pricingRef",ref:J,modelValue:e.value.pricing,"onUpdate:modelValue":o[7]||(o[7]=t=>e.value.pricing=t)},null,8,["modelValue"]),u(l,{field:"request_data_format",label:a.$t("model.label.request_data_format"),rules:[{required:!0,message:a.$t("model.error.request_data_format.required")}]},{default:r(()=>[u(L,{size:"large"},{default:r(()=>[u(U,{modelValue:e.value.request_data_format,"onUpdate:modelValue":o[8]||(o[8]=t=>e.value.request_data_format=t),value:"1","default-checked":!0},{default:r(()=>[m(" \u7EDF\u4E00\u683C\u5F0F ")]),_:1},8,["modelValue"]),u(U,{modelValue:e.value.request_data_format,"onUpdate:modelValue":o[9]||(o[9]=t=>e.value.request_data_format=t),value:"2"},{default:r(()=>[m(" \u5B98\u65B9\u683C\u5F0F ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),u(l,{field:"response_data_format",label:a.$t("model.label.response_data_format"),rules:[{required:!0,message:a.$t("model.error.response_data_format.required")}]},{default:r(()=>[u(L,{size:"large"},{default:r(()=>[u(U,{modelValue:e.value.response_data_format,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.response_data_format=t),value:"1","default-checked":!0},{default:r(()=>[m(" \u7EDF\u4E00\u683C\u5F0F ")]),_:1},8,["modelValue"]),u(U,{modelValue:e.value.response_data_format,"onUpdate:modelValue":o[11]||(o[11]=t=>e.value.response_data_format=t),value:"2"},{default:r(()=>[m(" \u5B98\u65B9\u683C\u5F0F ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),u(l,{field:"is_public",label:a.$t("model.label.isPublic"),rules:[{required:!0}]},{default:r(()=>[u(M,{modelValue:e.value.is_public,"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.is_public=t)},null,8,["modelValue"])]),_:1},8,["label"]),u(l,{field:"groups",label:a.$t("model.label.groups")},{default:r(()=>[u(q,{modelValue:e.value.groups,"onUpdate:modelValue":o[13]||(o[13]=t=>e.value.groups=t),placeholder:a.$t("model.placeholder.groups"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(H.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),u(l,{field:"is_enable_preset_config",label:a.$t("model.label.is_enable_preset_config")},{default:r(()=>[u(M,{modelValue:e.value.is_enable_preset_config,"onUpdate:modelValue":o[14]||(o[14]=t=>e.value.is_enable_preset_config=t)},null,8,["modelValue"])]),_:1},8,["label"]),e.value.is_enable_preset_config?(_(),f(l,{key:0,field:"preset_config.is_support_system_role",label:a.$t("model.label.preset_config.is_support_system_role")},{default:r(()=>[u(M,{modelValue:e.value.preset_config.is_support_system_role,"onUpdate:modelValue":o[15]||(o[15]=t=>e.value.preset_config.is_support_system_role=t)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),e.value.is_enable_preset_config&&e.value.preset_config.is_support_system_role?(_(),f(l,{key:1,field:"preset_config.system_role_prompt",label:a.$t("model.label.preset_config.system_role_prompt")},{default:r(()=>[u(Y,{modelValue:e.value.preset_config.system_role_prompt,"onUpdate:modelValue":o[16]||(o[16]=t=>e.value.preset_config.system_role_prompt=t),placeholder:a.$t("model.placeholder.preset_config.system_role_prompt"),"auto-size":{minRows:5,maxRows:10},class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):b("",!0),e.value.is_enable_preset_config?(_(),f(l,{key:2,field:"preset_config.max_tokens",label:a.$t("model.label.preset_config.max_tokens.range")},{default:r(()=>[u(G,{modelValue:e.value.preset_config.min_tokens,"onUpdate:modelValue":o[17]||(o[17]=t=>e.value.preset_config.min_tokens=t),placeholder:a.$t("model.placeholder.preset_config.min_tokens"),style:{width:"378px","margin-right":"5px"},precision:0,min:0,max:2097152},null,8,["modelValue","placeholder"]),u(G,{modelValue:e.value.preset_config.max_tokens,"onUpdate:modelValue":o[18]||(o[18]=t=>e.value.preset_config.max_tokens=t),placeholder:a.$t("model.placeholder.preset_config.max_tokens"),style:{width:"379px"},precision:0,min:0,max:2097152},null,8,["modelValue","placeholder"])]),_:1},8,["field","label"])):b("",!0),e.value.is_enable_preset_config?(_(),f(l,{key:3,field:"preset_config.is_support_stream",label:a.$t("model.label.preset_config.is_support_stream")},{default:r(()=>[u(M,{modelValue:e.value.preset_config.is_support_stream,"onUpdate:modelValue":o[19]||(o[19]=t=>e.value.preset_config.is_support_stream=t)},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),u(l,{field:"is_enable_model_agent",label:a.$t("model.label.isEnableModelAgent")},{default:r(()=>[u(M,{modelValue:e.value.is_enable_model_agent,"onUpdate:modelValue":o[20]||(o[20]=t=>e.value.is_enable_model_agent=t)},null,8,["modelValue"])]),_:1},8,["label"]),e.value.is_enable_model_agent?(_(),f(l,{key:4,field:"lb_strategy",label:a.$t("model.label.lb_strategy"),rules:[{required:!0}]},{default:r(()=>[u(L,{size:"large"},{default:r(()=>[u(U,{modelValue:e.value.lb_strategy,"onUpdate:modelValue":o[21]||(o[21]=t=>e.value.lb_strategy=t),value:"1","default-checked":!0},{default:r(()=>[m(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),u(U,{modelValue:e.value.lb_strategy,"onUpdate:modelValue":o[22]||(o[22]=t=>e.value.lb_strategy=t),value:"2"},{default:r(()=>[m("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])):b("",!0),e.value.is_enable_model_agent?(_(),f(l,{key:5,field:"model_agents",label:a.$t("model.label.modelAgents"),rules:[{required:!0,message:a.$t("model.error.modelAgents.required")}]},{default:r(()=>[u(q,{modelValue:e.value.model_agents,"onUpdate:modelValue":o[23]||(o[23]=t=>e.value.model_agents=t),placeholder:a.$t("model.placeholder.modelAgents"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(T.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),u(l,{field:"model_forward",label:a.$t("model.label.modelForward")},{default:r(()=>[u(M,{modelValue:e.value.is_enable_forward,"onUpdate:modelValue":o[24]||(o[24]=t=>e.value.is_enable_forward=t),onChange:X},null,8,["modelValue"])]),_:1},8,["label"]),e.value.is_enable_forward?(_(),f(l,{key:6,field:"forward_config.forward_rule",label:a.$t("model.label.forwardRule"),rules:[{required:!0,message:a.$t("model.error.forwardRule.required")}]},{default:r(()=>[u(q,{modelValue:e.value.forward_config.forward_rule,"onUpdate:modelValue":o[25]||(o[25]=t=>e.value.forward_config.forward_rule=t),placeholder:a.$t("model.placeholder.forwardRule"),scrollbar:!1,style:{width:"762px"},onChange:X},{default:r(()=>[u(c,{value:"1"},{default:r(()=>[m("\u5168\u90E8\u8F6C\u53D1")]),_:1}),u(c,{value:"2"},{default:r(()=>[m("\u6309\u5173\u952E\u5B57")]),_:1}),u(c,{value:"3"},{default:r(()=>[m("\u5185\u5BB9\u957F\u5EA6")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),e.value.is_enable_forward&&e.value.forward_config.forward_rule==="3"?(_(),f(l,{key:7,field:"forward_config.content_length",label:a.$t("model.label.content_length"),rules:[{required:!0,message:a.$t("model.error.content_length.required")}]},{default:r(()=>[u(G,{modelValue:e.value.forward_config.content_length,"onUpdate:modelValue":o[26]||(o[26]=t=>e.value.forward_config.content_length=t),placeholder:a.$t("model.placeholder.content_length"),precision:0,min:1,max:9999999999999,class:"input"},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),e.value.is_enable_forward&&(e.value.forward_config.forward_rule==="1"||e.value.forward_config.forward_rule==="3")?(_(),f(l,{key:8,field:"forward_config.target_model",label:a.$t("model.label.targetModel"),rules:[{required:!0,message:a.$t("model.error.targetModel.required")}]},{default:r(()=>[u(q,{modelValue:e.value.forward_config.target_model,"onUpdate:modelValue":o[27]||(o[27]=t=>e.value.forward_config.target_model=t),placeholder:a.$t("model.placeholder.targetModel"),scrollbar:!1,"allow-search":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(C.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),e.value.is_enable_forward&&e.value.forward_config.forward_rule==="2"?(_(),f(l,{key:9,field:"forward_config.match_rule",label:a.$t("model.label.matchRule"),rules:[{required:!0,message:a.$t("model.error.matchRule.required")}]},{default:r(()=>[u(L,{size:"large"},{default:r(()=>[u(ee,{modelValue:e.value.forward_config.match_rule,"onUpdate:modelValue":o[28]||(o[28]=t=>e.value.forward_config.match_rule=t),value:"1","default-checked":!0},{default:r(()=>[m("\u667A\u80FD\u5339\u914D")]),_:1},8,["modelValue"]),u(ee,{modelValue:e.value.forward_config.match_rule,"onUpdate:modelValue":o[29]||(o[29]=t=>e.value.forward_config.match_rule=t),value:"2"},{default:r(()=>[m("\u6B63\u5219\u5339\u914D")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"])):b("",!0),e.value.is_enable_forward&&e.value.forward_config.forward_rule==="2"&&e.value.forward_config.match_rule.includes("1")?(_(),f(l,{key:10,field:"forward_config.decision_model",label:a.$t("model.label.decisionModel"),rules:[{required:!0,message:a.$t("model.error.decisionModel.required")}]},{default:r(()=>[u(q,{modelValue:e.value.forward_config.decision_model,"onUpdate:modelValue":o[30]||(o[30]=t=>e.value.forward_config.decision_model=t),placeholder:a.$t("model.placeholder.decisionModel"),scrollbar:!1,"allow-search":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(C.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),(_(!0),y(V,null,$(e.value.forward_config.keywords,(t,k)=>ke((_(),f(l,{key:k,field:`forward_config.keywords[${k}]`&&`forward_config.target_models[${k}]`,label:`${k+1}. `+a.$t("model.label.keywords"),rules:[{required:!0,message:a.$t("model.error.keywordsAndtargetModel.required")}]},{default:r(()=>[u(d,{modelValue:e.value.forward_config.keywords[k],"onUpdate:modelValue":x=>e.value.forward_config.keywords[k]=x,placeholder:a.$t("model.placeholder.keywords"),style:{width:"373px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),u(q,{modelValue:e.value.forward_config.target_models[k],"onUpdate:modelValue":x=>e.value.forward_config.target_models[k]=x,placeholder:a.$t("model.placeholder.targetModel"),scrollbar:!1,style:{width:"300px"},"allow-search":""},{default:r(()=>[(_(!0),y(V,null,$(C.value,x=>(_(),f(c,{key:x.id,value:x.id,label:x.name},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),u(P,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:se},{default:r(()=>[u(ce)]),_:1}),u(P,{type:"secondary",shape:"circle",onClick:x=>pe(k)},{default:r(()=>[u(fe)]),_:2},1032,["onClick"])]),_:2},1032,["field","label","rules"])),[[Ve,e.value.is_enable_forward&&e.value.forward_config.forward_rule==="2"]])),128)),u(l,{field:"is_enable_fallback",label:a.$t("model.label.is_enable_fallback")},{default:r(()=>[u(M,{modelValue:e.value.is_enable_fallback,"onUpdate:modelValue":o[31]||(o[31]=t=>e.value.is_enable_fallback=t)},null,8,["modelValue"])]),_:1},8,["label"]),e.value.is_enable_fallback?(_(),f(l,{key:11,field:"fallback_config.model_agent",label:a.$t("model.label.fallback_model_agent"),rules:[{required:!e.value.fallback_config.model_agent&&!e.value.fallback_config.model||!e.value.fallback_config.model,message:a.$t("model.error.fallback.required")}]},{default:r(()=>[u(q,{modelValue:e.value.fallback_config.model_agent,"onUpdate:modelValue":o[32]||(o[32]=t=>e.value.fallback_config.model_agent=t),placeholder:a.$t("model.placeholder.fallback_model_agent"),scrollbar:!1,"allow-search":"","allow-clear":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(T.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),e.value.is_enable_fallback?(_(),f(l,{key:12,field:"fallback_config.model",label:a.$t("model.label.fallback_model"),rules:[{required:!e.value.fallback_config.model_agent&&!e.value.fallback_config.model||!e.value.fallback_config.model_agent,message:a.$t("model.error.fallback.required")}]},{default:r(()=>[u(q,{modelValue:e.value.fallback_config.model,"onUpdate:modelValue":o[33]||(o[33]=t=>e.value.fallback_config.model=t),placeholder:a.$t("model.placeholder.fallback_model"),scrollbar:!1,"allow-search":"","allow-clear":"",style:{width:"762px"}},{default:r(()=>[(_(!0),y(V,null,$(C.value,t=>(_(),f(c,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):b("",!0),u(L,null,{default:r(()=>[ae("div",ta,[u(P,{type:"secondary",onClick:o[34]||(o[34]=t=>a.$router.push({name:"ModelList"}))},{default:r(()=>[m(g(a.$t("button.cancel")),1)]),_:1}),u(P,{type:"primary",onClick:re},{default:r(()=>[m(g(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Da=we(ra,[["__scopeId","data-v-9ff305ce"]]);export{Da as default};
