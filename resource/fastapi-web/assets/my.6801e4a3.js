import{u as he,G as ye,p as we,y as Ce,i as Ve,z as $e,_ as ke}from"./index.caf84b09.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as T,S as Ie}from"./sortable.esm.5d28075d.js";/* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css              */import{d as xe,r as G,e as p,c as k,w as ze,B as m,C as v,aH as e,aG as a,aL as b,aM as u,aJ as q,aI as B,aD as R,u as g,F as _,D as Se,n as De,aK as Te,aF as qe,bA as Be,bB as Ne,b2 as Le,bC as Fe,b1 as Ue,bD as Pe,bE as Ee,b5 as Ae,bF as Me,ab as Oe,aU as Ge,bi as Re,bj as je,bl as He,bm as Je,b4 as Ke,bG as Qe,bI as We,bJ as Xe}from"./arco.06d431a4.js";import{u as Ye}from"./loading.403a6ba1.js";import{a as Ze}from"./model.d76d5ca7.js";import{p as j,q as et}from"./common.4956e59d.js";import{q as tt}from"./corp.2f4e2793.js";import"./chart.ac3cbee9.js";import"./vue.4e689e11.js";import"./base.87fcf6e2.js";const at={class:"container"},ot={class:"action-icon"},lt={class:"action-icon"},nt={id:"tableSetting"},st={style:{"margin-right":"4px",cursor:"move"}},ct={class:"title"},dt={key:0,class:"circle red"},it={key:1,class:"circle"},rt={name:"ModelList"},mt=xe({...rt,setup(ut){const{loading:H,setLoading:w}=Ye(!0),J=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),N=()=>({corp:"",name:"",model:"",type:p(),status:p(),created_at:[]}),L=p([]);(async()=>{w(!0);try{const{data:t}=await tt();L.value=t.items}catch{}finally{w(!1)}})();const{t:n}=he(),F=p([]),s=p(N()),f=p([]),C=p([]),I=p("medium"),h={current:1,pageSize:10,showTotal:!0,showPageSize:!0,pageSizeOptions:[10,50,100,500,1e3]},V=G({...h}),K=k(()=>[{name:n("searchTable.size.mini"),value:"mini"},{name:n("searchTable.size.small"),value:"small"},{name:n("searchTable.size.medium"),value:"medium"},{name:n("searchTable.size.large"),value:"large"}]),Q=k(()=>[{title:n("model.columns.corp"),dataIndex:"corp_name",slotName:"corp_name",align:"center",width:110},{title:n("model.columns.name"),dataIndex:"name",slotName:"name",align:"center"},{title:n("model.columns.model"),dataIndex:"model",slotName:"model",align:"center"},{title:n("model.columns.type"),dataIndex:"type",slotName:"type",align:"center"},{title:n("model.columns.prompt_price"),dataIndex:"prompt_ratio",slotName:"prompt_ratio",align:"center"},{title:n("model.columns.completion_price"),dataIndex:"completion_ratio",slotName:"completion_ratio",align:"center"},{title:n("model.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:75},{title:n("model.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132}]),W=k(()=>[{label:n("model.dict.type.1"),value:1},{label:n("model.dict.type.2"),value:2},{label:n("model.dict.type.3"),value:3},{label:n("model.dict.type.4"),value:4},{label:n("model.dict.type.100"),value:100}]),X=k(()=>[{label:n("model.dict.status.1"),value:1},{label:n("model.dict.status.2"),value:2}]),$=async(t={...h})=>{w(!0);try{const{data:l}=await Ze(t);F.value=l.items,V.current=t.current,V.pageSize=t.pageSize,V.total=l.paging.total}catch{}finally{w(!1)}},U=()=>{$({...h,...s.value})},Y=t=>{$({...h,...s.value,current:t})},Z=t=>{h.pageSize=t,$({...h,...s.value})};$();const ee=()=>{s.value=N()},te=(t,l)=>{I.value=t},ae=(t,l,c)=>{t?f.value.splice(c,0,l):f.value=C.value.filter(d=>d.dataIndex!==l.dataIndex)},P=(t,l,c,d=!1)=>{const i=d?T(t):t;return l>-1&&c>-1&&i.splice(l,1,i.splice(c,1,i[l]).pop()),i},oe=t=>{t&&De(()=>{const l=document.getElementById("tableSetting");new Ie(l,{onEnd(c){const{oldIndex:d,newIndex:i}=c;P(f.value,d,i),P(C.value,d,i)}})})};return ze(()=>Q.value,t=>{f.value=T(t),f.value.forEach((l,c)=>{l.checked=!0}),C.value=T(f.value)},{deep:!0,immediate:!0}),(t,l)=>{const c=ye,d=Te,i=qe,le=Be,x=Ne,y=Le,r=Fe,E=Ue,ne=Pe,z=Ee,se=Ae,A=Me,ce=Oe,M=Ge,O=we,de=Re,S=je,ie=Ce,re=He,me=Je,ue=Ve,pe=$e,_e=Ke,fe=Qe,ve=We,be=Xe;return m(),v("div",at,[e(i,{class:"container-breadcrumb"},{default:a(()=>[e(d,null,{default:a(()=>[e(c)]),_:1}),e(d,null,{default:a(()=>[b(u(t.$t("menu.my.model")),1)]),_:1})]),_:1}),e(be,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(z,null,{default:a(()=>[e(r,{flex:1},{default:a(()=>[e(se,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(z,{gutter:16},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(y,{field:"corp",label:t.$t("model.form.corp")},{default:a(()=>[e(x,{modelValue:s.value.corp,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.corp=o),placeholder:t.$t("model.form.selectDefault"),"allow-search":"","allow-clear":""},{default:a(()=>[(m(!0),v(q,null,B(L.value,o=>(m(),R(le,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:a(()=>[e(y,{field:"name",label:t.$t("model.form.name")},{default:a(()=>[e(E,{modelValue:s.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.name=o),placeholder:t.$t("model.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:a(()=>[e(y,{field:"model",label:t.$t("model.form.model")},{default:a(()=>[e(E,{modelValue:s.value.model,"onUpdate:modelValue":l[2]||(l[2]=o=>s.value.model=o),placeholder:t.$t("model.form.model.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:a(()=>[e(y,{field:"type",label:t.$t("model.form.type")},{default:a(()=>[e(x,{modelValue:s.value.type,"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.type=o),options:g(W),placeholder:t.$t("model.form.selectDefault"),"allow-search":"","allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:a(()=>[e(y,{field:"status",label:t.$t("model.form.status")},{default:a(()=>[e(x,{modelValue:s.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.status=o),options:g(X),placeholder:t.$t("model.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(r,{span:8},{default:a(()=>[e(y,{field:"created_at",label:t.$t("model.form.created_at")},{default:a(()=>[e(ne,{modelValue:s.value.created_at,"onUpdate:modelValue":l[5]||(l[5]=o=>s.value.created_at=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(A,{style:{height:"84px"},direction:"vertical"}),e(r,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(de,{direction:"vertical",size:18},{default:a(()=>[e(M,{type:"primary",onClick:U},{icon:a(()=>[e(ce)]),default:a(()=>[b(" "+u(t.$t("model.form.search")),1)]),_:1}),e(M,{onClick:ee},{icon:a(()=>[e(O)]),default:a(()=>[b(" "+u(t.$t("model.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{style:{"margin-top":"0"}}),e(z,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(r,{span:24,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(S,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[_("div",{class:"action-icon",onClick:U},[e(O,{size:"18"})])]),_:1},8,["content"]),e(me,{onSelect:te},{content:a(()=>[(m(!0),v(q,null,B(g(K),o=>(m(),R(re,{key:o.value,value:o.value,class:Se({active:o.value===I.value})},{default:a(()=>[_("span",null,u(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(S,{content:t.$t("searchTable.actions.density")},{default:a(()=>[_("div",ot,[e(ie,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(S,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(fe,{trigger:"click",position:"bl",onPopupVisibleChange:oe},{content:a(()=>[_("div",nt,[(m(!0),v(q,null,B(C.value,(o,ge)=>(m(),v("div",{key:o.dataIndex,class:"setting"},[_("div",st,[e(pe)]),_("div",null,[e(_e,{modelValue:o.checked,"onUpdate:modelValue":D=>o.checked=D,onChange:D=>ae(D,o,ge)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_("div",ct,u(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:a(()=>[_("div",lt,[e(ue,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ve,{"row-key":"id",loading:g(H),pagination:V,columns:f.value,data:F.value,bordered:!1,size:I.value,"row-selection":J,onPageChange:Y,onPageSizeChange:Z},{type:a(({record:o})=>[b(u(t.$t(`model.dict.type.${o.type}`)),1)]),prompt_ratio:a(({record:o})=>[b(u(o.text_quota.billing_method===1?`$${g(j)(o.text_quota.prompt_ratio)}/k`:"-"),1)]),completion_ratio:a(({record:o})=>[b(u(o.text_quota.billing_method===1?`$${g(j)(o.text_quota.completion_ratio)}/k`:`$${g(et)(o.text_quota.fixed_quota)}/\u6B21`),1)]),status:a(({record:o})=>[o.status===2?(m(),v("span",dt)):(m(),v("span",it)),b(" "+u(t.$t(`model.dict.status.${o.status}`)),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const At=ke(mt,[["__scopeId","data-v-01ade810"]]);export{At as default};
