import{u as te,_ as Y,i as Ne}from"./index.a97d6a21.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import{d as Z,e as E,B as a,C as q,aH as l,aG as u,aJ as G,aI as P,aD as n,F as se,aE as i,aL as k,aM as w,aT as ne,bN as ie,c3 as de,aU as _e,bJ as ce,bK as pe,bI as ee,bC as le,bD as ue,b1 as me,b2 as ge,aS as fe,b5 as ye,a_ as ve,g as be,bu as re,bv as ae,a5 as we,a4 as Ue,b4 as Oe,bi as Te,aK as He,aF as xe,bb as Le,b6 as Re}from"./arco.a9260898.js";/* empty css               *//* empty css                *//* empty css                */import{u as Fe}from"./loading.1f346a94.js";import{s as Ee,a as he,b as Ce,c as Be}from"./sys_config.227ffdd2.js";/* empty css                *//* empty css               */import"./chart.d103b168.js";import"./vue.ad52ddbe.js";const Ie={class:"list-wrap",style:{"margin-top":"10px"}},ze={class:"card-wrap"},Ge={name:"Global"},Pe=Z({...Ge,setup(oe){const{proxy:f}=be(),{setLoading:g}=Fe(!0),{t:y}=te(),v=E(!1),U=E(""),D=E(),e=E({email:{},http:{},core:{},debug:{}}),H=async o=>{U.value=y(`sys.config.item.title.${o.action}`),e.value.action=o.action,v.value=!0},x=async o=>{f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:`\u662F\u5426\u786E\u5B9A\u91CD\u7F6E${y(`sys.config.item.title.${o.action}`)}?`,hideCancel:!1,onOk:()=>{J(o)}})},R=async o=>{var s;if(await((s=D.value)==null?void 0:s.validate())){v.value=!0,o(!1);return}g(!0);try{await Ee(e.value),o(),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}catch{o(!1)}finally{g(!1)}},M=()=>{v.value=!1},J=async o=>{g(!0);try{await he({action:o.action}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},K=async o=>{g(!0);try{await Ce({action:o.action,open:o.open||!1}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},S=E({}),h=async()=>{const{data:o}=await Be();e.value.email=o.email,e.value.http=o.http,e.value.core=o.core,e.value.debug=o.debug,S.value=[{action:"email",title:y("sys.config.item.title.email"),description:"\u914D\u7F6E\u53D1\u4FE1\u90AE\u7BB1\u4FE1\u606F, \u7528\u4E8E\u6CE8\u518C\u3001\u767B\u5F55\u3001\u53D1\u9001\u6D88\u606F\u7B49\u573A\u666F, \u5F53\u6709\u7AD9\u70B9\u914D\u7F6E\u4E14\u540C\u65F6\u914D\u7F6E\u53D1\u4FE1\u90AE\u7BB1\u4FE1\u606F\u65F6, \u7AD9\u70B9\u914D\u7F6E\u7684\u4F18\u5148",open:e.value.email.open,config:!0,reset:!0},{action:"http",title:y("sys.config.item.title.http"),description:"\u914D\u7F6EHTTP\u8BF7\u6C42\u8D85\u65F6\u65F6\u95F4\u548C\u4EE3\u7406\u5730\u5740",config:!0,reset:!0},{action:"core",title:y("sys.config.item.title.core"),description:"\u7CFB\u7EDF\u9996\u6B21\u4F7F\u7528\u65F6\u53EF\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u4FEE\u6539, \u540E\u671F\u5982\u82E5\u518D\u6B21\u4FEE\u6539\u5BC6\u94A5\u524D\u7F00, \u5386\u53F2\u5E94\u7528\u5BC6\u94A5\u5C06\u65E0\u6CD5\u901A\u8FC7\u6838\u9A8C, \u8BF7\u8C28\u614E\u4FEE\u6539",config:!0,reset:!0},{action:"debug",title:y("sys.config.item.title.debug"),description:"\u8C03\u8BD5\u5F00\u5173\u6253\u5F00\u540E, \u65E5\u5FD7\u4F1A\u6253\u5370\u66F4\u591A\u8BE6\u7EC6\u4FE1\u606F, \u65E5\u5FD7\u7EA7\u522B(logger.level)\u9700\u914D\u7F6E\u4E3A: debug",open:e.value.debug.open}]};return h(),(o,d)=>{const s=ne,m=ie,C=de,N=_e,r=ce,c=pe,O=ee,I=le,j=ue,F=me,B=ge,$=fe,z=ye,Q=ve;return a(),q("div",Ie,[l(j,{class:"list-row",gutter:24},{default:u(()=>[(a(!0),q(G,null,P(S.value,t=>(a(),n(I,{key:t.action,xs:12,sm:12,md:12,lg:6,xl:6,xxl:6,class:"list-col"},{default:u(()=>[se("div",ze,[l(O,{title:t.title,bordered:!1,"header-style":{padding:"16px"},"body-style":{padding:"0px 16px"}},{extra:u(()=>[t.open!==void 0?(a(),n(s,{key:0,modelValue:t.open,"onUpdate:modelValue":V=>t.open=V,onChange:V=>K(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i("",!0)]),actions:u(()=>[t.reset?(a(),n(N,{key:0,onClick:V=>x(t)},{default:u(()=>[k(w(o.$t("button.reset")),1)]),_:2},1032,["onClick"])):i("",!0),t.config?(a(),n(N,{key:1,type:"primary",onClick:V=>H(t)},{default:u(()=>[k(w(o.$t("button.config")),1)]),_:2},1032,["onClick"])):i("",!0)]),skeleton:u(()=>[l(c,{animation:!0},{default:u(()=>[l(r,{widths:["50%","50%","100%","40%"],rows:4}),l(r,{widths:["40%"],rows:1})]),_:1})]),default:u(()=>[l(C,null,{description:u(()=>[k(w(t.description)+" ",1),l(m,{style:{"margin-top":"10px"},data:t.data,layout:"inline-horizontal",column:2},null,8,["data"])]),_:2},1024)]),_:2},1032,["title"])])]),_:2},1024))),128))]),_:1}),l(Q,{visible:v.value,"onUpdate:visible":d[9]||(d[9]=t=>v.value=t),title:o.$t(U.value),onCancel:M,onBeforeOk:R},{default:u(()=>[l(z,{ref_key:"configForm",ref:D,model:e.value,"auto-label-width":""},{default:u(()=>[e.value.action==="email"?(a(),n(B,{key:0,field:"email.host",label:o.$t("sys.config.label.email.host"),rules:[{required:!0,message:o.$t("sys.config.error.email.host.required")}]},{default:u(()=>[l(F,{modelValue:e.value.email.host,"onUpdate:modelValue":d[0]||(d[0]=t=>e.value.email.host=t),placeholder:o.$t("sys.config.placeholder.email.host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="email"?(a(),n(B,{key:1,field:"email.port",label:o.$t("sys.config.label.email.port"),rules:[{required:!0,message:o.$t("sys.config.error.email.port.required")}]},{default:u(()=>[l($,{modelValue:e.value.email.port,"onUpdate:modelValue":d[1]||(d[1]=t=>e.value.email.port=t),placeholder:o.$t("sys.config.placeholder.email.port"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="email"?(a(),n(B,{key:2,field:"email.user_name",label:o.$t("sys.config.label.email.user_name"),rules:[{required:!0,message:o.$t("sys.config.error.email.user_name.required")}]},{default:u(()=>[l(F,{modelValue:e.value.email.user_name,"onUpdate:modelValue":d[2]||(d[2]=t=>e.value.email.user_name=t),placeholder:o.$t("sys.config.placeholder.email.user_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="email"?(a(),n(B,{key:3,field:"email.password",label:o.$t("sys.config.label.email.password"),rules:[{required:!0,message:o.$t("sys.config.error.email.password.required")}]},{default:u(()=>[l(F,{modelValue:e.value.email.password,"onUpdate:modelValue":d[3]||(d[3]=t=>e.value.email.password=t),placeholder:o.$t("sys.config.placeholder.email.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="email"?(a(),n(B,{key:4,field:"email.from_name",label:o.$t("sys.config.label.email.from_name"),rules:[{required:!0,message:o.$t("sys.config.error.email.from_name.required")}]},{default:u(()=>[l(F,{modelValue:e.value.email.from_name,"onUpdate:modelValue":d[4]||(d[4]=t=>e.value.email.from_name=t),placeholder:o.$t("sys.config.placeholder.email.from_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="http"?(a(),n(B,{key:5,field:"http.timeout",label:o.$t("sys.config.label.http.timeout"),rules:[{required:!0,message:o.$t("sys.config.error.http.timeout.required")}]},{default:u(()=>[l($,{modelValue:e.value.http.timeout,"onUpdate:modelValue":d[5]||(d[5]=t=>e.value.http.timeout=t),placeholder:o.$t("sys.config.placeholder.http.timeout"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="http"?(a(),n(B,{key:6,field:"http.proxy_url",label:o.$t("sys.config.label.http.proxy_url")},{default:u(()=>[l(F,{modelValue:e.value.http.proxy_url,"onUpdate:modelValue":d[6]||(d[6]=t=>e.value.http.proxy_url=t),placeholder:o.$t("sys.config.placeholder.http.proxy_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):i("",!0),e.value.action==="core"?(a(),n(B,{key:7,field:"core.secret_key_prefix",label:o.$t("sys.config.label.core.secret_key_prefix")},{default:u(()=>[l(F,{modelValue:e.value.core.secret_key_prefix,"onUpdate:modelValue":d[7]||(d[7]=t=>e.value.core.secret_key_prefix=t),placeholder:o.$t("sys.config.placeholder.core.secret_key_prefix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):i("",!0),e.value.action==="core"?(a(),n(B,{key:8,field:"core.error_prefix",label:o.$t("sys.config.label.core.error_prefix")},{default:u(()=>[l(F,{modelValue:e.value.core.error_prefix,"onUpdate:modelValue":d[8]||(d[8]=t=>e.value.core.error_prefix=t),placeholder:o.$t("sys.config.placeholder.core.error_prefix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):i("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const ke=Y(Pe,[["__scopeId","data-v-4ee626f1"]]),Me={class:"list-wrap",style:{"margin-top":"10px"}},Je={class:"card-wrap"},Ke={name:"General"},je=Z({...Ke,setup(oe){const{proxy:f}=be(),{setLoading:g}=Fe(!0),{t:y}=te(),v=E(!1),U=E(""),D=E(),e=E({user_login_register:{},user_shield_error:{},admin_login:{}}),H=async s=>{s.action==="user_shield_error"&&e.value.user_shield_error.errors.length===0&&o(),U.value=y(`sys.config.item.title.${s.action}`),e.value.action=s.action,v.value=!0},x=async s=>{f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:`\u662F\u5426\u786E\u5B9A\u91CD\u7F6E${y(`sys.config.item.title.${s.action}`)}?`,hideCancel:!1,onOk:()=>{J(s)}})},R=async s=>{var C;if(await((C=D.value)==null?void 0:C.validate())){v.value=!0,s(!1);return}g(!0);try{await Ee(e.value),s(),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}catch{s(!1)}finally{g(!1)}},M=()=>{v.value=!1,e.value.user_shield_error.errors.length>0&&!e.value.user_shield_error.errors[e.value.user_shield_error.errors.length-1]&&d(e.value.user_shield_error.errors.length-1)},J=async s=>{g(!0);try{await he({action:s.action}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},K=async s=>{g(!0);try{await Ce({action:s.action,open:s.open||!1}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},S=E({}),h=async()=>{const{data:s}=await Be();e.value.user_login_register=s.user_login_register,e.value.user_shield_error=s.user_shield_error,e.value.admin_login=s.admin_login,S.value=[{action:"user_login_register",title:y("sys.config.item.title.user_login_register"),description:"\u914D\u7F6E\u767B\u5F55\u9875\u4E0A\u7684\u767B\u5F55\u65B9\u5F0F\u3001\u7528\u6237\u6CE8\u518C\u3001\u627E\u56DE\u5BC6\u7801\u4EE5\u53CA\u4F1A\u8BDD\u8FC7\u671F\u65F6\u957F, \u5BF9\u5E94\u7684\u5F00\u5173\u53EF\u63A7\u5236\u767B\u5F55\u9875\u4E0A\u5BF9\u5E94\u529F\u80FD\u7684\u663E\u793A, \u5173\u95ED\u7528\u6237\u6CE8\u518C\u65F6, \u901A\u8FC7\u90AE\u7BB1\u767B\u5F55\u4E5F\u65E0\u6CD5\u81EA\u52A8\u6CE8\u518C",config:!0,reset:!0},{action:"user_shield_error",title:y("sys.config.item.title.user_shield_error"),description:"\u7528\u6237\u67E5\u770B\u8C03\u7528\u65E5\u5FD7\u9519\u8BEF\u65F6, \u5305\u542B\u6709\u914D\u7F6E\u9519\u8BEF\u5185\u5BB9\u65F6\u5219\u5C4F\u853D\u663E\u793A, \u4E3A\u7A7A\u5219\u5C4F\u853D\u6240\u6709\u9519\u8BEF\u663E\u793A",open:e.value.user_shield_error.open,config:!0,reset:!0},{action:"admin_login",title:y("sys.config.item.title.admin_login"),description:"\u914D\u7F6E\u767B\u5F55\u9875\u4E0A\u7684\u767B\u5F55\u65B9\u5F0F\u3001\u627E\u56DE\u5BC6\u7801\u4EE5\u53CA\u4F1A\u8BDD\u8FC7\u671F\u65F6\u957F, \u5BF9\u5E94\u7684\u5F00\u5173\u53EF\u63A7\u5236\u767B\u5F55\u9875\u4E0A\u5BF9\u5E94\u529F\u80FD\u7684\u663E\u793A",config:!0,reset:!0}]};h();const o=()=>{e.value.user_shield_error.errors.push("")},d=s=>{e.value.user_shield_error.errors.splice(s,1)};return(s,m)=>{const C=ne,N=ie,r=de,c=_e,O=ce,I=pe,j=ee,F=le,B=ue,$=ge,z=fe,Q=me,t=we,V=Ue,L=ye,X=ve;return a(),q("div",Me,[l(B,{class:"list-row",gutter:24},{default:u(()=>[(a(!0),q(G,null,P(S.value,_=>(a(),n(F,{key:_.action,xs:12,sm:12,md:12,lg:6,xl:6,xxl:6,class:"list-col"},{default:u(()=>[se("div",Je,[l(j,{title:_.title,bordered:!1,"header-style":{padding:"16px"},"body-style":{padding:"0px 16px"}},{extra:u(()=>[_.open!==void 0?(a(),n(C,{key:0,modelValue:_.open,"onUpdate:modelValue":A=>_.open=A,onChange:A=>K(_)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i("",!0)]),actions:u(()=>[_.reset?(a(),n(c,{key:0,onClick:A=>x(_)},{default:u(()=>[k(w(s.$t("button.reset")),1)]),_:2},1032,["onClick"])):i("",!0),_.config?(a(),n(c,{key:1,type:"primary",onClick:A=>H(_)},{default:u(()=>[k(w(s.$t("button.config")),1)]),_:2},1032,["onClick"])):i("",!0)]),skeleton:u(()=>[l(I,{animation:!0},{default:u(()=>[l(O,{widths:["50%","50%","100%","40%"],rows:4}),l(O,{widths:["40%"],rows:1})]),_:1})]),default:u(()=>[l(r,null,{description:u(()=>[k(w(_.description)+" ",1),l(N,{style:{"margin-top":"10px"},data:_.data,layout:"inline-horizontal",column:2},null,8,["data"])]),_:2},1024)]),_:2},1032,["title"])])]),_:2},1024))),128))]),_:1}),l(X,{visible:v.value,"onUpdate:visible":m[10]||(m[10]=_=>v.value=_),title:s.$t(U.value),onCancel:M,onBeforeOk:R},{default:u(()=>[l(L,{ref_key:"configForm",ref:D,model:e.value,"auto-label-width":"",style:{"max-height":"300px"}},{default:u(()=>[e.value.action==="user_login_register"?(a(),n($,{key:0,field:"user_login_register.account_login",label:s.$t("sys.config.label.user_login_register.account_login"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.user_login_register.account_login,"onUpdate:modelValue":m[0]||(m[0]=_=>e.value.user_login_register.account_login=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="user_login_register"?(a(),n($,{key:1,field:"user_login_register.email_login",label:s.$t("sys.config.label.user_login_register.email_login"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.user_login_register.email_login,"onUpdate:modelValue":m[1]||(m[1]=_=>e.value.user_login_register.email_login=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="user_login_register"?(a(),n($,{key:2,field:"user_login_register.email_register",label:s.$t("sys.config.label.user_login_register.email_register"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.user_login_register.email_register,"onUpdate:modelValue":m[2]||(m[2]=_=>e.value.user_login_register.email_register=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="user_login_register"?(a(),n($,{key:3,field:"user_login_register.email_retrieve",label:s.$t("sys.config.label.user_login_register.email_retrieve"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.user_login_register.email_retrieve,"onUpdate:modelValue":m[3]||(m[3]=_=>e.value.user_login_register.email_retrieve=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="user_login_register"?(a(),n($,{key:4,field:"user_login_register.session_expire",label:s.$t("sys.config.label.user_login_register.session_expire"),rules:[{required:!0,message:s.$t("sys.config.error.user_login_register.session_expire.required")}]},{default:u(()=>[l(z,{modelValue:e.value.user_login_register.session_expire,"onUpdate:modelValue":m[4]||(m[4]=_=>e.value.user_login_register.session_expire=_),placeholder:s.$t("sys.config.placeholder.user_login_register.session_expire"),min:10,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),(a(!0),q(G,null,P(e.value.user_shield_error.errors,(_,A)=>re((a(),n($,{key:A,field:`user_shield_error.errors[${A}]`,label:`${A+1}. `+s.$t("sys.config.label.user_shield_error.errors"),rules:[{required:!0,message:s.$t("sys.config.error.user_shield_error.errors.required")}],"label-col-style":{padding:"0 16px 2px 0"}},{default:u(()=>[l(Q,{modelValue:e.value.user_shield_error.errors[A],"onUpdate:modelValue":W=>e.value.user_shield_error.errors[A]=W,placeholder:s.$t("sys.config.placeholder.user_shield_error.errors"),"allow-clear":"",style:{width:"75%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:m[5]||(m[5]=W=>o())},{default:u(()=>[l(t)]),_:1}),l(c,{type:"secondary",shape:"circle",onClick:W=>d(A)},{default:u(()=>[l(V)]),_:2},1032,["onClick"])]),_:2},1032,["field","label","rules"])),[[ae,e.value.action==="user_shield_error"]])),128)),e.value.action==="admin_login"?(a(),n($,{key:5,field:"admin_login.account_login",label:s.$t("sys.config.label.admin_login.account_login"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.admin_login.account_login,"onUpdate:modelValue":m[6]||(m[6]=_=>e.value.admin_login.account_login=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="admin_login"?(a(),n($,{key:6,field:"admin_login.email_login",label:s.$t("sys.config.label.admin_login.email_login"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.admin_login.email_login,"onUpdate:modelValue":m[7]||(m[7]=_=>e.value.admin_login.email_login=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="admin_login"?(a(),n($,{key:7,field:"admin_login.email_retrieve",label:s.$t("sys.config.label.admin_login.email_retrieve"),rules:[{required:!0}]},{default:u(()=>[l(C,{modelValue:e.value.admin_login.email_retrieve,"onUpdate:modelValue":m[8]||(m[8]=_=>e.value.admin_login.email_retrieve=_)},null,8,["modelValue"])]),_:1},8,["label"])):i("",!0),e.value.action==="admin_login"?(a(),n($,{key:8,field:"admin_login.session_expire",label:s.$t("sys.config.label.admin_login.session_expire"),rules:[{required:!0,message:s.$t("sys.config.error.admin_login.session_expire.required")}]},{default:u(()=>[l(z,{modelValue:e.value.admin_login.session_expire,"onUpdate:modelValue":m[9]||(m[9]=_=>e.value.admin_login.session_expire=_),placeholder:s.$t("sys.config.placeholder.admin_login.session_expire"),min:10,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const De=Y(je,[["__scopeId","data-v-f1f30271"]]),Qe={class:"list-wrap",style:{"margin-top":"10px"}},We={class:"card-wrap"},Xe={name:"Task"},Ye=Z({...Xe,setup(oe){const{proxy:f}=be(),{setLoading:g}=Fe(!0),{t:y}=te(),v=E(!1),U=E(""),D=E(),e=E({statistics:{}}),H=async o=>{U.value=y(`sys.config.item.title.${o.action}`),e.value.action=o.action,v.value=!0},x=async o=>{f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:`\u662F\u5426\u786E\u5B9A\u91CD\u7F6E${y(`sys.config.item.title.${o.action}`)}?`,hideCancel:!1,onOk:()=>{J(o)}})},R=async o=>{var s;if(await((s=D.value)==null?void 0:s.validate())){v.value=!0,o(!1);return}g(!0);try{await Ee(e.value),o(),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}catch{o(!1)}finally{g(!1)}},M=()=>{v.value=!1},J=async o=>{g(!0);try{await he({action:o.action}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},K=async o=>{g(!0);try{await Ce({action:o.action,open:o.open||!1}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},S=E({}),h=async()=>{const{data:o}=await Be();e.value.statistics=o.statistics,S.value=[{action:"statistics",title:y("sys.config.item.title.statistics"),description:"\u4EEA\u8868\u76D8\u4E0A\u5404\u7C7B\u6570\u636E\u4EE5\u53CA\u8D26\u5355\u660E\u7EC6\u7684\u7EDF\u8BA1\u4EFB\u52A1, \u7EDF\u8BA1\u95F4\u9694\u65F6\u95F4\u5EFA\u8BAE\u63A7\u5236\u572830\u5206\u949F\u4EE5\u5185, \u5355\u6B21\u5FAA\u73AF\u7EDF\u8BA1\u67E5\u8BE2\u6761\u6570\u5EFA\u8BAE\u63A7\u5236\u57281\u4E07\u4EE5\u5185, \u5355\u6B21\u7EDF\u8BA1\u4EFB\u52A1\u8D85\u65F6\u65F6\u95F4\u53EF\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u914D\u7F6E, \u5EFA\u8BAE\u4E0D\u8981\u4F4E\u4E8E10\u5206\u949F",open:e.value.statistics.open,config:!0,reset:!0}]};return h(),(o,d)=>{const s=ne,m=ie,C=de,N=_e,r=ce,c=pe,O=ee,I=le,j=ue,F=me,B=ge,$=fe,z=ye,Q=ve;return a(),q("div",Qe,[l(j,{class:"list-row",gutter:24},{default:u(()=>[(a(!0),q(G,null,P(S.value,t=>(a(),n(I,{key:t.action,xs:12,sm:12,md:12,lg:6,xl:6,xxl:6,class:"list-col"},{default:u(()=>[se("div",We,[l(O,{title:t.title,bordered:!1,"header-style":{padding:"16px"},"body-style":{padding:"0px 16px"}},{extra:u(()=>[t.open!==void 0?(a(),n(s,{key:0,modelValue:t.open,"onUpdate:modelValue":V=>t.open=V,onChange:V=>K(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i("",!0)]),actions:u(()=>[t.reset?(a(),n(N,{key:0,onClick:V=>x(t)},{default:u(()=>[k(w(o.$t("button.reset")),1)]),_:2},1032,["onClick"])):i("",!0),t.config?(a(),n(N,{key:1,type:"primary",onClick:V=>H(t)},{default:u(()=>[k(w(o.$t("button.config")),1)]),_:2},1032,["onClick"])):i("",!0)]),skeleton:u(()=>[l(c,{animation:!0},{default:u(()=>[l(r,{widths:["50%","50%","100%","40%"],rows:4}),l(r,{widths:["40%"],rows:1})]),_:1})]),default:u(()=>[l(C,null,{description:u(()=>[k(w(t.description)+" ",1),l(m,{style:{"margin-top":"10px"},data:t.data,layout:"inline-horizontal",column:2},null,8,["data"])]),_:2},1024)]),_:2},1032,["title"])])]),_:2},1024))),128))]),_:1}),l(Q,{visible:v.value,"onUpdate:visible":d[3]||(d[3]=t=>v.value=t),title:o.$t(U.value),onCancel:M,onBeforeOk:R},{default:u(()=>[l(z,{ref_key:"configForm",ref:D,model:e.value,"auto-label-width":""},{default:u(()=>[e.value.action==="statistics"?(a(),n(B,{key:0,field:"statistics.cron",label:o.$t("sys.config.label.statistics.cron"),rules:[{required:!0,message:o.$t("sys.config.error.statistics.cron.required")}]},{default:u(()=>[l(F,{modelValue:e.value.statistics.cron,"onUpdate:modelValue":d[0]||(d[0]=t=>e.value.statistics.cron=t),placeholder:o.$t("sys.config.placeholder.statistics.cron"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="statistics"?(a(),n(B,{key:1,field:"statistics.limit",label:o.$t("sys.config.label.statistics.limit"),rules:[{required:!0,message:o.$t("sys.config.error.statistics.limit.required")}]},{default:u(()=>[l($,{modelValue:e.value.statistics.limit,"onUpdate:modelValue":d[1]||(d[1]=t=>e.value.statistics.limit=t),placeholder:o.$t("sys.config.placeholder.statistics.limit"),min:10,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="statistics"?(a(),n(B,{key:2,field:"statistics.lock_minutes",label:o.$t("sys.config.label.statistics.lock_minutes"),rules:[{required:!0,message:o.$t("sys.config.error.statistics.lock_minutes.required")}]},{default:u(()=>[l($,{modelValue:e.value.statistics.lock_minutes,"onUpdate:modelValue":d[2]||(d[2]=t=>e.value.statistics.lock_minutes=t),placeholder:o.$t("sys.config.placeholder.statistics.lock_minutes"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0)]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const Ve=Y(Ye,[["__scopeId","data-v-737f5686"]]),Ze={class:"list-wrap",style:{"margin-top":"10px"}},el={class:"card-wrap"},ll={name:"API"},ul=Z({...ll,setup(oe){const{proxy:f}=be(),{setLoading:g}=Fe(!0),{t:y}=te(),v=E(!1),U=E(""),D=E(),e=E({base:{},log:{},auto_disabled_error:{},not_retry_error:{},not_shield_error:{}}),H=async r=>{r.action==="auto_disabled_error"&&e.value.auto_disabled_error.errors.length===0&&o(),r.action==="not_retry_error"&&e.value.not_retry_error.errors.length===0&&s(),r.action==="not_shield_error"&&e.value.not_shield_error.errors.length===0&&C(),U.value=y(`sys.config.item.title.${r.action}`),e.value.action=r.action,v.value=!0},x=async r=>{f.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:`\u662F\u5426\u786E\u5B9A\u91CD\u7F6E${y(`sys.config.item.title.${r.action}`)}?`,hideCancel:!1,onOk:()=>{J(r)}})},R=async r=>{var O;if(await((O=D.value)==null?void 0:O.validate())){v.value=!0,r(!1);return}g(!0);try{await Ee(e.value),r(),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}catch{r(!1)}finally{g(!1)}},M=()=>{v.value=!1,e.value.auto_disabled_error.errors.length>0&&!e.value.auto_disabled_error.errors[e.value.auto_disabled_error.errors.length-1]&&d(e.value.auto_disabled_error.errors.length-1),e.value.not_retry_error.errors.length>0&&!e.value.not_retry_error.errors[e.value.not_retry_error.errors.length-1]&&m(e.value.not_retry_error.errors.length-1),e.value.not_shield_error.errors.length>0&&!e.value.not_shield_error.errors[e.value.not_shield_error.errors.length-1]&&N(e.value.not_shield_error.errors.length-1)},J=async r=>{g(!0);try{await he({action:r.action}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},K=async r=>{g(!0);try{await Ce({action:r.action,open:r.open||!1}),f.$message.success("\u64CD\u4F5C\u6210\u529F"),h()}finally{g(!1)}},S=E({}),h=async()=>{const{data:r}=await Be();e.value.base=r.base,e.value.log=r.log,e.value.auto_disabled_error=r.auto_disabled_error,e.value.not_retry_error=r.not_retry_error,e.value.not_shield_error=r.not_shield_error,S.value=[{action:"base",title:y("sys.config.item.title.base"),description:"\u914D\u7F6E\u9519\u8BEF\u91CD\u8BD5\u6B21\u6570\u548C\u5404\u7C7B\u9519\u8BEF\u7981\u7528\u6B21\u6570\u7B49, \u9519\u8BEF\u91CD\u8BD5\u6B21\u6570N > 0 \u91CD\u8BD5 N \u6B21, N < 0 \u91CD\u8BD5\u6240\u6709key\u4E00\u8F6E, N = 0 \u4E0D\u91CD\u8BD5, \u9519\u8BEF\u6B21\u6570\u6BCF\u59290\u70B9\u4F1A\u81EA\u52A8\u91CD\u7F6E, \u6CE8: \u4EE3\u7406\u5BC6\u94A5\u9519\u8BEF\u65F6, \u4E5F\u4F1A\u8BB0\u5F55\u6A21\u578B\u4EE3\u7406\u9519\u8BEF\u6B21\u6570",config:!0,reset:!0},{action:"log",title:y("sys.config.item.title.log"),description:"\u8C03\u7528\u65E5\u5FD7\u8BB0\u5F55\u5185\u5BB9, \u652F\u6301\u8BB0\u5F55: \u63D0\u95EE\u3001\u56DE\u7B54\u3001\u4E0A\u4E0B\u6587\u3001\u591A\u6A21\u6001\u8BC6\u56FE\u7684BASE64\u56FE\u50CF\u6570\u636E",open:e.value.log.open,config:!0,reset:!0},{action:"auto_disabled_error",title:y("sys.config.item.title.auto_disabled_error"),description:"\u8C03\u7528\u62A5\u9519\u65F6, \u5305\u542B\u6709\u914D\u7F6E\u9519\u8BEF\u5185\u5BB9\u65F6\u5219\u81EA\u52A8\u4F1A\u7981\u7528\u5BC6\u94A5\u6216\u6A21\u578B\u4EE3\u7406\u7B49, \u4E3A\u7A7A\u5219\u4E0D\u4F1A\u81EA\u52A8\u7981\u7528(\u8FBE\u5230\u9519\u8BEF\u6B21\u6570\u4E0A\u9650\u9664\u5916)",open:e.value.auto_disabled_error.open,config:!0,reset:!0},{action:"not_retry_error",title:y("sys.config.item.title.not_retry_error"),description:"\u8C03\u7528\u62A5\u9519\u65F6, \u5305\u542B\u6709\u914D\u7F6E\u9519\u8BEF\u5185\u5BB9\u65F6\u5219\u4E0D\u4F1A\u81EA\u52A8\u91CD\u8BD5, \u4E3A\u7A7A\u5219\u4F1A\u81EA\u52A8\u91CD\u8BD5",open:e.value.not_retry_error.open,config:!0,reset:!0},{action:"not_shield_error",title:y("sys.config.item.title.not_shield_error"),description:"\u8C03\u7528\u62A5\u9519\u65F6, \u5305\u542B\u6709\u914D\u7F6E\u9519\u8BEF\u5185\u5BB9\u65F6\u5219\u4F1A\u5C06\u9519\u8BEF\u5185\u5BB9\u8FD4\u56DE\u7ED9\u8C03\u7528\u65B9, \u4E3A\u7A7A\u5219\u5C4F\u853D\u6240\u6709\u9519\u8BEF",open:e.value.not_shield_error.open,config:!0,reset:!0},{action:"reset_api_error",title:y("sys.config.item.title.reset_api_error"),description:"\u5F53\u9519\u8BEF\u6B21\u6570\u8FBE\u5230\u914D\u7F6E\u4E0A\u9650\u65F6\u53EF\u624B\u52A8\u8FDB\u884C\u91CD\u7F6E, \u91CD\u7F6E\u8FC7\u7A0B\u53EF\u80FD\u4F1A\u9020\u6210\u7CFB\u7EDF\u7684\u77ED\u6682\u4E0D\u53EF\u7528(\u4E00\u822C\u51E0\u79D2\u949F), \u8BF7\u8C28\u614E\u64CD\u4F5C, \u6216\u5C1D\u8BD5\u8C03\u9AD8\u57FA\u7840\u914D\u7F6E\u7684\u9519\u8BEF\u6B21\u6570, \u8C03\u9AD8\u4E0D\u4F1A\u5F71\u54CD\u7CFB\u7EDF\u7684\u6B63\u5E38\u8FD0\u884C",reset:!0}]};h();const o=()=>{e.value.auto_disabled_error.errors.push("")},d=r=>{e.value.auto_disabled_error.errors.splice(r,1)},s=()=>{e.value.not_retry_error.errors.push("")},m=r=>{e.value.not_retry_error.errors.splice(r,1)},C=()=>{e.value.not_shield_error.errors.push("")},N=r=>{e.value.not_shield_error.errors.splice(r,1)};return(r,c)=>{const O=ne,I=ie,j=de,F=_e,B=ce,$=pe,z=ee,Q=le,t=ue,V=fe,L=ge,X=Oe,_=Te,A=me,W=we,$e=Ue,qe=ye,Se=ve;return a(),q("div",Ze,[l(t,{class:"list-row",gutter:24},{default:u(()=>[(a(!0),q(G,null,P(S.value,p=>(a(),n(Q,{key:p.action,xs:12,sm:12,md:12,lg:6,xl:6,xxl:6,class:"list-col"},{default:u(()=>[se("div",el,[l(z,{title:p.title,bordered:!1,"header-style":{padding:"16px"},"body-style":{padding:"0px 16px"}},{extra:u(()=>[p.open!==void 0?(a(),n(O,{key:0,modelValue:p.open,"onUpdate:modelValue":b=>p.open=b,onChange:b=>K(p)},null,8,["modelValue","onUpdate:modelValue","onChange"])):i("",!0)]),actions:u(()=>[p.reset?(a(),n(F,{key:0,onClick:b=>x(p)},{default:u(()=>[k(w(r.$t("button.reset")),1)]),_:2},1032,["onClick"])):i("",!0),p.config?(a(),n(F,{key:1,type:"primary",onClick:b=>H(p)},{default:u(()=>[k(w(r.$t("button.config")),1)]),_:2},1032,["onClick"])):i("",!0)]),skeleton:u(()=>[l($,{animation:!0},{default:u(()=>[l(B,{widths:["50%","50%","100%","40%"],rows:4}),l(B,{widths:["40%"],rows:1})]),_:1})]),default:u(()=>[l(j,null,{description:u(()=>[k(w(p.description)+" ",1),l(I,{style:{"margin-top":"10px"},data:p.data,layout:"inline-horizontal",column:2},null,8,["data"])]),_:2},1024)]),_:2},1032,["title"])])]),_:2},1024))),128))]),_:1}),l(Se,{visible:v.value,"onUpdate:visible":c[11]||(c[11]=p=>v.value=p),title:r.$t(U.value),onCancel:M,onBeforeOk:R},{default:u(()=>[l(qe,{ref_key:"configForm",ref:D,model:e.value,"auto-label-width":"",style:{"max-height":"300px"}},{default:u(()=>[e.value.action==="base"?(a(),n(L,{key:0,field:"base.err_retry",label:r.$t("sys.config.label.base.err_retry"),rules:[{required:!0,message:r.$t("sys.config.error.base.err_retry.required")}]},{default:u(()=>[l(V,{modelValue:e.value.base.err_retry,"onUpdate:modelValue":c[0]||(c[0]=p=>e.value.base.err_retry=p),placeholder:r.$t("sys.config.placeholder.base.err_retry"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="base"?(a(),n(L,{key:1,field:"base.model_key_err_disable",label:r.$t("sys.config.label.base.model_key_err_disable"),rules:[{required:!0,message:r.$t("sys.config.error.base.model_key_err_disable.required")}]},{default:u(()=>[l(V,{modelValue:e.value.base.model_key_err_disable,"onUpdate:modelValue":c[1]||(c[1]=p=>e.value.base.model_key_err_disable=p),placeholder:r.$t("sys.config.placeholder.base.model_key_err_disable"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="base"?(a(),n(L,{key:2,field:"base.model_agent_err_disable",label:r.$t("sys.config.label.base.model_agent_err_disable"),rules:[{required:!0,message:r.$t("sys.config.error.base.model_agent_err_disable.required")}]},{default:u(()=>[l(V,{modelValue:e.value.base.model_agent_err_disable,"onUpdate:modelValue":c[2]||(c[2]=p=>e.value.base.model_agent_err_disable=p),placeholder:r.$t("sys.config.placeholder.base.model_agent_err_disable"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="base"?(a(),n(L,{key:3,field:"base.model_agent_key_err_disable",label:r.$t("sys.config.label.base.model_agent_key_err_disable"),rules:[{required:!0,message:r.$t("sys.config.error.base.model_agent_key_err_disable.required")}]},{default:u(()=>[l(V,{modelValue:e.value.base.model_agent_key_err_disable,"onUpdate:modelValue":c[3]||(c[3]=p=>e.value.base.model_agent_key_err_disable=p),placeholder:r.$t("sys.config.placeholder.base.model_agent_key_err_disable"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):i("",!0),e.value.action==="log"?(a(),n(L,{key:4,field:"log.records",label:r.$t("sys.config.label.log.records")},{default:u(()=>[l(_,{size:"large"},{default:u(()=>[l(X,{modelValue:e.value.log.records,"onUpdate:modelValue":c[4]||(c[4]=p=>e.value.log.records=p),value:"prompt"},{default:u(()=>[k(" \u63D0\u95EE ")]),_:1},8,["modelValue"]),l(X,{modelValue:e.value.log.records,"onUpdate:modelValue":c[5]||(c[5]=p=>e.value.log.records=p),value:"completion"},{default:u(()=>[k(" \u56DE\u7B54 ")]),_:1},8,["modelValue"]),l(X,{modelValue:e.value.log.records,"onUpdate:modelValue":c[6]||(c[6]=p=>e.value.log.records=p),value:"messages"},{default:u(()=>[k(" \u4E0A\u4E0B\u6587 ")]),_:1},8,["modelValue"]),l(X,{modelValue:e.value.log.records,"onUpdate:modelValue":c[7]||(c[7]=p=>e.value.log.records=p),value:"image"},{default:u(()=>[k(" \u8BC6\u56FE\u7684\u56FE\u50CF\u6570\u636E ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"])):i("",!0),(a(!0),q(G,null,P(e.value.auto_disabled_error.errors,(p,b)=>re((a(),n(L,{key:b,field:`auto_disabled_error.errors[${b}]`,label:`${b+1}. `+r.$t("sys.config.label.auto_disabled_error.errors"),rules:[{required:!0,message:r.$t("sys.config.error.auto_disabled_error.errors.required")}],"label-col-style":{padding:"0 16px 2px 0"}},{default:u(()=>[l(A,{modelValue:e.value.auto_disabled_error.errors[b],"onUpdate:modelValue":T=>e.value.auto_disabled_error.errors[b]=T,placeholder:r.$t("sys.config.placeholder.auto_disabled_error.errors"),"allow-clear":"",style:{width:"75%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(F,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:c[8]||(c[8]=T=>o())},{default:u(()=>[l(W)]),_:1}),l(F,{type:"secondary",shape:"circle",onClick:T=>d(b)},{default:u(()=>[l($e)]),_:2},1032,["onClick"])]),_:2},1032,["field","label","rules"])),[[ae,e.value.action==="auto_disabled_error"]])),128)),(a(!0),q(G,null,P(e.value.not_retry_error.errors,(p,b)=>re((a(),n(L,{key:b,field:`not_retry_error.errors[${b}]`,label:`${b+1}. `+r.$t("sys.config.label.not_retry_error.errors"),rules:[{required:!0,message:r.$t("sys.config.error.not_retry_error.errors.required")}],"label-col-style":{padding:"0 16px 2px 0"}},{default:u(()=>[l(A,{modelValue:e.value.not_retry_error.errors[b],"onUpdate:modelValue":T=>e.value.not_retry_error.errors[b]=T,placeholder:r.$t("sys.config.placeholder.not_retry_error.errors"),"allow-clear":"",style:{width:"75%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(F,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:c[9]||(c[9]=T=>s())},{default:u(()=>[l(W)]),_:1}),l(F,{type:"secondary",shape:"circle",onClick:T=>m(b)},{default:u(()=>[l($e)]),_:2},1032,["onClick"])]),_:2},1032,["field","label","rules"])),[[ae,e.value.action==="not_retry_error"]])),128)),(a(!0),q(G,null,P(e.value.not_shield_error.errors,(p,b)=>re((a(),n(L,{key:b,field:`not_shield_error.errors[${b}]`,label:`${b+1}. `+r.$t("sys.config.label.not_shield_error.errors"),rules:[{required:!0,message:r.$t("sys.config.error.not_shield_error.errors.required")}],"label-col-style":{padding:"0 16px 2px 0"}},{default:u(()=>[l(A,{modelValue:e.value.not_shield_error.errors[b],"onUpdate:modelValue":T=>e.value.not_shield_error.errors[b]=T,placeholder:r.$t("sys.config.placeholder.not_shield_error.errors"),"allow-clear":"",style:{width:"75%","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(F,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:c[10]||(c[10]=T=>C())},{default:u(()=>[l(W)]),_:1}),l(F,{type:"secondary",shape:"circle",onClick:T=>N(b)},{default:u(()=>[l($e)]),_:2},1032,["onClick"])]),_:2},1032,["field","label","rules"])),[[ae,e.value.action==="not_shield_error"]])),128))]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const Ae=Y(ul,[["__scopeId","data-v-3b6626bd"]]),ol={class:"container"},rl={name:"SysConfig"},al=Z({...rl,setup(oe){return(f,g)=>{const y=Ne,v=He,U=xe,D=Le,e=Re,H=le,x=ue,R=ee;return a(),q("div",ol,[l(U,{class:"container-breadcrumb"},{default:u(()=>[l(v,null,{default:u(()=>[l(y)]),_:1}),l(v,null,{default:u(()=>[k(w(f.$t("menu.sys")),1)]),_:1}),l(v,null,{default:u(()=>[k(w(f.$t("menu.sys.config")),1)]),_:1})]),_:1}),l(x,{gutter:20,align:"stretch"},{default:u(()=>[l(H,{span:24},{default:u(()=>[l(R,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 14px"}},{default:u(()=>[l(x,{justify:"space-between"},{default:u(()=>[l(H,{span:24},{default:u(()=>[l(e,{"default-active-tab":0,type:"rounded"},{default:u(()=>[l(D,{key:"0",title:f.$t("sys.config.tab.title.all")},{default:u(()=>[l(ke),l(De),l(Ve),l(Ae)]),_:1},8,["title"]),l(D,{key:"1",title:f.$t("sys.config.tab.title.global")},{default:u(()=>[l(ke)]),_:1},8,["title"]),l(D,{key:"2",title:f.$t("sys.config.tab.title.general")},{default:u(()=>[l(De)]),_:1},8,["title"]),l(D,{key:"3",title:f.$t("sys.config.tab.title.task")},{default:u(()=>[l(Ve)]),_:1},8,["title"]),l(D,{key:"4",title:f.$t("sys.config.tab.title.api")},{default:u(()=>[l(Ae)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const El=Y(al,[["__scopeId","data-v-2861651e"]]);export{El as default};
