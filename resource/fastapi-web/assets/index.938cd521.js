import{u as ke,i as Ce,p as we,y as Ve,z as Ie,_ as ze}from"./index.396c28af.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Se,r as G,e as p,c as z,w as De,B as k,C as S,aH as e,aG as a,aL as c,aM as i,u as D,F as _,aJ as J,aI as K,aD as Fe,D as Ne,n as xe,aK as Be,aF as Ee,b1 as Ae,b2 as Ue,bC as Pe,bB as Le,bU as Oe,bD as Re,b5 as Te,bE as qe,ab as He,aU as Me,bi as je,bj as Ge,bl as Je,bm as Ke,b4 as Qe,bF as We,bG as Xe,bH as Ye,bI as Ze,g as et}from"./arco.75032696.js";import{u as tt}from"./loading.96e1cbd7.js";import{s as at,q as ot,a as lt}from"./notice.f07976fc.js";import{c as L,S as nt}from"./sortable.esm.95f7b760.js";import"./chart.f8f3ffb1.js";import"./vue.ebfaaf45.js";const st={class:"container"},it={class:"action-icon"},ct={class:"action-icon"},ut={id:"tableSetting"},rt={style:{"margin-right":"4px",cursor:"move"}},dt={class:"title"},pt={name:"NoticeList"},mt=Se({...pt,setup(_t){const{proxy:C}=et(),Q=G({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),W=async t=>{g(!0);try{await at(t),C.$message.success("\u5220\u9664\u6210\u529F"),$()}catch{}finally{g(!1)}},O=()=>({title:"",content:"",category:p(),remark:"",status:p(),updated_at:[]}),{loading:X,setLoading:g}=tt(!0),{t:n}=ke(),R=p([]),s=p(O()),f=p([]),w=p([]),F=p("medium"),y=p([]),N=p(!0),x=p(),v={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},V=G({...v}),Y=z(()=>[{name:n("size.mini"),value:"mini"},{name:n("size.small"),value:"small"},{name:n("size.medium"),value:"medium"},{name:n("size.large"),value:"large"}]),Z=z(()=>[{title:n("notice.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center"},{title:n("notice.columns.title"),dataIndex:"title",slotName:"title",align:"center",ellipsis:!0,tooltip:!0},{title:n("notice.columns.content"),dataIndex:"content",slotName:"content",align:"center",ellipsis:!0,tooltip:!0},{title:n("notice.columns.category"),dataIndex:"category",slotName:"category",align:"center"},{title:n("notice.columns.scope"),dataIndex:"scope",slotName:"scope",align:"center"},{title:n("notice.columns.priority"),dataIndex:"priority",slotName:"priority",align:"center"},{title:n("notice.columns.remark"),dataIndex:"remark",slotName:"remark",align:"center"},{title:n("notice.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:n("notice.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:132},{title:n("notice.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:130}]),ee=z(()=>[{label:n("notice.dict.status.1"),value:1},{label:n("notice.dict.status.2"),value:2},{label:n("notice.dict.status.3"),value:3},{label:n("notice.dict.status.4"),value:4}]),te=z(()=>[{label:n("notice.dict.category.1"),value:1},{label:n("notice.dict.category.2"),value:2},{label:n("notice.dict.category.3"),value:3}]),I=async(t={...v})=>{g(!0);try{const{data:o}=await ot(t);R.value=o.items,V.current=t.current,V.pageSize=t.pageSize,V.total=o.paging.total}catch{}finally{g(!1),x.value.selectAll(!1)}},$=()=>{I({...v,...s.value})},ae=t=>{I({...v,...s.value,current:t})},oe=t=>{v.pageSize=t,I({...v,...s.value})};I();const le=()=>{s.value=O(),$()},ne=(t,o)=>{F.value=t},se=(t,o,u)=>{t?f.value.splice(u,0,o):f.value=w.value.filter(r=>r.dataIndex!==o.dataIndex)},T=(t,o,u,r=!1)=>{const m=r?L(t):t;return o>-1&&u>-1&&m.splice(o,1,m.splice(u,1,m[o]).pop()),m},ie=t=>{t&&xe(()=>{const o=document.getElementById("tableSetting");new nt(o,{onEnd(u){const{oldIndex:r,newIndex:m}=u;T(f.value,r,m),T(w.value,r,m)}})})};De(()=>Z.value,t=>{f.value=L(t),f.value.forEach((o,u)=>{o.checked=!0}),w.value=L(f.value)},{deep:!0,immediate:!0});const ce=t=>{y.value=t,N.value=!t.length},ue=t=>{if(y.value.length===0)C.$message.info("\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E");else{let o=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${y.value.length}\u6761\u6570\u636E?`;switch(t.action){case"delete":o=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${y.value.length}\u6761\u6570\u636E?`;break}C.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:o,hideCancel:!1,onOk:()=>{g(!0),t.ids=y.value,lt(t).then(u=>{g(!1),C.$message.success("\u64CD\u4F5C\u6210\u529F"),$(),x.value.selectAll(!1)})}})}};return(t,o)=>{const u=Ce,r=Be,m=Ee,B=Ae,b=Ue,d=Pe,q=Le,re=Oe,E=Re,de=Te,H=qe,pe=He,h=Me,M=we,j=je,A=Ge,me=Ve,_e=Je,fe=Ke,ge=Ie,ve=Qe,be=We,he=Xe,ye=Ye,$e=Ze;return k(),S("div",st,[e(m,{class:"container-breadcrumb"},{default:a(()=>[e(r,null,{default:a(()=>[e(u)]),_:1}),e(r,null,{default:a(()=>[c(i(t.$t("menu.sys")),1)]),_:1}),e(r,null,{default:a(()=>[c(i(t.$t("menu.notice")),1)]),_:1})]),_:1}),e($e,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[e(E,null,{default:a(()=>[e(d,{flex:1},{default:a(()=>[e(de,{model:s.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(E,{gutter:16},{default:a(()=>[e(d,{span:8},{default:a(()=>[e(b,{field:"title",label:t.$t("notice.form.title")},{default:a(()=>[e(B,{modelValue:s.value.title,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value.title=l),placeholder:t.$t("notice.form.title.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(b,{field:"content",label:t.$t("notice.form.content")},{default:a(()=>[e(B,{modelValue:s.value.content,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.content=l),placeholder:t.$t("notice.form.content.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(b,{field:"category",label:t.$t("notice.form.category")},{default:a(()=>[e(q,{modelValue:s.value.category,"onUpdate:modelValue":o[2]||(o[2]=l=>s.value.category=l),placeholder:t.$t("notice.form.selectDefault"),options:D(te),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(b,{field:"remark",label:t.$t("notice.form.remark")},{default:a(()=>[e(B,{modelValue:s.value.remark,"onUpdate:modelValue":o[3]||(o[3]=l=>s.value.remark=l),placeholder:t.$t("notice.form.remark.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(b,{field:"status",label:t.$t("notice.form.status")},{default:a(()=>[e(q,{modelValue:s.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>s.value.status=l),placeholder:t.$t("notice.form.selectDefault"),options:D(ee),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),e(d,{span:8},{default:a(()=>[e(b,{field:"updated_at",label:t.$t("notice.form.updated_at")},{default:a(()=>[e(re,{modelValue:s.value.updated_at,"onUpdate:modelValue":o[5]||(o[5]=l=>s.value.updated_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{style:{height:"84px"},direction:"vertical"}),e(d,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(j,{direction:"vertical",size:18},{default:a(()=>[e(h,{type:"primary",onClick:$},{icon:a(()=>[e(pe)]),default:a(()=>[c(" "+i(t.$t("notice.form.search")),1)]),_:1}),e(h,{onClick:le},{icon:a(()=>[e(M)]),default:a(()=>[c(" "+i(t.$t("notice.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{style:{"margin-top":"0","margin-bottom":"16px"}}),e(E,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(d,{span:12},{default:a(()=>[e(j,null,{default:a(()=>[e(h,{type:"primary",onClick:o[6]||(o[6]=l=>t.$router.push({name:"NoticeCreate"}))},{default:a(()=>[c(i(t.$t("notice.operation.create")),1)]),_:1}),e(h,{type:"primary",status:"danger",disabled:N.value,title:N.value?"\u8BF7\u9009\u62E9\u8981\u64CD\u4F5C\u7684\u6570\u636E":"",onClick:o[7]||(o[7]=l=>ue({action:"delete"}))},{default:a(()=>[c(" \u5220\u9664 ")]),_:1},8,["disabled","title"])]),_:1})]),_:1}),e(d,{span:12,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(A,{content:t.$t("actions.refresh")},{default:a(()=>[_("div",{class:"action-icon",onClick:$},[e(M,{size:"18"})])]),_:1},8,["content"]),e(fe,{onSelect:ne},{content:a(()=>[(k(!0),S(J,null,K(D(Y),l=>(k(),Fe(_e,{key:l.value,value:l.value,class:Ne({active:l.value===F.value})},{default:a(()=>[_("span",null,i(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(A,{content:t.$t("actions.density")},{default:a(()=>[_("div",it,[e(me,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(A,{content:t.$t("actions.column_setting")},{default:a(()=>[e(be,{trigger:"click",position:"bl",onPopupVisibleChange:ie},{content:a(()=>[_("div",ut,[(k(!0),S(J,null,K(w.value,(l,U)=>(k(),S("div",{key:l.dataIndex,class:"setting"},[_("div",rt,[e(ge)]),_("div",null,[e(ve,{modelValue:l.checked,"onUpdate:modelValue":P=>l.checked=P,onChange:P=>se(P,l,U)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_("div",dt,i(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:a(()=>[_("div",ct,[e(u,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ye,{ref_key:"tableRef",ref:x,"row-key":"id",loading:D(X),pagination:V,columns:f.value,data:R.value,bordered:!1,size:F.value,"row-selection":Q,onPageChange:ae,onPageSizeChange:oe,onSelectionChange:ce},{category:a(({record:l})=>[c(i(t.$t(`notice.dict.category.${l.category}`)),1)]),scope:a(({record:l})=>[c(i(t.$t(`notice.dict.scope.${l.scope}`)),1)]),remark:a(({record:l})=>[c(i(l.remark||"-"),1)]),status:a(({record:l})=>[c(i(t.$t(`notice.dict.status.${l.status}`)),1)]),operations:a(({record:l})=>[e(h,{type:"text",size:"small",onClick:U=>t.$router.push({name:"NoticeUpdate",query:{id:`${l.id}`}})},{default:a(()=>[c(i(t.$t("notice.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(he,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:U=>W({id:`${l.id}`})},{default:a(()=>[e(h,{type:"text",size:"small"},{default:a(()=>[c(i(t.$t("notice.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Tt=ze(mt,[["__scopeId","data-v-3ca0f54c"]]);export{Tt as default};
