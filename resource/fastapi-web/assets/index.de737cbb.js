import{B as E,_ as N}from"./index.17e75bc6.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as O,e as i,B as n,C as p,aH as a,aG as o,aL as u,aM as m,F as q,aJ as y,aI as b,aD as g,u as T,aK as z,aF as G,bE as H,bA as J,bB as P,b2 as j,bO as Q,aT as W,aU as X,bi as Y,b5 as Z,bI as x,bP as ee,g as ae}from"./arco.86f0f56d.js";import{u as le}from"./loading.0ba7f8b6.js";import{f as oe}from"./vue.e2e8d4fd.js";import{d as te}from"./key.7f5f270c.js";import{q as re}from"./corp.e088b22d.js";import{q as se}from"./model.e997e389.js";import{f as ne}from"./agent.b00ad923.js";import"./chart.dbe284dd.js";import"./base.87fcf6e2.js";const de={class:"container"},ue={class:"wrapper"},me={class:"submit-btn"},ie={name:"KeyCreate"},pe=O({...ie,setup(ce){const{loading:B,setLoading:s}=le(!1),{proxy:A}=ae(),M=oe(),v=i([]);(async()=>{s(!0);try{const{data:e}=await re();v.value=e.items}catch{}finally{s(!1)}})();const k=i([]);(async()=>{s(!0);try{const{data:e}=await se();k.value=e.items}catch{}finally{s(!1)}})();const $=i([]);(async()=>{s(!0);try{const{data:e}=await ne();$.value=e.items}catch{}finally{s(!1)}})();const V=i(),r=i({corp:"",key:"",remark:"",models:[],model_agents:[],is_agents_only:!1}),F=async()=>{var t;if(!await((t=V.value)==null?void 0:t.validate())){s(!0);try{await te(r.value).then(()=>{A.$message.success("\u65B0\u5EFA\u6210\u529F"),M.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(e,t)=>{const h=E,c=z,I=G,w=H,f=J,_=P,d=j,L=Q,U=W,C=X,S=Y,K=Z,R=x,D=ee;return n(),p("div",de,[a(I,{class:"container-breadcrumb"},{default:o(()=>[a(c,null,{default:o(()=>[a(h)]),_:1}),a(c,null,{default:o(()=>[u(m(e.$t("menu.key")),1)]),_:1}),a(c,null,{default:o(()=>[u(m(e.$t("menu.key.create")),1)]),_:1})]),_:1}),a(D,{loading:T(B),style:{width:"100%"}},{default:o(()=>[a(R,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:o(()=>[q("div",ue,[a(K,{ref_key:"formRef",ref:V,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:o(()=>[a(w,{orientation:"left"},{default:o(()=>[u(m(e.$t("model.title.baseInfo")),1)]),_:1}),a(d,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:o(()=>[a(_,{modelValue:r.value.corp,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value.corp=l),placeholder:e.$t("key.placeholder.corp"),"allow-search":""},{default:o(()=>[(n(!0),p(y,null,b(v.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(d,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:o(()=>[a(L,{modelValue:r.value.key,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value.key=l),placeholder:e.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(d,{field:"remark",label:e.$t("key.label.remark"),rules:[{required:!1}]},{default:o(()=>[a(L,{modelValue:r.value.remark,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value.remark=l),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(w,{orientation:"left"},{default:o(()=>[u(m(e.$t("model.title.advanced")),1)]),_:1}),a(d,{field:"models",label:e.$t("key.label.models"),rules:[{required:!1}]},{default:o(()=>[a(_,{modelValue:r.value.models,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value.models=l),placeholder:e.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:o(()=>[(n(!0),p(y,null,b(k.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:o(()=>[a(_,{modelValue:r.value.model_agents,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value.model_agents=l),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:o(()=>[(n(!0),p(y,null,b($.value,l=>(n(),g(f,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:o(()=>[a(U,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":t[5]||(t[5]=l=>r.value.is_agents_only=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(S,null,{default:o(()=>[q("div",me,[a(C,{type:"secondary",onClick:t[6]||(t[6]=l=>e.$router.push({name:"ModelKeyList"}))},{default:o(()=>[u(m(e.$t("button.cancel")),1)]),_:1}),a(C,{type:"primary",onClick:F},{default:o(()=>[u(m(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ne=N(pe,[["__scopeId","data-v-fcbc0baf"]]);export{Ne as default};
