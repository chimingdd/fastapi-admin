import{u as he,t as ye,m as ke,v as $e,I as we,w as Ce,_ as Ve}from"./index.10556afc.js";import{u as Ie}from"./loading.e3b9231d.js";/* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as B,S as ze}from"./sortable.esm.e23cfe8e.js";/* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css              */import{d as De,r as R,e as p,c as T,w as Se,B as _,C as b,aH as e,aG as t,aL as c,aM as d,aJ as A,aI as L,aD as j,u as F,F as g,D as Me,n as Be,aK as Te,aF as Ae,b2 as Le,b3 as Fe,bB as Ne,bC as Ue,bD as Pe,bE as qe,bF as xe,b6 as Ee,bG as Ke,ab as Oe,aV as He,bj as Re,a5 as je,bk as Ge,bm as Je,bn as Qe,b5 as We,bH as Xe,bI as Ye,bJ as Ze,bK as ea}from"./arco.a6f3e581.js";import{s as aa,q as ta}from"./agent.72501bf9.js";import{q as la}from"./model.ea01b618.js";import"./chart.5d3761cb.js";import"./vue.7b8f6a6a.js";const oa={class:"container"},na={class:"action-icon"},sa={class:"action-icon"},da={id:"tableSetting"},ia={style:{"margin-right":"4px",cursor:"move"}},ua={class:"title"},ca={key:0,class:"circle red"},ra={key:1,class:"circle"},ma={name:"ModelAgentList"},pa=De({...ma,setup(_a){const G=R({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),N=p([]);(async()=>{try{const{data:a}=await la();N.value=a.items}catch{}})();const J=async a=>{k(!0);try{await aa(a),w()}catch{}finally{k(!1)}},U=()=>({app_id:p(),name:"",models:[],key:"",type:p(),status:p(),created_at:[]}),{loading:Q,setLoading:k}=Ie(!0),{t:s}=he(),P=p([]),n=p(U()),f=p([]),$=p([]),C=p("medium"),V={current:1,pageSize:10,showTotal:!0},I=R({...V}),W=T(()=>[{name:s("searchTable.size.mini"),value:"mini"},{name:s("searchTable.size.small"),value:"small"},{name:s("searchTable.size.medium"),value:"medium"},{name:s("searchTable.size.large"),value:"large"}]),X=T(()=>[{title:s("model.agent.columns.name"),dataIndex:"name",slotName:"name",align:"center"},{title:s("model.agent.columns.baseUrl"),dataIndex:"base_url",slotName:"base_url",align:"center"},{title:s("model.agent.columns.models"),dataIndex:"model_names",slotName:"model_names",align:"center"},{title:s("model.agent.columns.weight"),dataIndex:"weight",slotName:"weight",align:"center"},{title:s("model.agent.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:80},{title:s("model.agent.columns.updated_at"),dataIndex:"updated_at",slotName:"updated_at",align:"center",width:170},{title:s("model.agent.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:250}]),Y=T(()=>[{label:s("model.agent.dict.status.1"),value:1},{label:s("model.agent.dict.status.2"),value:2}]),w=async(a={current:1,pageSize:10})=>{k(!0);try{const{data:o}=await ta(a);P.value=o.items,I.current=a.current,I.total=o.paging.total}catch{}finally{k(!1)}},q=()=>{w({...V,...n.value})},Z=a=>{w({...V,...n.value,current:a})};w();const ee=()=>{n.value=U()},ae=(a,o)=>{C.value=a},te=(a,o,r)=>{a?f.value.splice(r,0,o):f.value=$.value.filter(i=>i.dataIndex!==o.dataIndex)},x=(a,o,r,i=!1)=>{const m=i?B(a):a;return o>-1&&r>-1&&m.splice(o,1,m.splice(r,1,m[o]).pop()),m},le=a=>{a&&Be(()=>{const o=document.getElementById("tableSetting");new ze(o,{onEnd(r){const{oldIndex:i,newIndex:m}=r;x(f.value,i,m),x($.value,i,m)}})})};return Se(()=>X.value,a=>{f.value=B(a),f.value.forEach((o,r)=>{o.checked=!0}),$.value=B(f.value)},{deep:!0,immediate:!0}),(a,o)=>{const r=ye,i=Te,m=Ae,z=Le,h=Fe,u=Ne,oe=Ue,E=Pe,ne=qe,D=xe,se=Ee,K=Ke,de=Oe,v=He,O=ke,H=Re,ie=je,S=Ge,ue=$e,ce=Je,re=Qe,me=we,pe=Ce,_e=We,ge=Xe,fe=Ye,ve=Ze,be=ea;return _(),b("div",oa,[e(m,{class:"container-breadcrumb"},{default:t(()=>[e(i,null,{default:t(()=>[e(r)]),_:1}),e(i,null,{default:t(()=>[c(d(a.$t("menu.agent")),1)]),_:1}),e(i,null,{default:t(()=>[c(d(a.$t("menu.model.agent.list")),1)]),_:1})]),_:1}),e(be,{class:"general-card",title:a.$t("menu.model.agent.list"),bordered:!1},{default:t(()=>[e(D,null,{default:t(()=>[e(u,{flex:1},{default:t(()=>[e(se,{model:n.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:t(()=>[e(D,{gutter:16},{default:t(()=>[e(u,{span:8},{default:t(()=>[e(h,{field:"app_id",label:a.$t("model.agent.form.appId")},{default:t(()=>[e(z,{modelValue:n.value.app_id,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value.app_id=l),placeholder:a.$t("model.agent.form.appId.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(h,{field:"name",label:a.$t("model.agent.form.name")},{default:t(()=>[e(z,{modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value.name=l),placeholder:a.$t("model.agent.form.name.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(h,{field:"models",label:a.$t("model.agent.form.models")},{default:t(()=>[e(E,{modelValue:n.value.models,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.models=l),placeholder:a.$t("model.agent.form.selectDefault"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(_(!0),b(A,null,L(N.value,l=>(_(),j(oe,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(h,{field:"key",label:a.$t("model.agent.form.key")},{default:t(()=>[e(z,{modelValue:n.value.key,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.key=l),placeholder:a.$t("model.agent.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(h,{field:"status",label:a.$t("model.agent.form.status")},{default:t(()=>[e(E,{modelValue:n.value.status,"onUpdate:modelValue":o[4]||(o[4]=l=>n.value.status=l),options:F(Y),placeholder:a.$t("model.agent.form.selectDefault"),"allow-clear":""},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(h,{field:"created_at",label:a.$t("model.agent.form.created_at")},{default:t(()=>[e(ne,{modelValue:n.value.created_at,"onUpdate:modelValue":o[5]||(o[5]=l=>n.value.created_at=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(K,{style:{height:"84px"},direction:"vertical"}),e(u,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(H,{direction:"vertical",size:18},{default:t(()=>[e(v,{type:"primary",onClick:q},{icon:t(()=>[e(de)]),default:t(()=>[c(" "+d(a.$t("model.agent.form.search")),1)]),_:1}),e(v,{onClick:ee},{icon:t(()=>[e(O)]),default:t(()=>[c(" "+d(a.$t("model.agent.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{style:{"margin-top":"0"}}),e(D,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(H,null,{default:t(()=>[e(v,{type:"primary",onClick:o[6]||(o[6]=l=>a.$router.push({name:"ModelAgentCreate"}))},{icon:t(()=>[e(ie)]),default:t(()=>[c(" "+d(a.$t("model.agent.operation.create")),1)]),_:1})]),_:1})]),_:1}),e(u,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:t(()=>[e(S,{content:a.$t("searchTable.actions.refresh")},{default:t(()=>[g("div",{class:"action-icon",onClick:q},[e(O,{size:"18"})])]),_:1},8,["content"]),e(re,{onSelect:ae},{content:t(()=>[(_(!0),b(A,null,L(F(W),l=>(_(),j(ce,{key:l.value,value:l.value,class:Me({active:l.value===C.value})},{default:t(()=>[g("span",null,d(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:t(()=>[e(S,{content:a.$t("searchTable.actions.density")},{default:t(()=>[g("div",na,[e(ue,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(S,{content:a.$t("searchTable.actions.columnSetting")},{default:t(()=>[e(ge,{trigger:"click",position:"bl",onPopupVisibleChange:le},{content:t(()=>[g("div",da,[(_(!0),b(A,null,L($.value,(l,y)=>(_(),b("div",{key:l.dataIndex,class:"setting"},[g("div",ia,[e(pe)]),g("div",null,[e(_e,{modelValue:l.checked,"onUpdate:modelValue":M=>l.checked=M,onChange:M=>te(M,l,y)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),g("div",ua,d(l.title==="#"?"\u5E8F\u5217\u53F7":l.title),1)]))),128))])]),default:t(()=>[g("div",sa,[e(me,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(ve,{"row-key":"id",loading:F(Q),pagination:I,columns:f.value,data:P.value,bordered:!1,size:C.value,"row-selection":G,onPageChange:Z},{status:t(({record:l})=>[l.status===2?(_(),b("span",ca)):(_(),b("span",ra)),c(" "+d(a.$t(`app.dict.status.${l.status}`)),1)]),operations:t(({record:l})=>[e(v,{type:"text",size:"small",onClick:y=>a.$router.push({name:"ModelAgentDetail",query:{id:`${l.id}`}})},{default:t(()=>[c(d(a.$t("model.agent.columns.operations.view")),1)]),_:2},1032,["onClick"]),e(v,{type:"text",size:"small",onClick:y=>a.$router.push({name:"ModelAgentUpdate",query:{id:`${l.id}`}})},{default:t(()=>[c(d(a.$t("model.agent.columns.operations.update")),1)]),_:2},1032,["onClick"]),e(v,{type:"text",size:"small",onClick:y=>a.$router.push({name:"KeyModelList",query:{agent_id:`${l.id}`}})},{default:t(()=>[c(d(a.$t("model.agent.columns.operations.manageKey")),1)]),_:2},1032,["onClick"]),e(fe,{content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:y=>J({id:`${l.id}`})},{default:t(()=>[e(v,{type:"text",size:"small"},{default:t(()=>[c(d(a.$t("model.agent.columns.operations.delete")),1)]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1},8,["title"])])}}});const Ua=Ve(pa,[["__scopeId","data-v-6c7fa049"]]);export{Ua as default};
