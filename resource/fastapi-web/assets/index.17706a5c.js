import{A as G,_ as J}from"./index.e2c5c60d.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                */import{d as K,e as b,B as c,C as w,aH as e,aG as t,aL as i,aM as m,F as q,aJ as P,aI as H,aD as v,aE as $,u as r,bP as n,aK as O,aF as W,bF as X,b1 as Y,b2 as Z,bK as ee,bA as ae,bB as le,aT as te,aS as oe,bQ as ue,bR as se,bS as ie,aU as re,bi as de,b5 as pe,bJ as ne,bL as me,g as _e}from"./arco.06d431a4.js";import{u as ce}from"./loading.403a6ba1.js";import{h as fe,f as be}from"./vue.4e689e11.js";import{e as ve,f as ye}from"./app.115f2ee5.js";import{q as qe}from"./model.447985fd.js";import"./chart.ac3cbee9.js";import"./base.87fcf6e2.js";const $e={class:"container"},he={class:"wrapper"},ke={class:"submit-btn"},Ve={name:"AppUpdate"},ge=K({...Ve,setup(we){const{loading:B,setLoading:_}=ce(!1),{proxy:C}=_e(),F=fe(),L=be(),h=b([]);(async()=>{_(!0);try{const{data:l}=await qe();h.value=l.items}catch{}finally{_(!1)}})();const k=b(),a=b({id:"",name:"",remark:"",status:1,models:[],is_limit_quota:!1,quota:b(),quota_expires_at:"",ip_whitelist:"",ip_blacklist:""}),R=async()=>{var o;if(!await((o=k.value)==null?void 0:o.validate())){_(!0);try{await ve(a.value).then(()=>{C.$message.success("\u66F4\u65B0\u6210\u529F"),L.push({name:"AppList"})})}catch{}finally{_(!1)}}};(async(l={id:F.query.id})=>{var o,f;_(!0);try{const{data:s}=await ye(l);a.value.id=s.id,a.value.name=s.name,a.value.remark=s.remark,a.value.status=s.status,a.value.models=s.models,a.value.is_limit_quota=s.is_limit_quota,a.value.quota=s.quota,a.value.quota_expires_at=s.quota_expires_at,a.value.ip_whitelist=((o=s==null?void 0:s.ip_whitelist)==null?void 0:o.join(`
`))||"",a.value.ip_blacklist=((f=s==null?void 0:s.ip_blacklist)==null?void 0:f.join(`
`))||""}catch{}finally{_(!1)}})();const U=l=>{a.value.quota=l*5e5};return(l,o)=>{const f=G,s=O,A=W,V=X,I=Y,d=Z,y=ee,D=ae,S=le,N=te,M=oe,p=ue,Q=se,j=ie,g=re,x=de,T=pe,z=ne,E=me;return c(),w("div",$e,[e(A,{class:"container-breadcrumb"},{default:t(()=>[e(s,null,{default:t(()=>[e(f)]),_:1}),e(s,null,{default:t(()=>[i(m(l.$t("menu.app")),1)]),_:1}),e(s,null,{default:t(()=>[i(m(l.$t("menu.app.update")),1)]),_:1})]),_:1}),e(E,{loading:r(B),style:{width:"100%"}},{default:t(()=>[e(z,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[q("div",he,[e(T,{ref_key:"formRef",ref:k,model:a.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:t(()=>[e(V,{orientation:"left"},{default:t(()=>[i(m(l.$t("model.title.baseInfo")),1)]),_:1}),e(d,{field:"name",label:l.$t("app.label.name"),rules:[{required:!0,message:l.$t("app.error.name.required")},{match:/^.{1,100}$/,message:l.$t("app.error.name.pattern")}]},{default:t(()=>[e(I,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=u=>a.value.name=u),placeholder:l.$t("app.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(d,{field:"remark",label:l.$t("app.label.remark"),rules:[{required:!1}]},{default:t(()=>[e(y,{modelValue:a.value.remark,"onUpdate:modelValue":o[1]||(o[1]=u=>a.value.remark=u),placeholder:l.$t("app.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(V,{orientation:"left"},{default:t(()=>[i(m(l.$t("model.title.advanced")),1)]),_:1}),e(d,{field:"models",label:l.$t("app.label.models")},{default:t(()=>[e(S,{modelValue:a.value.models,"onUpdate:modelValue":o[2]||(o[2]=u=>a.value.models=u),placeholder:l.$t("app.placeholder.models"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(c(!0),w(P,null,H(h.value,u=>(c(),v(D,{key:u.id,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{field:"is_limit_quota",label:l.$t("app.label.isLimitQuota")},{default:t(()=>[e(N,{modelValue:a.value.is_limit_quota,"onUpdate:modelValue":o[3]||(o[3]=u=>a.value.is_limit_quota=u)},null,8,["modelValue"])]),_:1},8,["label"]),a.value.is_limit_quota?(c(),v(d,{key:0,field:"quota",label:l.$t("app.label.quota"),rules:[{required:!0,message:l.$t("app.error.quota.required")}]},{default:t(()=>[e(M,{modelValue:a.value.quota,"onUpdate:modelValue":o[4]||(o[4]=u=>a.value.quota=u),placeholder:l.$t("app.placeholder.quota"),precision:0,min:0,max:9999999999999,style:{"margin-right":"10px"}},null,8,["modelValue","placeholder"]),q("div",null," $"+m(a.value.quota?parseFloat((a.value.quota/5e5).toFixed(6)):"0"),1)]),_:1},8,["label","rules"])):$("",!0),a.value.is_limit_quota?(c(),v(d,{key:1},{default:t(()=>[e(Q,{type:"button",onChange:U},{default:t(()=>[e(p,{value:1},{default:t(()=>[i(" $1 ")]),_:1}),e(p,{value:5},{default:t(()=>[i(" $5 ")]),_:1}),e(p,{value:10},{default:t(()=>[i(" $10 ")]),_:1}),e(p,{value:20},{default:t(()=>[i(" $20 ")]),_:1}),e(p,{value:50},{default:t(()=>[i(" $50 ")]),_:1}),e(p,{value:100},{default:t(()=>[i(" $100 ")]),_:1}),e(p,{value:200},{default:t(()=>[i(" $200 ")]),_:1}),e(p,{value:500},{default:t(()=>[i(" $500 ")]),_:1}),e(p,{value:1e3},{default:t(()=>[i(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1})):$("",!0),a.value.is_limit_quota?(c(),v(d,{key:2,field:"quota_expires_at",label:l.$t("app.label.quota_expires_at")},{default:t(()=>[e(j,{modelValue:a.value.quota_expires_at,"onUpdate:modelValue":o[5]||(o[5]=u=>a.value.quota_expires_at=u),placeholder:l.$t("app.placeholder.quota_expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":u=>r(n)(u).isBefore(r(n)()),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>r(n)().add(1,"day")},{label:"7",value:()=>r(n)().add(7,"day")},{label:"15",value:()=>r(n)().add(15,"day")},{label:"30",value:()=>r(n)().add(30,"day")},{label:"90",value:()=>r(n)().add(90,"day")},{label:"180",value:()=>r(n)().add(180,"day")},{label:"365",value:()=>r(n)().add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"])):$("",!0),e(d,{field:"ip_whitelist",label:l.$t("app.label.ip_whitelist")},{default:t(()=>[e(y,{modelValue:a.value.ip_whitelist,"onUpdate:modelValue":o[6]||(o[6]=u=>a.value.ip_whitelist=u),placeholder:l.$t("app.placeholder.ip_whitelist"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(d,{field:"ip_blacklist",label:l.$t("app.label.ip_blacklist")},{default:t(()=>[e(y,{modelValue:a.value.ip_blacklist,"onUpdate:modelValue":o[7]||(o[7]=u=>a.value.ip_blacklist=u),placeholder:l.$t("app.placeholder.ip_blacklist"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(x,null,{default:t(()=>[q("div",ke,[e(g,{type:"secondary",onClick:o[8]||(o[8]=u=>l.$router.push({name:"AppList"}))},{default:t(()=>[i(m(l.$t("model.button.cancel")),1)]),_:1}),e(g,{type:"primary",onClick:R},{default:t(()=>[i(m(l.$t("model.button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Oe=J(ge,[["__scopeId","data-v-05c70306"]]);export{Oe as default};
