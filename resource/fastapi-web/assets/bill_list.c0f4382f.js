import{u as fe,E as ge,p as be,y as he,i as ve,z as ye,_ as ke}from"./index.20263c1a.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as z,S as we}from"./sortable.esm.f8f875e8.js";/* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css              */import{d as xe,r as P,e as _,c as E,w as Ce,bT as Ie,B as p,C as y,aH as e,aG as a,aL as k,aM as f,bu as L,aD as R,F as d,aJ as U,aI as q,u as S,D as ze,n as Se,aK as Ve,aF as De,aS as Te,b2 as $e,bC as Be,bD as Fe,bE as Ne,b5 as Pe,bF as Ee,ab as Le,aU as Re,bi as Ue,bj as qe,bl as Ae,bm as Me,b4 as je,bG as Ge,bI as He,bJ as Je}from"./arco.17b1a46f.js";import{u as Ke}from"./loading.44762de3.js";import{q as Oe}from"./common.ac936b7b.js";import{q as We}from"./finance.4236d6d2.js";import"./chart.d5ce7f1f.js";import"./vue.32c094a4.js";const Qe={class:"container"},Xe={class:"action-icon"},Ye={class:"action-icon"},Ze={id:"tableSetting"},et={style:{"margin-right":"4px",cursor:"move"}},tt={class:"title"},at={name:"BillList"},nt=xe({...at,setup(ot){const A=P({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),M=()=>({user_id:_(),stat_date:[]}),{loading:j,setLoading:V}=Ke(!0),{t:s}=fe(),D=_([]),r=_(M()),u=_([]),b=_([]),w=_("medium"),G=_(),m={current:1,pageSize:10,showTotal:!0,showPageSize:!0,pageSizeOptions:[10,50,100,500,1e3]},h=P({...m}),H=E(()=>[{name:s("searchTable.size.mini"),value:"mini"},{name:s("searchTable.size.small"),value:"small"},{name:s("searchTable.size.medium"),value:"medium"},{name:s("searchTable.size.large"),value:"large"}]),J=E(()=>[{title:s("finance.columns.user_id"),dataIndex:"user_id",slotName:"user_id",align:"center"},{title:s("finance.columns.total"),dataIndex:"total",slotName:"total",align:"center"},{title:s("finance.columns.models"),dataIndex:"models",slotName:"models",align:"center"},{title:s("finance.columns.tokens"),dataIndex:"tokens",slotName:"tokens",align:"center"},{title:s("finance.columns.stat_date"),dataIndex:"stat_date",slotName:"stat_date",align:"center"}]),v=async(t={...m})=>{V(!0);try{const{data:n}=await We(t);D.value=n.items,h.current=t.current,h.pageSize=t.pageSize,h.total=n.paging.total}catch{}finally{V(!1)}},T=()=>{v({...m,...r.value})},K=t=>{v({...m,...r.value,current:t})},O=t=>{m.pageSize=t,v({...m,...r.value})};v();const W=(t,n)=>{w.value=t},Q=(t,n,c)=>{t?u.value.splice(c,0,n):u.value=b.value.filter(l=>l.dataIndex!==n.dataIndex)},$=(t,n,c,l=!1)=>{const i=l?z(t):t;return n>-1&&c>-1&&i.splice(n,1,i.splice(c,1,i[n]).pop()),i},X=t=>{t&&Se(()=>{const n=document.getElementById("tableSetting");new we(n,{onEnd(c){const{oldIndex:l,newIndex:i}=c;$(u.value,l,i),$(b.value,l,i)}})})};return Ce(()=>J.value,t=>{u.value=z(t),u.value.forEach((n,c)=>{n.checked=!0}),b.value=z(u.value)},{deep:!0,immediate:!0}),(t,n)=>{const c=ge,l=Ve,i=De,Y=Te,B=$e,g=Be,Z=Fe,x=Ne,ee=Pe,F=Ee,te=Le,ae=Re,ne=Ue,oe=be,C=qe,le=he,se=Ae,ce=Me,ie=ve,re=ye,de=je,ue=Ge,_e=He,me=Je,N=Ie("permission");return p(),y("div",Qe,[e(i,{class:"container-breadcrumb"},{default:a(()=>[e(l,null,{default:a(()=>[e(c)]),_:1}),e(l,null,{default:a(()=>[k(f(t.$t("menu.finance")),1)]),_:1}),e(l,null,{default:a(()=>[k(f(t.$t("menu.deal_record.list")),1)]),_:1})]),_:1}),e(me,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:a(()=>[L((p(),R(x,null,{default:a(()=>[e(g,{flex:1},{default:a(()=>[e(ee,{model:r.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(x,{gutter:16},{default:a(()=>[e(g,{span:8},{default:a(()=>[e(B,{field:"name",label:t.$t("finance.form.user_id")},{default:a(()=>[e(Y,{modelValue:r.value.user_id,"onUpdate:modelValue":n[0]||(n[0]=o=>r.value.user_id=o),placeholder:t.$t("finance.form.user_id.placeholder"),min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(g,{span:8},{default:a(()=>[e(B,{field:"stat_date",label:t.$t("finance.form.stat_date")},{default:a(()=>[e(Z,{modelValue:r.value.stat_date,"onUpdate:modelValue":n[1]||(n[1]=o=>r.value.stat_date=o),style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{style:{height:"42px"},direction:"vertical"}),e(g,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(ne,{direction:"vertical",size:18},{default:a(()=>[e(ae,{type:"primary",onClick:T},{icon:a(()=>[e(te)]),default:a(()=>[k(" "+f(t.$t("finance.form.search")),1)]),_:1})]),_:1})]),_:1})]),_:1})),[[N,["admin"]]]),L(e(F,{style:{"margin-top":"0","margin-bottom":"16px"}},null,512),[[N,["admin"]]]),e(x,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(g,{span:24,style:{display:"flex",height:"32px","align-items":"center","justify-content":"end"}},{default:a(()=>[e(C,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[d("div",{class:"action-icon",onClick:T},[e(oe,{size:"18"})])]),_:1},8,["content"]),e(ce,{onSelect:W},{content:a(()=>[(p(!0),y(U,null,q(S(H),o=>(p(),R(se,{key:o.value,value:o.value,class:ze({active:o.value===w.value})},{default:a(()=>[d("span",null,f(o.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(C,{content:t.$t("searchTable.actions.density")},{default:a(()=>[d("div",Xe,[e(le,{size:"18"})])]),_:1},8,["content"])]),_:1}),e(C,{content:t.$t("searchTable.actions.columnSetting")},{default:a(()=>[e(ue,{trigger:"click",position:"bl",onPopupVisibleChange:X},{content:a(()=>[d("div",Ze,[(p(!0),y(U,null,q(b.value,(o,pe)=>(p(),y("div",{key:o.dataIndex,class:"setting"},[d("div",et,[e(re)]),d("div",null,[e(de,{modelValue:o.checked,"onUpdate:modelValue":I=>o.checked=I,onChange:I=>Q(I,o,pe)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),d("div",tt,f(o.title==="#"?"\u5E8F\u5217\u53F7":o.title),1)]))),128))])]),default:a(()=>[d("div",Ye,[e(ie,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),e(_e,{ref_key:"tableRef",ref:G,"row-key":"id",loading:S(j),pagination:h,columns:u.value,data:D.value,bordered:!1,size:w.value,"row-selection":A,onPageChange:K,onPageSizeChange:O},{tokens:a(({record:o})=>[k(f(o.tokens>0?`$${S(Oe)(o.tokens)}`:"$0.00"),1)]),_:1},8,["loading","pagination","columns","data","size","row-selection"])]),_:1})])}}});const Dt=ke(nt,[["__scopeId","data-v-d90f7c70"]]);export{Dt as default};
