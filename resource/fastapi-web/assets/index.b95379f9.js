import{_ as F,C as P}from"./index.10556afc.js";import{u as C}from"./loading.e3b9231d.js";/* empty css                */import{d as S,e as h,B as g,aD as $,aG as l,aH as e,aL as n,aM as v,bC as A,bD as R,b3 as D,b2 as j,bL as G,aV as I,b6 as B,C as M,aJ as H,aI as J,aE as L,aT as Z,bZ as Q,bj as E,aU as W,bA as X,F as Y,bt as x,u as ee,aK as le,aF as ae,bM as te,bN as oe,bK as re,bO as ue}from"./arco.a6f3e581.js";import{c as N,d as de}from"./model.ea01b618.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as T}from"./vue.7b8f6a6a.js";/* empty css               *//* empty css                */import{d as ne}from"./agent.72501bf9.js";/* empty css               */import"./chart.5d3761cb.js";const se=S({__name:"base-info",emits:["changeStep"],setup(y,{emit:c}){const{setLoading:i}=C(!0),m=T(),p=h(),d=h({id:"",corp:"",name:"",model:"",type:"",remark:"",status:1});(async(u={id:m.query.id})=>{i(!0);try{const{data:o}=await N(u);d.value.id=o.id,d.value.corp=o.corp,d.value.name=o.name,d.value.model=o.model,d.value.type=String(o.type),d.value.remark=o.remark,d.value.status=o.status}catch{}finally{i(!1)}})();const a=async()=>{var o;await((o=p.value)==null?void 0:o.validate())||c("changeStep","forward",{...d.value})};return(u,o)=>{const f=A,r=R,t=D,k=j,b=G,q=I,w=B;return g(),$(w,{ref_key:"formRef",ref:p,model:d.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:l(()=>[e(t,{field:"corp",label:u.$t("model.label.corp"),rules:[{required:!0,message:u.$t("model.error.corp.required")}]},{default:l(()=>[e(r,{modelValue:d.value.corp,"onUpdate:modelValue":o[0]||(o[0]=_=>d.value.corp=_),placeholder:u.$t("model.placeholder.corp")},{default:l(()=>[e(f,{value:"OpenAI"},{default:l(()=>[n("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"name",label:u.$t("model.label.name"),rules:[{required:!0,message:u.$t("model.error.name.required")}]},{default:l(()=>[e(k,{modelValue:d.value.name,"onUpdate:modelValue":o[1]||(o[1]=_=>d.value.name=_),placeholder:u.$t("model.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"model",label:u.$t("model.label.model"),rules:[{required:!0,message:u.$t("model.error.model.required")},{message:u.$t("model.error.model.pattern")}]},{default:l(()=>[e(k,{modelValue:d.value.model,"onUpdate:modelValue":o[2]||(o[2]=_=>d.value.model=_),placeholder:u.$t("model.placeholder.model")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"type",label:u.$t("model.label.type"),rules:[{required:!0,message:u.$t("model.error.type.required")}]},{default:l(()=>[e(r,{modelValue:d.value.type,"onUpdate:modelValue":o[3]||(o[3]=_=>d.value.type=_),placeholder:u.$t("model.placeholder.type")},{default:l(()=>[e(f,{value:"1"},{default:l(()=>[n("\u6587\u751F\u6587")]),_:1}),e(f,{value:"2"},{default:l(()=>[n("\u6587\u751F\u56FE")]),_:1}),e(f,{value:"3"},{default:l(()=>[n("\u56FE\u751F\u6587")]),_:1}),e(f,{value:"4"},{default:l(()=>[n("\u56FE\u751F\u56FE")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"remark",label:u.$t("model.label.remark"),rules:[{required:!1}]},{default:l(()=>[e(b,{modelValue:d.value.remark,"onUpdate:modelValue":o[4]||(o[4]=_=>d.value.remark=_),placeholder:u.$t("model.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(t,null,{default:l(()=>[e(q,{type:"primary",onClick:a},{default:l(()=>[n(v(u.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const me=F(se,[["__scopeId","data-v-661b7c35"]]),ie=S({__name:"advanced",emits:["changeStep"],setup(y,{emit:c}){const{setLoading:i}=C(!0),m=T(),p=h([]);(async()=>{i(!0);try{const{data:r}=await ne();p.value=r.items}catch{}finally{i(!1)}})();const V=h(),a=h({prompt_ratio:1,completion_ratio:1,data_format:"",is_enable_model_agent:!1,model_agents:[],is_public:!0});(async(r={id:m.query.id})=>{i(!0);try{const{data:t}=await N(r);a.value.prompt_ratio=t.prompt_ratio,a.value.completion_ratio=t.completion_ratio,a.value.data_format=String(t.data_format),a.value.is_enable_model_agent=t.is_enable_model_agent,a.value.model_agents=t.model_agents,a.value.is_public=t.is_public}catch{}finally{i(!1)}})();const o=async()=>{var t;await((t=V.value)==null?void 0:t.validate())||c("changeStep","submit",{...a.value})},f=()=>{c("changeStep","backward")};return(r,t)=>{const k=Z,b=D,q=Q,w=E,_=W,O=A,K=R,U=I,z=B;return g(),$(z,{ref_key:"formRef",ref:V,model:a.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:l(()=>[e(b,{field:"prompt_ratio",label:r.$t("model.label.promptRatio"),rules:[{required:!0,message:r.$t("model.error.promptRatio.required")}]},{default:l(()=>[e(k,{modelValue:a.value.prompt_ratio,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.prompt_ratio=s),min:1,placeholder:r.$t("model.placeholder.promptRatio")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"completion_ratio",label:r.$t("model.label.completionRatio"),rules:[{required:!0,message:r.$t("model.error.completionRatio.required")}]},{default:l(()=>[e(k,{modelValue:a.value.completion_ratio,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.completion_ratio=s),min:1,placeholder:r.$t("model.placeholder.completionRatio")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"data_format",label:r.$t("model.label.dataFormat"),rules:[{required:!0,message:r.$t("model.error.dataFormat.required")}]},{default:l(()=>[e(w,{size:"large"},{default:l(()=>[e(q,{modelValue:a.value.data_format,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.data_format=s),value:"1"},{default:l(()=>[n("\u7EDF\u4E00\u683C\u5F0F")]),_:1},8,["modelValue"]),e(q,{modelValue:a.value.data_format,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.data_format=s),value:"2"},{default:l(()=>[n("\u5B98\u65B9\u683C\u5F0F")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(b,{field:"is_public",label:r.$t("model.label.isPublic"),rules:[{required:!0}]},{default:l(()=>[e(_,{modelValue:a.value.is_public,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.is_public=s)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,{field:"is_enable_model_agent",label:r.$t("model.label.isEnableModelAgent")},{default:l(()=>[e(_,{modelValue:a.value.is_enable_model_agent,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.is_enable_model_agent=s)},null,8,["modelValue"])]),_:1},8,["label"]),a.value.is_enable_model_agent?(g(),$(b,{key:0,field:"model_agents",label:r.$t("model.label.modelAgents"),rules:[{required:!0,message:r.$t("model.error.modelAgents.required")}]},{default:l(()=>[e(K,{modelValue:a.value.model_agents,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.model_agents=s),placeholder:r.$t("model.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:l(()=>[(g(!0),M(H,null,J(p.value,s=>(g(),$(O,{key:s.id,value:s.id,label:s.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):L("",!0),e(b,null,{default:l(()=>[e(w,null,{default:l(()=>[e(U,{type:"secondary",onClick:f},{default:l(()=>[n(v(r.$t("model.button.prev")),1)]),_:1}),e(U,{type:"primary",onClick:o},{default:l(()=>[n(v(r.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const pe=F(ie,[["__scopeId","data-v-7cfc8fc4"]]);const _e={},ce={class:"success-wrap"};function fe(y,c){const i=X,m=I,p=E;return g(),M("div",ce,[e(i,{status:"success",title:y.$t("model.success.title"),subtitle:y.$t("model.success.update.subTitle")},null,8,["title","subtitle"]),e(p,{size:16},{default:l(()=>[e(m,{key:"finish",type:"secondary",onClick:c[0]||(c[0]=d=>y.$router.push({name:"ModelList"}))},{default:l(()=>[n(v(y.$t("model.button.return")),1)]),_:1}),e(m,{key:"again",type:"primary",onClick:c[1]||(c[1]=d=>y.$router.push({name:"ModelDetail",query:{id:`${y.$route.query.id}`}}))},{default:l(()=>[n(v(y.$t("model.button.view")),1)]),_:1})]),_:1})])}const be=F(_e,[["render",fe],["__scopeId","data-v-829f16db"]]),ve={class:"container"},ge={class:"wrapper"},ye={name:"ModelUpdate"},$e=S({...ye,setup(y){const{loading:c,setLoading:i}=C(!1),m=h(1),p=h({}),d=async()=>{i(!0);try{await de(p.value),m.value=3,p.value={}}catch{}finally{i(!1)}},V=(a,u)=>{if(typeof a=="number"){m.value=a;return}if(a==="forward"||a==="submit"){if(p.value={...p.value,...u},a==="submit"){d();return}m.value+=1}else a==="backward"&&(m.value-=1)};return(a,u)=>{const o=P,f=le,r=ae,t=te,k=oe,b=re,q=ue;return g(),M("div",ve,[e(r,{class:"container-breadcrumb"},{default:l(()=>[e(f,null,{default:l(()=>[e(o)]),_:1}),e(f,null,{default:l(()=>[n(v(a.$t("menu.model")),1)]),_:1}),e(f,null,{default:l(()=>[n(v(a.$t("menu.model.update")),1)]),_:1})]),_:1}),e(q,{loading:ee(c),style:{width:"100%"}},{default:l(()=>[e(b,{class:"general-card",bordered:!1},{title:l(()=>[n(v(a.$t("model.title.update")),1)]),default:l(()=>[Y("div",ge,[e(k,{current:m.value,"onUpdate:current":u[0]||(u[0]=w=>m.value=w),style:{width:"580px"},"line-less":"",class:"steps"},{default:l(()=>[e(t,{description:a.$t("model.subTitle.baseInfo")},{default:l(()=>[n(v(a.$t("model.title.baseInfo")),1)]),_:1},8,["description"]),e(t,{description:a.$t("model.subTitle.advanced")},{default:l(()=>[n(v(a.$t("model.title.advanced")),1)]),_:1},8,["description"]),e(t,{description:a.$t("model.subTitle.update.finish")},{default:l(()=>[n(v(a.$t("model.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(g(),$(x,null,[m.value===1?(g(),$(me,{key:0,onChangeStep:V})):m.value===2?(g(),$(pe,{key:1,onChangeStep:V})):m.value===3?(g(),$(be,{key:2,onChangeStep:V})):L("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ne=F($e,[["__scopeId","data-v-b875f6d8"]]);export{Ne as default};
