import{_ as C,A as T}from"./index.b0965d26.js";import{u as I}from"./loading.c1e55f23.js";/* empty css                */import{d as q,e as $,B as f,aD as k,aG as a,aH as e,aL as p,aM as _,bC as L,bD as B,b3 as N,b2 as O,bK as E,aV as K,b6 as U,C as D,aJ as j,aI as z,bj as A,bA as G,F as H,bt as J,aE as P,u as Q,aK as W,aF as X,bM as Y,bN as Z,bL as x,bO as ee}from"./arco.1898f1ea.js";import{b as F,c as ae}from"./key.7d127f48.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as M}from"./vue.88a8ef0b.js";/* empty css               */import{q as te}from"./model.675de286.js";/* empty css               */import"./chart.0ff1b134.js";const oe=q({__name:"base-info",emits:["changeStep"],setup(m,{emit:i}){const{setLoading:d}=I(!1),r=M(),c=$(),s=$({id:"",corp:"",key:"",remark:""});(async(l={id:r.query.id})=>{d(!0);try{const{data:o}=await F(l);s.value.id=o.id,s.value.corp=o.corp,s.value.key=o.key,s.value.remark=o.remark}catch{}finally{d(!1)}})();const t=async()=>{var o;await((o=c.value)==null?void 0:o.validate())||i("changeStep","forward",{...s.value})};return(l,o)=>{const b=L,u=B,n=N,w=O,S=E,g=K,h=U;return f(),k(h,{ref_key:"formRef",ref:c,model:s.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e(n,{field:"corp",label:l.$t("key.label.corp"),rules:[{required:!0,message:l.$t("key.error.corp.required")}]},{default:a(()=>[e(u,{modelValue:s.value.corp,"onUpdate:modelValue":o[0]||(o[0]=v=>s.value.corp=v),placeholder:l.$t("key.placeholder.corp")},{default:a(()=>[e(b,{value:"OpenAI"},{default:a(()=>[p("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"key",label:l.$t("key.label.key"),rules:[{required:!0,message:l.$t("key.error.key.required")}]},{default:a(()=>[e(w,{modelValue:s.value.key,"onUpdate:modelValue":o[1]||(o[1]=v=>s.value.key=v),placeholder:l.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"remark",label:l.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(S,{modelValue:s.value.remark,"onUpdate:modelValue":o[2]||(o[2]=v=>s.value.remark=v),placeholder:l.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(n,null,{default:a(()=>[e(g,{type:"primary",onClick:t},{default:a(()=>[p(_(l.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const le=C(oe,[["__scopeId","data-v-38b7c44b"]]),se=q({__name:"advanced",emits:["changeStep"],setup(m,{emit:i}){const{setLoading:d}=I(!0),r=M(),c=$([]);(async()=>{d(!0);try{const{data:u}=await te();c.value=u.items}catch{}finally{d(!1)}})();const y=$(),t=$({models:[]});(async(u={id:r.query.id})=>{d(!0);try{const{data:n}=await F(u);t.value.models=n.models}catch{}finally{d(!1)}})();const o=async()=>{var n;await((n=y.value)==null?void 0:n.validate())||i("changeStep","submit",{...t.value})},b=()=>{i("changeStep","backward")};return(u,n)=>{const w=L,S=B,g=N,h=K,v=A,R=U;return f(),k(R,{ref_key:"formRef",ref:y,model:t.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e(g,{field:"models",label:u.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(S,{modelValue:t.value.models,"onUpdate:modelValue":n[0]||(n[0]=V=>t.value.models=V),placeholder:u.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(f(!0),D(j,null,z(c.value,V=>(f(),k(w,{key:V.id,value:V.id,label:V.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,null,{default:a(()=>[e(v,null,{default:a(()=>[e(h,{type:"secondary",onClick:b},{default:a(()=>[p(_(u.$t("key.button.prev")),1)]),_:1}),e(h,{type:"primary",onClick:o},{default:a(()=>[p(_(u.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ne=C(se,[["__scopeId","data-v-2654ac66"]]);const re={},ue={class:"success-wrap"};function de(m,i){const d=G,r=K,c=A;return f(),D("div",ue,[e(d,{status:"success",title:m.$t("key.success.title"),subtitle:m.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(c,{size:16},{default:a(()=>[e(r,{key:"finish",type:"secondary",onClick:i[0]||(i[0]=s=>m.$router.push({name:"KeyModelList"}))},{default:a(()=>[p(_(m.$t("key.button.return")),1)]),_:1}),e(r,{key:"again",type:"primary",onClick:i[1]||(i[1]=s=>m.$router.push({name:"KeyDetail",query:{id:`${m.$route.query.id}`}}))},{default:a(()=>[p(_(m.$t("key.button.view")),1)]),_:1})]),_:1})])}const ce=C(re,[["render",de],["__scopeId","data-v-016ee704"]]),pe={class:"container"},ie={class:"wrapper"},_e={name:"KeyUpdate"},me=q({..._e,setup(m){const{loading:i,setLoading:d}=I(!1),r=$(1),c=$({}),s=async()=>{d(!0);try{await ae(c.value),r.value=3,c.value={}}catch{}finally{d(!1)}},y=(t,l)=>{if(typeof t=="number"){r.value=t;return}if(t==="forward"||t==="submit"){if(c.value={...c.value,...l},t==="submit"){s();return}r.value+=1}else t==="backward"&&(r.value-=1)};return(t,l)=>{const o=T,b=W,u=X,n=Y,w=Z,S=x,g=ee;return f(),D("div",pe,[e(u,{class:"container-breadcrumb"},{default:a(()=>[e(b,null,{default:a(()=>[e(o)]),_:1}),e(b,null,{default:a(()=>[p(_(t.$t("menu.key")),1)]),_:1}),e(b,null,{default:a(()=>[p(_(t.$t("menu.key.update")),1)]),_:1})]),_:1}),e(g,{loading:Q(i),style:{width:"100%"}},{default:a(()=>[e(S,{class:"general-card",bordered:!1},{title:a(()=>[p(_(t.$t("key.title.update")),1)]),default:a(()=>[H("div",ie,[e(w,{current:r.value,"onUpdate:current":l[0]||(l[0]=h=>r.value=h),style:{width:"580px"},"line-less":"",class:"steps"},{default:a(()=>[e(n,{description:t.$t("key.subTitle.baseInfo")},{default:a(()=>[p(_(t.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(n,{description:t.$t("key.subTitle.advanced")},{default:a(()=>[p(_(t.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(n,{description:t.$t("key.subTitle.update.finish")},{default:a(()=>[p(_(t.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(f(),k(J,null,[r.value===1?(f(),k(le,{key:0,onChangeStep:y})):r.value===2?(f(),k(ne,{key:1,onChangeStep:y})):r.value===3?(f(),k(ce,{key:2,onChangeStep:y})):P("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Le=C(me,[["__scopeId","data-v-aab6c6d1"]]);export{Le as default};
