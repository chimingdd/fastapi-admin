import{S as X,i as Y,_ as Z}from"./index.9184f0c9.js";/* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import{d as x,e as v,B as p,C as V,aH as a,aG as t,aL as i,aM as h,F as j,aD as g,u as F,aE as q,aJ as U,aI as k,aK as ee,aF as le,b1 as ae,b2 as oe,aS as ue,bQ as te,bV as ne,bO as re,a5 as se,aU as de,a4 as ie,bi as pe,b5 as me,bN as ce,bR as fe,g as ge}from"./arco.ba78a5b2.js";import{u as _e}from"./loading.0618e973.js";import{q as ve}from"./common.df364eef.js";import{f as be}from"./vue.2736b3ca.js";import"./chart.df189e8a.js";const Ve={class:"container"},he={class:"wrapper"},$e={class:"submit-btn"},ye={name:"SiteConfigCreate"},we=x({...ye,setup(Ue){const{proxy:A}=ge(),N=be(),I=v(),e=v({domain:"",title:"",logo:"",favicon:"",avatar:"",bg_img:"",copyright:"",jump_url:"",keywords:"",description:"",icp_beian:"",ga_beian:"",register_tips:"",grant_quota:v(),quota_expires_at:v(),support_email_suffix:v(),register_welcome:"",host:"",port:v(),user_name:"",password:"",from_name:"",carousel1_title:"",carousels1:[],carousel2_title:"",carousels2:[],announcement_title:"",announcement_more_url:"",announcements:[],document_title:"",document_more_url:"",documents:[],remark:""}),{loading:L,setLoading:R}=_e(!1),Q=async()=>{var o;if(!await((o=I.value)==null?void 0:o.validate())){R(!0);try{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.split(","));const b=[];e.value.carousels1.forEach((n,m)=>{!n.image_url&&!n.jump_url&&b.push(m)}),b.reverse().forEach(n=>{e.value.carousels1.splice(n,1)});const _=[];e.value.carousels2.forEach((n,m)=>{!n.image_url&&!n.jump_url&&_.push(m)}),_.reverse().forEach(n=>{e.value.carousels2.splice(n,1)});const $=[];e.value.announcements.forEach((n,m)=>{!n.content&&!n.jump_url&&$.push(m)}),$.reverse().forEach(n=>{e.value.announcements.splice(n,1)});const r=[];e.value.documents.forEach((n,m)=>{!n.title&&!n.jump_url&&r.push(m)}),r.reverse().forEach(n=>{e.value.documents.splice(n,1)}),await X(e.value).then(()=>{A.$message.success("\u65B0\u5EFA\u6210\u529F"),N.push({name:"SiteConfig"})})}catch{e.value.support_email_suffix&&(e.value.support_email_suffix=e.value.support_email_suffix.join(","))}finally{R(!1)}}},G=l=>{e.value.grant_quota=l*5e5},E=()=>{const l={image_url:"",jump_url:""};e.value.carousels1.push(l)},M=l=>{e.value.carousels1.length>1&&e.value.carousels1.splice(l,1)},S=()=>{const l={image_url:"",jump_url:""};e.value.carousels2.push(l)},T=l=>{e.value.carousels2.length>1&&e.value.carousels2.splice(l,1)},B=()=>{const l={content:"",jump_url:""};e.value.announcements.push(l)},z=l=>{e.value.announcements.length>1&&e.value.announcements.splice(l,1)},C=()=>{const l={title:"",jump_url:""};e.value.documents.push(l)},H=l=>{e.value.documents.length>1&&e.value.documents.splice(l,1)};for(let l=0;l<3;l+=1)E(),S(),B(),C();return C(),(l,o)=>{const b=Y,_=ee,$=le,r=ae,n=oe,m=ue,f=te,J=ne,D=re,y=se,c=de,w=ie,K=pe,O=me,P=ce,W=fe;return p(),V("div",Ve,[a($,{class:"container-breadcrumb"},{default:t(()=>[a(_,null,{default:t(()=>[a(b)]),_:1}),a(_,null,{default:t(()=>[i(h(l.$t("menu.sys")),1)]),_:1}),a(_,null,{default:t(()=>[i(h(l.$t("menu.site.config.create")),1)]),_:1})]),_:1}),a(W,{loading:F(L),style:{width:"100%"}},{default:t(()=>[a(P,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[j("div",he,[a(O,{ref_key:"formRef",ref:I,model:e.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:t(()=>[a(n,{field:"domain",label:l.$t("site.config.label.domain"),rules:[{required:!0,message:l.$t("site.config.error.domain.required")}]},{default:t(()=>[a(r,{modelValue:e.value.domain,"onUpdate:modelValue":o[0]||(o[0]=u=>e.value.domain=u),placeholder:l.$t("site.config.placeholder.domain"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"title",label:l.$t("site.config.label.title"),rules:[{required:!0,message:l.$t("site.config.error.title.required")}]},{default:t(()=>[a(r,{modelValue:e.value.title,"onUpdate:modelValue":o[1]||(o[1]=u=>e.value.title=u),placeholder:l.$t("site.config.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"logo",label:l.$t("site.config.label.logo"),rules:[{required:!0,message:l.$t("site.config.error.logo.required")}]},{default:t(()=>[a(r,{modelValue:e.value.logo,"onUpdate:modelValue":o[2]||(o[2]=u=>e.value.logo=u),placeholder:l.$t("site.config.placeholder.logo"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"favicon",label:l.$t("site.config.label.favicon"),rules:[{required:!0,message:l.$t("site.config.error.favicon.required")}]},{default:t(()=>[a(r,{modelValue:e.value.favicon,"onUpdate:modelValue":o[3]||(o[3]=u=>e.value.favicon=u),placeholder:l.$t("site.config.placeholder.favicon"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"avatar",label:l.$t("site.config.label.avatar")},{default:t(()=>[a(r,{modelValue:e.value.avatar,"onUpdate:modelValue":o[4]||(o[4]=u=>e.value.avatar=u),placeholder:l.$t("site.config.placeholder.avatar"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"bg_img",label:l.$t("site.config.label.bg_img")},{default:t(()=>[a(r,{modelValue:e.value.bg_img,"onUpdate:modelValue":o[5]||(o[5]=u=>e.value.bg_img=u),placeholder:l.$t("site.config.placeholder.bg_img"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"copyright",label:l.$t("site.config.label.copyright")},{default:t(()=>[a(r,{modelValue:e.value.copyright,"onUpdate:modelValue":o[6]||(o[6]=u=>e.value.copyright=u),placeholder:l.$t("site.config.placeholder.copyright"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"jump_url",label:l.$t("site.config.label.jump_url")},{default:t(()=>[a(r,{modelValue:e.value.jump_url,"onUpdate:modelValue":o[7]||(o[7]=u=>e.value.jump_url=u),placeholder:l.$t("site.config.placeholder.jump_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"keywords",label:l.$t("site.config.label.keywords")},{default:t(()=>[a(r,{modelValue:e.value.keywords,"onUpdate:modelValue":o[8]||(o[8]=u=>e.value.keywords=u),placeholder:l.$t("site.config.placeholder.keywords"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"description",label:l.$t("site.config.label.description")},{default:t(()=>[a(r,{modelValue:e.value.description,"onUpdate:modelValue":o[9]||(o[9]=u=>e.value.description=u),placeholder:l.$t("site.config.placeholder.description"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"icp_beian",label:l.$t("site.config.label.icp_beian")},{default:t(()=>[a(r,{modelValue:e.value.icp_beian,"onUpdate:modelValue":o[10]||(o[10]=u=>e.value.icp_beian=u),placeholder:l.$t("site.config.placeholder.icp_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"ga_beian",label:l.$t("site.config.label.ga_beian")},{default:t(()=>[a(r,{modelValue:e.value.ga_beian,"onUpdate:modelValue":o[11]||(o[11]=u=>e.value.ga_beian=u),placeholder:l.$t("site.config.placeholder.ga_beian"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"register_tips",label:l.$t("site.config.label.register_tips")},{default:t(()=>[a(r,{modelValue:e.value.register_tips,"onUpdate:modelValue":o[12]||(o[12]=u=>e.value.register_tips=u),placeholder:l.$t("site.config.placeholder.register_tips"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e.value.register_tips?q("",!0):(p(),g(n,{key:0,field:"grant_quota",label:l.$t("site.config.label.grant_quota")},{default:t(()=>[a(m,{modelValue:e.value.grant_quota,"onUpdate:modelValue":o[13]||(o[13]=u=>e.value.grant_quota=u),placeholder:l.$t("site.config.placeholder.grant_quota"),precision:0,min:0,max:9999999999999,style:{width:"492px","margin-right":"10px"},"allow-clear":""},null,8,["modelValue","placeholder"]),j("div",null," $"+h(e.value.grant_quota?F(ve)(e.value.grant_quota):"0"),1)]),_:1},8,["label"])),e.value.register_tips?q("",!0):(p(),g(n,{key:1},{default:t(()=>[a(J,{type:"button",onChange:G},{default:t(()=>[a(f,{value:1},{default:t(()=>[i(" $1 ")]),_:1}),a(f,{value:5},{default:t(()=>[i(" $5 ")]),_:1}),a(f,{value:10},{default:t(()=>[i(" $10 ")]),_:1}),a(f,{value:20},{default:t(()=>[i(" $20 ")]),_:1}),a(f,{value:50},{default:t(()=>[i(" $50 ")]),_:1}),a(f,{value:100},{default:t(()=>[i(" $100 ")]),_:1}),a(f,{value:200},{default:t(()=>[i(" $200 ")]),_:1}),a(f,{value:500},{default:t(()=>[i(" $500 ")]),_:1}),a(f,{value:1e3},{default:t(()=>[i(" $1000 ")]),_:1})]),_:1},8,["onChange"])]),_:1})),e.value.register_tips?q("",!0):(p(),g(n,{key:2,field:"quota_expires_at",label:l.$t("site.config.label.quota_expires_at")},{default:t(()=>[a(m,{modelValue:e.value.quota_expires_at,"onUpdate:modelValue":o[14]||(o[14]=u=>e.value.quota_expires_at=u),placeholder:l.$t("site.config.placeholder.quota_expires_at"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),a(n,{field:"support_email_suffix",label:l.$t("site.config.label.support_email_suffix")},{default:t(()=>[a(r,{modelValue:e.value.support_email_suffix,"onUpdate:modelValue":o[15]||(o[15]=u=>e.value.support_email_suffix=u),placeholder:l.$t("site.config.placeholder.support_email_suffix"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"register_welcome",label:l.$t("site.config.label.register_welcome")},{default:t(()=>[a(D,{modelValue:e.value.register_welcome,"onUpdate:modelValue":o[16]||(o[16]=u=>e.value.register_welcome=u),placeholder:l.$t("site.config.placeholder.register_welcome"),"auto-size":{minRows:3,maxRows:20}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"host",label:l.$t("site.config.label.host")},{default:t(()=>[a(r,{modelValue:e.value.host,"onUpdate:modelValue":o[17]||(o[17]=u=>e.value.host=u),placeholder:l.$t("site.config.placeholder.host"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"port",label:l.$t("site.config.label.port")},{default:t(()=>[a(m,{modelValue:e.value.port,"onUpdate:modelValue":o[18]||(o[18]=u=>e.value.port=u),placeholder:l.$t("site.config.placeholder.port"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"user_name",label:l.$t("site.config.label.user_name")},{default:t(()=>[a(r,{modelValue:e.value.user_name,"onUpdate:modelValue":o[19]||(o[19]=u=>e.value.user_name=u),placeholder:l.$t("site.config.placeholder.user_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"password",label:l.$t("site.config.label.password")},{default:t(()=>[a(r,{modelValue:e.value.password,"onUpdate:modelValue":o[20]||(o[20]=u=>e.value.password=u),placeholder:l.$t("site.config.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"from_name",label:l.$t("site.config.label.from_name")},{default:t(()=>[a(r,{modelValue:e.value.from_name,"onUpdate:modelValue":o[21]||(o[21]=u=>e.value.from_name=u),placeholder:l.$t("site.config.placeholder.from_name"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"carousel1_title",label:l.$t("site.config.label.carousel1_title")},{default:t(()=>[a(r,{modelValue:e.value.carousel1_title,"onUpdate:modelValue":o[22]||(o[22]=u=>e.value.carousel1_title=u),placeholder:l.$t("site.config.placeholder.carousel1_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),V(U,null,k(e.value.carousels1,(u,s)=>(p(),g(n,{key:s,label:`${s+1}. `+l.$t("site.config.label.carousels1")},{default:t(()=>[a(r,{modelValue:e.value.carousels1[s].image_url,"onUpdate:modelValue":d=>e.value.carousels1[s].image_url=d,placeholder:l.$t("site.config.placeholder.carousels1.image_url"),style:{width:"220px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(r,{modelValue:e.value.carousels1[s].jump_url,"onUpdate:modelValue":d=>e.value.carousels1[s].jump_url=d,placeholder:l.$t("site.config.placeholder.carousels1.jump_url"),style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[23]||(o[23]=d=>E())},{default:t(()=>[a(y)]),_:1}),a(c,{type:"secondary",shape:"circle",onClick:d=>M(s)},{default:t(()=>[a(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),a(n,{field:"carousel2_title",label:l.$t("site.config.label.carousel2_title")},{default:t(()=>[a(r,{modelValue:e.value.carousel2_title,"onUpdate:modelValue":o[24]||(o[24]=u=>e.value.carousel2_title=u),placeholder:l.$t("site.config.placeholder.carousel2_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),V(U,null,k(e.value.carousels2,(u,s)=>(p(),g(n,{key:s,label:`${s+1}. `+l.$t("site.config.label.carousels2")},{default:t(()=>[a(r,{modelValue:e.value.carousels2[s].image_url,"onUpdate:modelValue":d=>e.value.carousels2[s].image_url=d,placeholder:l.$t("site.config.placeholder.carousels2.image_url"),style:{width:"220px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(r,{modelValue:e.value.carousels2[s].jump_url,"onUpdate:modelValue":d=>e.value.carousels2[s].jump_url=d,placeholder:l.$t("site.config.placeholder.carousels2.jump_url"),style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[25]||(o[25]=d=>S())},{default:t(()=>[a(y)]),_:1}),a(c,{type:"secondary",shape:"circle",onClick:d=>T(s)},{default:t(()=>[a(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),a(n,{field:"announcement_title",label:l.$t("site.config.label.announcement_title")},{default:t(()=>[a(r,{modelValue:e.value.announcement_title,"onUpdate:modelValue":o[26]||(o[26]=u=>e.value.announcement_title=u),placeholder:l.$t("site.config.placeholder.announcement_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"announcement_more_url",label:l.$t("site.config.label.announcement_more_url")},{default:t(()=>[a(r,{modelValue:e.value.announcement_more_url,"onUpdate:modelValue":o[27]||(o[27]=u=>e.value.announcement_more_url=u),placeholder:l.$t("site.config.placeholder.announcement_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),V(U,null,k(e.value.announcements,(u,s)=>(p(),g(n,{key:s,label:`${s+1}. `+l.$t("site.config.label.announcements")},{default:t(()=>[a(r,{modelValue:e.value.announcements[s].content,"onUpdate:modelValue":d=>e.value.announcements[s].content=d,placeholder:l.$t("site.config.placeholder.announcements.content"),style:{width:"220px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(r,{modelValue:e.value.announcements[s].jump_url,"onUpdate:modelValue":d=>e.value.announcements[s].jump_url=d,placeholder:l.$t("site.config.placeholder.announcements.jump_url"),style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[28]||(o[28]=d=>B())},{default:t(()=>[a(y)]),_:1}),a(c,{type:"secondary",shape:"circle",onClick:d=>z(s)},{default:t(()=>[a(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),a(n,{field:"document_title",label:l.$t("site.config.label.document_title")},{default:t(()=>[a(r,{modelValue:e.value.document_title,"onUpdate:modelValue":o[29]||(o[29]=u=>e.value.document_title=u),placeholder:l.$t("site.config.placeholder.document_title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"document_more_url",label:l.$t("site.config.label.document_more_url")},{default:t(()=>[a(r,{modelValue:e.value.document_more_url,"onUpdate:modelValue":o[30]||(o[30]=u=>e.value.document_more_url=u),placeholder:l.$t("site.config.placeholder.document_more_url"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),(p(!0),V(U,null,k(e.value.documents,(u,s)=>(p(),g(n,{key:s,label:`${s+1}. `+l.$t("site.config.label.documents")},{default:t(()=>[a(r,{modelValue:e.value.documents[s].title,"onUpdate:modelValue":d=>e.value.documents[s].title=d,placeholder:l.$t("site.config.placeholder.documents.title"),style:{width:"220px","margin-right":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(r,{modelValue:e.value.documents[s].jump_url,"onUpdate:modelValue":d=>e.value.documents[s].jump_url=d,placeholder:l.$t("site.config.placeholder.documents.jump_url"),style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),a(c,{type:"primary",shape:"circle",style:{margin:"0 10px 0 10px"},onClick:o[31]||(o[31]=d=>C())},{default:t(()=>[a(y)]),_:1}),a(c,{type:"secondary",shape:"circle",onClick:d=>H(s)},{default:t(()=>[a(w)]),_:2},1032,["onClick"])]),_:2},1032,["label"]))),128)),a(n,{field:"remark",label:l.$t("site.config.label.remark")},{default:t(()=>[a(D,{modelValue:e.value.remark,"onUpdate:modelValue":o[32]||(o[32]=u=>e.value.remark=u),placeholder:l.$t("site.config.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(K,null,{default:t(()=>[j("div",$e,[a(c,{type:"secondary",onClick:o[33]||(o[33]=u=>l.$router.push({name:"SiteConfig"}))},{default:t(()=>[i(h(l.$t("button.cancel")),1)]),_:1}),a(c,{type:"primary",onClick:Q},{default:t(()=>[i(h(l.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ae=Z(we,[["__scopeId","data-v-771fa04c"]]);export{Ae as default};
