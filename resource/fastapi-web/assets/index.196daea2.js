import{i as G,_ as J}from"./index.396c28af.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               */import{d as K,e as c,B as f,C as g,aH as o,aG as r,aL as s,aM as u,F as D,aJ as B,aI as L,aD as N,u as d,bT as n,aK as M,aF as P,b1 as Q,b2 as W,bA as X,bB as Y,bQ as Z,bi as x,b4 as ee,aS as le,bW as ae,bO as te,aU as oe,b5 as re,bI as se,bR as ue,g as de}from"./arco.75032696.js";import{f as ie,h as ne}from"./vue.ebfaaf45.js";import{u as me}from"./loading.96e1cbd7.js";import{c as pe,d as ce}from"./notice.f07976fc.js";import{q as be}from"./admin_user.bd9f7f2a.js";import{i as fe}from"./admin_reseller.fd79b084.js";import{A as ve}from"./aieditor.b45d2ecf.js";import"./chart.f8f3ffb1.js";const _e={class:"container"},ye={class:"wrapper"},Ve={class:"submit-btn"},ge={name:"NoticeUpdate"},he=K({...ge,setup($e){const{proxy:I}=de(),{loading:R,setLoading:m}=me(!1),S=ie(),C=ne(),h=c(),e=c({id:"",title:"",content:"",category:c(),scope:c(),users:[],resellers:[],methods:[],priority:c(),expires_at:"",scheduled_time:"",remark:"",status:1}),$=c([]);(async()=>{m(!0);try{const{data:a}=await be();$.value=a.items}catch{}finally{m(!1)}})();const w=c([]);(async()=>{m(!0);try{const{data:a}=await fe();w.value=a.items}catch{}finally{m(!1)}})(),(async(a={id:C.query.id})=>{m(!0);try{const{data:l}=await pe(a);e.value.id=l.id,e.value.title=l.title,e.value.content=l.content,e.value.category=String(l.category),e.value.scope=String(l.scope),e.value.users=l.users,e.value.resellers=l.resellers;for(let p=0;p<l.methods.length;p+=1)e.value.methods[p]=String(l.methods[p]);e.value.priority=l.priority,e.value.expires_at=l.expires_at,e.value.scheduled_time=l.scheduled_time,e.value.remark=l.remark,e.value.status=l.status}catch{}finally{m(!1)}})();const F=async()=>{var l;if(!await((l=h.value)==null?void 0:l.validate())){m(!0);try{await ce(e.value).then(()=>{I.$message.success("\u66F4\u65B0\u6210\u529F"),S.push({name:"NoticeList"})})}catch{}finally{m(!1)}}};return(a,l)=>{const p=G,_=M,H=P,A=Q,i=W,b=X,y=Y,v=Z,V=x,k=ee,T=le,U=ae,z=te,q=oe,E=re,O=se,j=ue;return f(),g("div",_e,[o(H,{class:"container-breadcrumb"},{default:r(()=>[o(_,null,{default:r(()=>[o(p)]),_:1}),o(_,null,{default:r(()=>[s(u(a.$t("menu.sys")),1)]),_:1}),o(_,null,{default:r(()=>[s(u(a.$t("menu.notice.update")),1)]),_:1})]),_:1}),o(j,{loading:d(R),style:{width:"100%"}},{default:r(()=>[o(O,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[D("div",ye,[o(E,{ref_key:"formRef",ref:h,model:e.value,class:"form","label-col-props":{span:3},"wrapper-col-props":{span:18}},{default:r(()=>[o(i,{field:"title",label:a.$t("notice.label.title"),rules:[{required:!0,message:a.$t("notice.error.title.required")}]},{default:r(()=>[o(A,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.title=t),placeholder:a.$t("notice.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(i,{field:"category",label:a.$t("notice.label.category"),rules:[{required:!0,message:a.$t("notice.error.category.required")}]},{default:r(()=>[o(y,{modelValue:e.value.category,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.category=t),placeholder:a.$t("notice.placeholder.category"),scrollbar:!1,"allow-search":""},{default:r(()=>[o(b,{value:"1"},{default:r(()=>[s(u(a.$t("notice.dict.category.1")),1)]),_:1}),o(b,{value:"2"},{default:r(()=>[s(u(a.$t("notice.dict.category.2")),1)]),_:1}),o(b,{value:"3"},{default:r(()=>[s(u(a.$t("notice.dict.category.3")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(i,{field:"scope",label:a.$t("notice.label.scope"),rules:[{required:!0,message:a.$t("notice.error.scope.required")}]},{default:r(()=>[o(V,{size:"large"},{default:r(()=>[o(v,{modelValue:e.value.scope,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.scope=t),value:"1"},{default:r(()=>[s(u(a.$t("notice.dict.scope.1")),1)]),_:1},8,["modelValue"]),o(v,{modelValue:e.value.scope,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.scope=t),value:"2"},{default:r(()=>[s(u(a.$t("notice.dict.scope.2")),1)]),_:1},8,["modelValue"]),o(v,{modelValue:e.value.scope,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.scope=t),value:"3"},{default:r(()=>[s(u(a.$t("notice.dict.scope.3")),1)]),_:1},8,["modelValue"]),o(v,{modelValue:e.value.scope,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.scope=t),value:"4"},{default:r(()=>[s(u(a.$t("notice.dict.scope.4")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),o(i,{field:"users",label:a.$t("notice.label.users"),rules:[{required:!0,message:a.$t("notice.error.users.required")}]},{default:r(()=>[o(y,{modelValue:e.value.users,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.users=t),placeholder:a.$t("notice.placeholder.users"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(f(!0),g(B,null,L($.value,t=>(f(),N(b,{key:t.user_id,value:t.user_id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(i,{field:"resellers",label:a.$t("notice.label.resellers"),rules:[{required:!0,message:a.$t("notice.error.resellers.required")}]},{default:r(()=>[o(y,{modelValue:e.value.resellers,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.resellers=t),placeholder:a.$t("notice.placeholder.resellers"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(f(!0),g(B,null,L(w.value,t=>(f(),N(b,{key:t.user_id,value:t.user_id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),o(i,{field:"methods",label:a.$t("notice.label.methods"),rules:[{required:!0,message:a.$t("notice.error.methods.required")}]},{default:r(()=>[o(V,{size:"large"},{default:r(()=>[o(k,{modelValue:e.value.methods,"onUpdate:modelValue":l[8]||(l[8]=t=>e.value.methods=t),value:"1","default-checked":!0},{default:r(()=>[s(u(a.$t("notice.dict.methods.1")),1)]),_:1},8,["modelValue"]),o(k,{modelValue:e.value.methods,"onUpdate:modelValue":l[9]||(l[9]=t=>e.value.methods=t),value:"2"},{default:r(()=>[s(u(a.$t("notice.dict.methods.2")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),o(i,{field:"priority",label:a.$t("notice.label.priority")},{default:r(()=>[o(T,{modelValue:e.value.priority,"onUpdate:modelValue":l[10]||(l[10]=t=>e.value.priority=t),placeholder:a.$t("notice.placeholder.priority"),precision:0,min:-999,max:99999},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(i,{field:"expires_at",label:a.$t("notice.label.expires_at")},{default:r(()=>[o(U,{modelValue:e.value.expires_at,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.expires_at=t),placeholder:a.$t("notice.placeholder.expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":t=>d(n)(t).isBefore(d(n)().subtract(1,"day")),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>d(n)(e.value.expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),o(i,{field:"scheduled_time",label:a.$t("notice.label.scheduled_time")},{default:r(()=>[o(U,{modelValue:e.value.scheduled_time,"onUpdate:modelValue":l[12]||(l[12]=t=>e.value.scheduled_time=t),placeholder:a.$t("notice.placeholder.scheduled_time"),"disabled-date":t=>d(n)(t).isBefore(d(n)().subtract(1,"day")),style:{width:"100%"},"show-time":""},null,8,["modelValue","placeholder","disabled-date"])]),_:1},8,["label"]),o(i,{field:"content",label:a.$t("notice.label.content"),rules:[{required:!0,message:a.$t("notice.error.content.required")}]},{default:r(()=>[o(ve,{modelValue:e.value.content,"onUpdate:modelValue":l[13]||(l[13]=t=>e.value.content=t),style:{flex:"1",height:"500px"}},null,8,["modelValue"])]),_:1},8,["label","rules"]),o(i,{field:"remark",label:a.$t("notice.label.remark")},{default:r(()=>[o(z,{modelValue:e.value.remark,"onUpdate:modelValue":l[14]||(l[14]=t=>e.value.remark=t),placeholder:a.$t("notice.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(V,null,{default:r(()=>[D("div",Ve,[o(q,{type:"secondary",onClick:l[15]||(l[15]=t=>a.$router.push({name:"NoticeList"}))},{default:r(()=>[s(u(a.$t("button.cancel")),1)]),_:1}),o(q,{type:"primary",onClick:F},{default:r(()=>[s(u(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Qe=J(he,[["__scopeId","data-v-cefebb6b"]]);export{Qe as default};
