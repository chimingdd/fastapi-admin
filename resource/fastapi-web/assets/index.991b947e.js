import{_ as I,B as z}from"./index.95d19ec3.js";import{u as q}from"./loading.e3b9231d.js";/* empty css                */import{d as L,e as k,B as i,aD as g,aG as a,aH as e,aL as p,aM as f,bC as M,bD as U,b3 as N,b2 as G,bL as H,aV as K,b6 as F,C,aJ as D,aI as B,bj as R,bA as J,F as P,bt as Q,aE as W,u as X,aK as Y,aF as Z,bM as x,bN as ee,bK as ae,bO as te}from"./arco.a6f3e581.js";import{c as T,d as le}from"./key.9e86d229.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as O}from"./vue.7b8f6a6a.js";/* empty css               */import{q as oe}from"./model.cc15f1d7.js";import{e as se}from"./agent.0a04dc1f.js";/* empty css               */import"./chart.5d3761cb.js";const ne=L({__name:"base-info",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=q(!1),r=O(),c=k(),n=k({id:"",corp:"",key:"",remark:"",status:1});(async(o={id:r.query.id})=>{d(!0);try{const{data:t}=await T(o);n.value.id=t.id,n.value.corp=t.corp,n.value.key=t.key,n.value.remark=t.remark,n.value.status=t.status}catch{}finally{d(!1)}})();const l=async()=>{var t;await((t=c.value)==null?void 0:t.validate())||m("changeStep","forward",{...n.value})};return(o,t)=>{const h=M,S=U,b=N,s=G,u=H,w=K,V=F;return i(),g(V,{ref_key:"formRef",ref:c,model:n.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(b,{field:"corp",label:o.$t("key.label.corp"),rules:[{required:!0,message:o.$t("key.error.corp.required")}]},{default:a(()=>[e(S,{modelValue:n.value.corp,"onUpdate:modelValue":t[0]||(t[0]=v=>n.value.corp=v),placeholder:o.$t("key.placeholder.corp")},{default:a(()=>[e(h,{value:"OpenAI"},{default:a(()=>[p("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"key",label:o.$t("key.label.key"),rules:[{required:!0,message:o.$t("key.error.key.required")}]},{default:a(()=>[e(s,{modelValue:n.value.key,"onUpdate:modelValue":t[1]||(t[1]=v=>n.value.key=v),placeholder:o.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"remark",label:o.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(u,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=v=>n.value.remark=v),placeholder:o.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(b,null,{default:a(()=>[e(w,{type:"primary",onClick:l},{default:a(()=>[p(f(o.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const re=I(ne,[["__scopeId","data-v-213bf2fd"]]),ue=L({__name:"advanced",emits:["changeStep"],setup(y,{emit:m}){const{setLoading:d}=q(!0),r=O(),c=k([]);(async()=>{d(!0);try{const{data:s}=await oe();c.value=s.items}catch{}finally{d(!1)}})();const $=k([]);(async()=>{d(!0);try{const{data:s}=await se();$.value=s.items}catch{}finally{d(!1)}})();const o=k(),t=k({models:[],model_agents:[]});(async(s={id:r.query.id})=>{d(!0);try{const{data:u}=await T(s);t.value.models=u.models,t.value.model_agents=u.model_agents}catch{}finally{d(!1)}})();const S=async()=>{var u;await((u=o.value)==null?void 0:u.validate())||m("changeStep","submit",{...t.value})},b=()=>{m("changeStep","backward")};return(s,u)=>{const w=M,V=U,v=N,A=K,E=R,j=F;return i(),g(j,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:4},"wrapper-col-props":{span:18}},{default:a(()=>[e(v,{field:"models",label:s.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(V,{modelValue:t.value.models,"onUpdate:modelValue":u[0]||(u[0]=_=>t.value.models=_),placeholder:s.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(i(!0),C(D,null,B(c.value,_=>(i(),g(w,{key:_.id,value:_.id,label:_.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,{field:"model_agents",label:s.$t("key.label.modelAgents")},{default:a(()=>[e(V,{modelValue:t.value.model_agents,"onUpdate:modelValue":u[1]||(u[1]=_=>t.value.model_agents=_),placeholder:s.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(i(!0),C(D,null,B($.value,_=>(i(),g(w,{key:_.id,value:_.id,label:_.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,null,{default:a(()=>[e(E,null,{default:a(()=>[e(A,{type:"secondary",onClick:b},{default:a(()=>[p(f(s.$t("key.button.prev")),1)]),_:1}),e(A,{type:"primary",onClick:S},{default:a(()=>[p(f(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=I(ue,[["__scopeId","data-v-a4e96830"]]);const ce={},pe={class:"success-wrap"};function ie(y,m){const d=J,r=K,c=R;return i(),C("div",pe,[e(d,{status:"success",title:y.$t("key.success.title"),subtitle:y.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(c,{size:16},{default:a(()=>[e(r,{key:"finish",type:"secondary",onClick:m[0]||(m[0]=n=>y.$router.push({name:"KeyModelList"}))},{default:a(()=>[p(f(y.$t("key.button.return")),1)]),_:1}),e(r,{key:"again",type:"primary",onClick:m[1]||(m[1]=n=>y.$router.push({name:"KeyDetail",query:{id:`${y.$route.query.id}`}}))},{default:a(()=>[p(f(y.$t("key.button.view")),1)]),_:1})]),_:1})])}const me=I(ce,[["render",ie],["__scopeId","data-v-016ee704"]]),_e={class:"container"},fe={class:"wrapper"},ye={name:"KeyUpdate"},be=L({...ye,setup(y){const{loading:m,setLoading:d}=q(!1),r=k(1),c=k({}),n=async()=>{d(!0);try{await le(c.value),r.value=3,c.value={}}catch{}finally{d(!1)}},$=(l,o)=>{if(typeof l=="number"){r.value=l;return}if(l==="forward"||l==="submit"){if(c.value={...c.value,...o},l==="submit"){n();return}r.value+=1}else l==="backward"&&(r.value-=1)};return(l,o)=>{const t=z,h=Y,S=Z,b=x,s=ee,u=ae,w=te;return i(),C("div",_e,[e(S,{class:"container-breadcrumb"},{default:a(()=>[e(h,null,{default:a(()=>[e(t)]),_:1}),e(h,null,{default:a(()=>[p(f(l.$t("menu.key")),1)]),_:1}),e(h,null,{default:a(()=>[p(f(l.$t("menu.key.update")),1)]),_:1})]),_:1}),e(w,{loading:X(m),style:{width:"100%"}},{default:a(()=>[e(u,{class:"general-card",bordered:!1},{title:a(()=>[p(f(l.$t("key.title.update")),1)]),default:a(()=>[P("div",fe,[e(s,{current:r.value,"onUpdate:current":o[0]||(o[0]=V=>r.value=V),style:{width:"660px"},"line-less":"",class:"steps"},{default:a(()=>[e(b,{description:l.$t("key.subTitle.baseInfo")},{default:a(()=>[p(f(l.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.advanced")},{default:a(()=>[p(f(l.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(b,{description:l.$t("key.subTitle.update.finish")},{default:a(()=>[p(f(l.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(i(),g(Q,null,[r.value===1?(i(),g(re,{key:0,onChangeStep:$})):r.value===2?(i(),g(de,{key:1,onChangeStep:$})):r.value===3?(i(),g(me,{key:2,onChangeStep:$})):W("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ue=I(be,[["__scopeId","data-v-b0da38cd"]]);export{Ue as default};
