import{d as R,u as k,a as x,r,p as S,e as T,t as U,o as D,q as j,i as z,k as g,g as t,w as n,h as o,j as V,s as E,v as G,G as K,I as L,F as P,B as A,l as H,m as J,n as M,_ as O}from"./index.9d2a6f93.js";/* empty css               *//* empty css               */const Q={class:"sub-title"},W=R({__name:"forget",setup(X){const{proxy:h}=M(),{t:s}=k(),y=x(),p=r(!1),c=r(!1),m=r(!1),u=r(60),_=r(),i=r("login.captcha.get"),$=S(()=>s(i.value)),I=T({form:{email:"",password:"",captcha:""},rules:{email:[{required:!0,message:s("login.email.error.required.email")}],password:[{required:!0,message:s("login.email.error.required.password")}],captcha:[{required:!0,message:s("login.email.error.required.captcha")}]}}),{form:a,rules:q}=U(I),v=()=>{window.clearInterval(_.value),u.value=60,i.value="login.captcha.get",m.value=!1},B=()=>{c.value||h.$refs.formRef.validateField("email",l=>{l||(c.value=!0,i.value="login.captcha.ing",G({email:a.value.email,channel:"forget_account"}).then(()=>{c.value=!1,m.value=!0,i.value=`${s("login.captcha.get")}(${u.value-=1}s)`,_.value=window.setInterval(()=>{u.value-=1,i.value=`${s("login.captcha.get")}(${u.value}s)`,u.value<=0&&v()},1e3)}).catch(()=>{v(),c.value=!1}))})},C=({errors:l,values:e})=>{p.value||l||(p.value=!0,K({account:e.email,password:e.password,terminal:"web",code:e.captcha}).then(()=>{h.$message.success(s("forget.success")),y.go(0)}).catch(()=>{a.value.captcha=""}).finally(()=>{p.value=!1}))};return(l,e)=>{const w=L,f=P,b=A,F=H,N=J;return D(),j(E,null,[z("div",Q,g(l.$t("login.form.forget.title")),1),t(N,{ref:"formRef",model:o(a),rules:o(q),layout:"vertical",size:"large",class:"login-form",onSubmit:C},{default:n(()=>[t(f,{field:"email","hide-label":""},{default:n(()=>[t(w,{modelValue:o(a).email,"onUpdate:modelValue":e[0]||(e[0]=d=>o(a).email=d),placeholder:l.$t("login.email.placeholder.email"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(f,{field:"captcha","hide-label":""},{default:n(()=>[t(w,{modelValue:o(a).captcha,"onUpdate:modelValue":e[1]||(e[1]=d=>o(a).captcha=d),placeholder:l.$t("login.email.placeholder.captcha"),"max-length":6,"allow-clear":"",style:{flex:"1 1"}},null,8,["modelValue","placeholder"]),t(b,{class:"captcha-btn",loading:c.value,disabled:m.value,onClick:B},{default:n(()=>[V(g(o($)),1)]),_:1},8,["loading","disabled"])]),_:1}),t(f,{field:"password","hide-label":""},{default:n(()=>[t(F,{modelValue:o(a).password,"onUpdate:modelValue":e[2]||(e[2]=d=>o(a).password=d),placeholder:l.$t("login.account.placeholder.password"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1}),t(b,{class:"btn",loading:p.value,type:"primary","html-type":"submit"},{default:n(()=>[V(g(l.$t("forget.button")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});const ae=O(W,[["__scopeId","data-v-e8718137"]]);export{ae as F};
