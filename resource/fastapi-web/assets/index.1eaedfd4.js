import{B as O,_ as z}from"./index.c0f50ad7.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as G,e as u,B as m,C as c,aH as a,aG as t,aL as d,aM as i,F as B,aJ as L,aI as U,aD as _,aE as H,u as J,aK as P,aF as Q,bE as j,bA as W,bB as X,b2 as Y,bO as Z,bP as x,bi as ee,aS as ae,bQ as le,aT as te,aU as oe,b5 as re,bI as se,bR as ne,g as de}from"./arco.e79a5475.js";import{u as ue}from"./loading.d06bc570.js";import{f as me}from"./vue.2a7862c7.js";import{d as ie}from"./key.e289002c.js";import{q as pe}from"./corp.d247a35f.js";import{a as ce}from"./model.82ed5b80.js";import{f as _e}from"./agent.68373156.js";import"./chart.f33778db.js";import"./base.87fcf6e2.js";const fe={class:"container"},be={class:"wrapper"},ye={class:"submit-btn"},ge={name:"KeyCreate"},ve=G({...ge,setup(ke){const{loading:A,setLoading:s}=ue(!1),{proxy:F}=de(),I=me(),f=u([]);(async()=>{s(!0);try{const{data:e}=await pe();f.value=e.items}catch{}finally{s(!1)}})();const b=u([]);(async()=>{s(!0);try{const{data:e}=await ce();b.value=e.items}catch{}finally{s(!1)}})();const y=u([]);(async()=>{s(!0);try{const{data:e}=await _e();y.value=e.items}catch{}finally{s(!1)}})();const g=u(),r=u({corp:"",key:"",remark:"",lb_strategy:"1",weight:u(20),models:[],model_agents:[],is_agents_only:!1}),M=async()=>{var o;if(!await((o=g.value)==null?void 0:o.validate())){s(!0);try{await ie(r.value).then(()=>{F.$message.success("\u65B0\u5EFA\u6210\u529F"),I.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(e,o)=>{const v=O,p=P,S=Q,k=j,V=W,h=X,n=Y,$=Z,w=x,C=ee,R=ae,T=le,D=te,q=oe,E=re,K=se,N=ne;return m(),c("div",fe,[a(S,{class:"container-breadcrumb"},{default:t(()=>[a(p,null,{default:t(()=>[a(v)]),_:1}),a(p,null,{default:t(()=>[d(i(e.$t("menu.key")),1)]),_:1}),a(p,null,{default:t(()=>[d(i(e.$t("menu.key.create")),1)]),_:1})]),_:1}),a(N,{loading:J(A),style:{width:"100%"}},{default:t(()=>[a(K,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[B("div",be,[a(E,{ref_key:"formRef",ref:g,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:t(()=>[a(k,{orientation:"left"},{default:t(()=>[d(i(e.$t("model.title.baseInfo")),1)]),_:1}),a(n,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:t(()=>[a(h,{modelValue:r.value.corp,"onUpdate:modelValue":o[0]||(o[0]=l=>r.value.corp=l),placeholder:e.$t("key.placeholder.corp"),"allow-search":""},{default:t(()=>[(m(!0),c(L,null,U(f.value,l=>(m(),_(V,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:t(()=>[a($,{modelValue:r.value.key,"onUpdate:modelValue":o[1]||(o[1]=l=>r.value.key=l),placeholder:e.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"remark",label:e.$t("key.label.remark"),rules:[{required:!1}]},{default:t(()=>[a($,{modelValue:r.value.remark,"onUpdate:modelValue":o[2]||(o[2]=l=>r.value.remark=l),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(k,{orientation:"left"},{default:t(()=>[d(i(e.$t("model.title.advanced")),1)]),_:1}),a(n,{field:"lb_strategy",label:e.$t("model.agent.label.lb_strategy"),rules:[{required:!0}]},{default:t(()=>[a(C,{size:"large"},{default:t(()=>[a(w,{modelValue:r.value.lb_strategy,"onUpdate:modelValue":o[3]||(o[3]=l=>r.value.lb_strategy=l),value:"1","default-checked":!0},{default:t(()=>[d(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),a(w,{modelValue:r.value.lb_strategy,"onUpdate:modelValue":o[4]||(o[4]=l=>r.value.lb_strategy=l),value:"2"},{default:t(()=>[d("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),r.value.lb_strategy==="2"?(m(),_(n,{key:0,field:"weight",label:e.$t("model.agent.label.weight"),rules:[{required:r.value.lb_strategy==="2",message:e.$t("model.agent.error.weight.required")}]},{default:t(()=>[a(R,{modelValue:r.value.weight,"onUpdate:modelValue":o[5]||(o[5]=l=>r.value.weight=l),precision:0,min:1,max:100,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):H("",!0),a(n,{field:"models",label:e.$t("key.label.models")},{default:t(()=>[a(T,{modelValue:r.value.models,"onUpdate:modelValue":o[6]||(o[6]=l=>r.value.models=l),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:b.value,placeholder:e.$t("key.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),a(n,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:t(()=>[a(h,{modelValue:r.value.model_agents,"onUpdate:modelValue":o[7]||(o[7]=l=>r.value.model_agents=l),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(m(!0),c(L,null,U(y.value,l=>(m(),_(V,{key:l.id,value:l.id,label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:t(()=>[a(D,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":o[8]||(o[8]=l=>r.value.is_agents_only=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(C,null,{default:t(()=>[B("div",ye,[a(q,{type:"secondary",onClick:o[9]||(o[9]=l=>e.$router.push({name:"ModelKeyList"}))},{default:t(()=>[d(i(e.$t("button.cancel")),1)]),_:1}),a(q,{type:"primary",onClick:M},{default:t(()=>[d(i(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const We=z(ve,[["__scopeId","data-v-113a20b1"]]);export{We as default};
