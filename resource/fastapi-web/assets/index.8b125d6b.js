import{x as O,_ as z}from"./index.c0f50ad7.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                */import{d as G,e as m,B as i,C as k,aH as t,aG as r,aL as s,aM as u,F as w,aJ as H,aI as J,aD as U,aE as K,u as P,aK as Q,aF as j,bE as W,bA as X,bB as Y,b2 as Z,b1 as x,bO as ee,bP as ae,bi as le,aS as te,bQ as oe,aT as re,aU as ne,b5 as de,bI as se,bR as ue,g as me}from"./arco.e79a5475.js";import{u as ie}from"./loading.d06bc570.js";import{h as pe,f as ce}from"./vue.2a7862c7.js";import{e as be,c as ge}from"./agent.68373156.js";import{q as _e}from"./corp.d247a35f.js";import{a as fe}from"./model.82ed5b80.js";import"./chart.f33778db.js";import"./base.87fcf6e2.js";const ve={class:"container"},ye={class:"wrapper"},he={class:"submit-btn"},Ve={name:"ModelAgentUpdate"},$e=G({...Ve,setup(ke){const{loading:q,setLoading:d}=ie(!1),{proxy:B}=me(),C=pe(),M=ce(),b=m([]);(async()=>{d(!0);try{const{data:a}=await _e();b.value=a.items}catch{}finally{d(!1)}})();const g=m([]);(async()=>{d(!0);try{const{data:a}=await fe();g.value=a.items}catch{}finally{d(!1)}})();const _=m(),l=m({id:"",corp:"",name:"",base_url:"",path:"",lb_strategy:"",weight:m(20),remark:"",status:1,models:[],key:"",is_agents_only:!0}),I=async()=>{var e;if(!await((e=_.value)==null?void 0:e.validate())){d(!0);try{await be(l.value).then(()=>{B.$message.success("\u66F4\u65B0\u6210\u529F"),M.push({name:"ModelAgentList"})})}catch{}finally{d(!1)}}};return(async(a={id:C.query.id})=>{d(!0);try{const{data:e}=await ge(a);l.value.id=e.id,l.value.corp=e.corp,l.value.name=e.name,l.value.base_url=e.base_url,l.value.path=e.path,l.value.lb_strategy=String(e.lb_strategy),l.value.weight=e.weight,l.value.remark=e.remark,l.value.status=e.status,l.value.models=e.models,l.value.key=e.key}catch{}finally{d(!1)}})(),(a,e)=>{const f=O,p=Q,A=j,v=W,D=X,F=Y,n=Z,c=x,y=ee,h=ae,V=le,L=te,R=oe,S=re,$=ne,T=de,E=se,N=ue;return i(),k("div",ve,[t(A,{class:"container-breadcrumb"},{default:r(()=>[t(p,null,{default:r(()=>[t(f)]),_:1}),t(p,null,{default:r(()=>[s(u(a.$t("menu.agent")),1)]),_:1}),t(p,null,{default:r(()=>[s(u(a.$t("menu.model.agent.update")),1)]),_:1})]),_:1}),t(N,{loading:P(q),style:{width:"100%"}},{default:r(()=>[t(E,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[w("div",ye,[t(T,{ref_key:"formRef",ref:_,model:l.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:r(()=>[t(v,{orientation:"left"},{default:r(()=>[s(u(a.$t("model.title.baseInfo")),1)]),_:1}),t(n,{field:"corp",label:a.$t("model.agent.label.corp"),rules:[{required:!0,message:a.$t("model.agent.error.corp.required")}]},{default:r(()=>[t(F,{modelValue:l.value.corp,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.corp=o),placeholder:a.$t("model.agent.placeholder.corp"),"allow-search":""},{default:r(()=>[(i(!0),k(H,null,J(b.value,o=>(i(),U(D,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"name",label:a.$t("model.agent.label.name"),rules:[{required:!0,message:a.$t("model.agent.error.name.required")},{match:/^.{1,100}$/,message:a.$t("model.agent.error.name.pattern")}]},{default:r(()=>[t(c,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.name=o),placeholder:a.$t("model.agent.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"base_url",label:a.$t("model.agent.label.baseUrl"),rules:[{required:!0,message:a.$t("model.agent.error.baseUrl.required")}]},{default:r(()=>[t(c,{modelValue:l.value.base_url,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.base_url=o),placeholder:a.$t("model.agent.placeholder.baseUrl")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(n,{field:"path",label:a.$t("model.agent.label.path")},{default:r(()=>[t(c,{modelValue:l.value.path,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.path=o),placeholder:a.$t("model.agent.placeholder.path")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"remark",label:a.$t("model.agent.label.remark")},{default:r(()=>[t(y,{modelValue:l.value.remark,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.remark=o),placeholder:a.$t("model.agent.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v,{orientation:"left"},{default:r(()=>[s(u(a.$t("model.title.advanced")),1)]),_:1}),t(n,{field:"lb_strategy",label:a.$t("model.agent.label.lb_strategy"),rules:[{required:!0}]},{default:r(()=>[t(V,{size:"large"},{default:r(()=>[t(h,{modelValue:l.value.lb_strategy,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.lb_strategy=o),value:"1","default-checked":!0},{default:r(()=>[s(" \u8F6E\u8BE2 ")]),_:1},8,["modelValue"]),t(h,{modelValue:l.value.lb_strategy,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.lb_strategy=o),value:"2"},{default:r(()=>[s("\u6743\u91CD")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),l.value.lb_strategy==="2"?(i(),U(n,{key:0,field:"weight",label:a.$t("model.agent.label.weight"),rules:[{required:l.value.lb_strategy==="2",message:a.$t("model.agent.error.weight.required")}]},{default:r(()=>[t(L,{modelValue:l.value.weight,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.weight=o),precision:0,min:0,max:999,placeholder:a.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):K("",!0),t(n,{field:"models",label:a.$t("model.agent.label.models"),rules:[{required:!1}]},{default:r(()=>[t(R,{modelValue:l.value.models,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.models=o),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,"tree-checked-strategy":"child",data:g.value,placeholder:a.$t("model.agent.placeholder.models"),"max-tag-count":3},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),t(n,{field:"key",label:a.$t("model.agent.label.key")},{default:r(()=>[t(y,{modelValue:l.value.key,"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.key=o),placeholder:a.$t("model.agent.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(n,{field:"is_agents_only",label:a.$t("model.agent.label.isAgentsOnly")},{default:r(()=>[t(S,{modelValue:l.value.is_agents_only,"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(V,null,{default:r(()=>[w("div",he,[t($,{type:"secondary",onClick:e[11]||(e[11]=o=>a.$router.push({name:"ModelAgentList"}))},{default:r(()=>[s(u(a.$t("button.cancel")),1)]),_:1}),t($,{type:"primary",onClick:I},{default:r(()=>[s(u(a.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Ye=z($e,[["__scopeId","data-v-afd03e0d"]]);export{Ye as default};
