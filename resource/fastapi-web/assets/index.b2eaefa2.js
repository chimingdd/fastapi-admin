import{d as q,P as B,r as g,o as f,f as k,w as a,g as e,j as p,k as _,aP as L,aQ as N,F as U,I as A,b1 as O,B as C,m as R,_ as I,q as K,s as P,ar as j,a4 as T,aJ as z,i as E,ay as J,y as Q,h as G,gD as H,aM as W,aN as X,b6 as Y,b7 as Z,b3 as x,b8 as ee}from"./index.9d2a6f93.js";import{u as D}from"./loading.2f897f78.js";/* empty css                */import{b as F,c as ae}from"./key.493bda66.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{q as te}from"./model.d6c87741.js";/* empty css               */const oe=q({__name:"base-info",emits:["changeStep"],setup(m,{emit:i}){const{setLoading:d}=D(!1),r=B(),c=g(),s=g({id:"",corp:"",key:"",remark:""});(async(l={id:r.query.id})=>{d(!0);try{const{data:o}=await F(l);s.value.id=o.id,s.value.corp=o.corp,s.value.key=o.key,s.value.remark=o.remark}catch{}finally{d(!1)}})();const t=async()=>{var o;await((o=c.value)==null?void 0:o.validate())||i("changeStep","forward",{...s.value})};return(l,o)=>{const v=L,u=N,n=U,w=A,S=O,$=C,h=R;return f(),k(h,{ref_key:"formRef",ref:c,model:s.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e(n,{field:"corp",label:l.$t("key.label.corp"),rules:[{required:!0,message:l.$t("key.error.corp.required")}]},{default:a(()=>[e(u,{modelValue:s.value.corp,"onUpdate:modelValue":o[0]||(o[0]=b=>s.value.corp=b),placeholder:l.$t("key.placeholder.corp")},{default:a(()=>[e(v,{value:"OpenAI"},{default:a(()=>[p("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"key",label:l.$t("key.label.key"),rules:[{required:!0,message:l.$t("key.error.key.required")}]},{default:a(()=>[e(w,{modelValue:s.value.key,"onUpdate:modelValue":o[1]||(o[1]=b=>s.value.key=b),placeholder:l.$t("key.placeholder.update.key")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"remark",label:l.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(S,{modelValue:s.value.remark,"onUpdate:modelValue":o[2]||(o[2]=b=>s.value.remark=b),placeholder:l.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(n,null,{default:a(()=>[e($,{type:"primary",onClick:t},{default:a(()=>[p(_(l.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const le=I(oe,[["__scopeId","data-v-38b7c44b"]]),se=q({__name:"advanced",emits:["changeStep"],setup(m,{emit:i}){const{setLoading:d}=D(!0),r=B(),c=g([]);(async()=>{d(!0);try{const{data:u}=await te();c.value=u.items}catch{}finally{d(!1)}})();const y=g(),t=g({models:[]});(async(u={id:r.query.id})=>{d(!0);try{const{data:n}=await F(u);t.value.models=n.models}catch{}finally{d(!1)}})();const o=async()=>{var n;await((n=y.value)==null?void 0:n.validate())||i("changeStep","submit",{...t.value})},v=()=>{i("changeStep","backward")};return(u,n)=>{const w=L,S=N,$=U,h=C,b=T,M=R;return f(),k(M,{ref_key:"formRef",ref:y,model:t.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e($,{field:"models",label:u.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(S,{modelValue:t.value.models,"onUpdate:modelValue":n[0]||(n[0]=V=>t.value.models=V),placeholder:u.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(f(!0),K(P,null,j(c.value,V=>(f(),k(w,{key:V.id,value:V.id,label:V.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e($,null,{default:a(()=>[e(b,null,{default:a(()=>[e(h,{type:"secondary",onClick:v},{default:a(()=>[p(_(u.$t("key.button.prev")),1)]),_:1}),e(h,{type:"primary",onClick:o},{default:a(()=>[p(_(u.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ne=I(se,[["__scopeId","data-v-2654ac66"]]);const re={},ue={class:"success-wrap"};function de(m,i){const d=z,r=C,c=T;return f(),K("div",ue,[e(d,{status:"success",title:m.$t("key.success.title"),subtitle:m.$t("key.success.update.subTitle")},null,8,["title","subtitle"]),e(c,{size:16},{default:a(()=>[e(r,{key:"finish",type:"secondary",onClick:i[0]||(i[0]=s=>m.$router.push({name:"KeyModelList"}))},{default:a(()=>[p(_(m.$t("key.button.return")),1)]),_:1}),e(r,{key:"again",type:"primary",onClick:i[1]||(i[1]=s=>m.$router.push({name:"KeyDetail",query:{id:`${m.$route.query.id}`}}))},{default:a(()=>[p(_(m.$t("key.button.view")),1)]),_:1})]),_:1})])}const ce=I(re,[["render",de],["__scopeId","data-v-016ee704"]]),pe={class:"container"},ie={class:"wrapper"},_e={name:"KeyUpdate"},me=q({..._e,setup(m){const{loading:i,setLoading:d}=D(!1),r=g(1),c=g({}),s=async()=>{d(!0);try{await ae(c.value),r.value=3,c.value={}}catch{}finally{d(!1)}},y=(t,l)=>{if(typeof t=="number"){r.value=t;return}if(t==="forward"||t==="submit"){if(c.value={...c.value,...l},t==="submit"){s();return}r.value+=1}else t==="backward"&&(r.value-=1)};return(t,l)=>{const o=H,v=W,u=X,n=Y,w=Z,S=x,$=ee;return f(),K("div",pe,[e(u,{class:"container-breadcrumb"},{default:a(()=>[e(v,null,{default:a(()=>[e(o)]),_:1}),e(v,null,{default:a(()=>[p(_(t.$t("menu.key")),1)]),_:1}),e(v,null,{default:a(()=>[p(_(t.$t("menu.key.update")),1)]),_:1})]),_:1}),e($,{loading:G(i),style:{width:"100%"}},{default:a(()=>[e(S,{class:"general-card",bordered:!1},{title:a(()=>[p(_(t.$t("key.title.update")),1)]),default:a(()=>[E("div",ie,[e(w,{current:r.value,"onUpdate:current":l[0]||(l[0]=h=>r.value=h),style:{width:"580px"},"line-less":"",class:"steps"},{default:a(()=>[e(n,{description:t.$t("key.subTitle.baseInfo")},{default:a(()=>[p(_(t.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(n,{description:t.$t("key.subTitle.advanced")},{default:a(()=>[p(_(t.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(n,{description:t.$t("key.subTitle.update.finish")},{default:a(()=>[p(_(t.$t("key.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(f(),k(J,null,[r.value===1?(f(),k(le,{key:0,onChangeStep:y})):r.value===2?(f(),k(ne,{key:1,onChangeStep:y})):r.value===3?(f(),k(ce,{key:2,onChangeStep:y})):Q("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const Ce=I(me,[["__scopeId","data-v-aab6c6d1"]]);export{Ce as default};
