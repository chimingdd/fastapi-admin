import{u as z,F as G,_ as H}from"./index.1042584e.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                */import{d as J,e as d,B as _,C as b,aH as a,aG as t,aL as m,aM as c,F,aJ as M,aI as q,aD as A,u as W,aK as j,aF as Q,bO as Y,bK as Z,bL as x,b2 as ee,bW as ae,aS as le,bX as oe,aT as te,aU as re,bl as se,b5 as ne,bR as de,bq as ue,g as ie}from"./arco.98c6b47e.js";import{u as me}from"./loading.145cbdec.js";import{f as ce}from"./vue.a64f92cf.js";import{d as pe}from"./key.c6c6ab28.js";import{q as _e}from"./corp.9dff6a50.js";import{b as fe}from"./model.01e56f77.js";import{f as be}from"./agent.f7f0b991.js";import"./chart.30821537.js";const ye={class:"container"},ke={class:"wrapper"},ve={class:"submit-btn"},ge={name:"KeyCreate"},he=J({...ge,setup(Ve){const{loading:D,setLoading:s}=me(!1),{proxy:I}=ie(),S=ce(),{t:u}=z(),p=d([]),y=new Map;(async()=>{s(!0);try{const{data:e}=await _e();p.value=e.items;for(let l=0;l<p.value.length;l+=1)y.set(p.value[l].id,p.value[l])}catch{}finally{s(!1)}})();const i=d(u("key.placeholder.key")),U=async()=>{switch(y.get(r.value.corp).code){case"Baidu":i.value=u("key.placeholder.key.baidu");break;case"Xfyun":i.value=u("key.placeholder.key.xfyun");break;case"DeepSeek-Baidu":i.value=u("key.placeholder.key.deepseek.baidu");break;case"VolcEngine":i.value=u("key.placeholder.key.volcengine");break;default:i.value=u("key.placeholder.key")}},k=d([]);(async()=>{s(!0);try{const{data:e}=await fe();k.value=e.items}catch{}finally{s(!1)}})();const v=d([]);(async()=>{s(!0);try{const{data:e}=await be();v.value=e.items}catch{}finally{s(!1)}})();const g=d(),r=d({corp:"",key:"",weight:d(20),remark:"",models:[],model_agents:[],is_agents_only:!1,is_never_disable:!1}),K=async()=>{var l;if(!await((l=g.value)==null?void 0:l.validate())){s(!0);try{await pe(r.value).then(()=>{I.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),S.push({name:"ModelKeyList"})})}catch{}finally{s(!1)}}};return(e,l)=>{const h=G,f=j,T=Q,V=Y,w=Z,$=x,n=ee,C=ae,R=le,E=oe,L=te,B=re,N=se,O=ne,P=de,X=ue;return _(),b("div",ye,[a(T,{class:"container-breadcrumb"},{default:t(()=>[a(f,null,{default:t(()=>[a(h)]),_:1}),a(f,null,{default:t(()=>[m(c(e.$t("menu.key")),1)]),_:1}),a(f,null,{default:t(()=>[m(c(e.$t("menu.key.create")),1)]),_:1})]),_:1}),a(X,{loading:W(D),style:{width:"100%"}},{default:t(()=>[a(P,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:t(()=>[F("div",ke,[a(O,{ref_key:"formRef",ref:g,model:r.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:t(()=>[a(V,{orientation:"left"},{default:t(()=>[m(c(e.$t("common.title.baseInfo")),1)]),_:1}),a(n,{field:"corp",label:e.$t("key.label.corp"),rules:[{required:!0,message:e.$t("key.error.corp.required")}]},{default:t(()=>[a($,{modelValue:r.value.corp,"onUpdate:modelValue":l[0]||(l[0]=o=>r.value.corp=o),placeholder:e.$t("key.placeholder.corp"),scrollbar:!1,"allow-search":"",onChange:U},{default:t(()=>[(_(!0),b(M,null,q(p.value,o=>(_(),A(w,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"key",label:e.$t("key.label.key"),rules:[{required:!0,message:e.$t("key.error.key.required")}]},{default:t(()=>[a(C,{modelValue:r.value.key,"onUpdate:modelValue":l[1]||(l[1]=o=>r.value.key=o),placeholder:i.value,"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"weight",label:e.$t("model.agent.label.weight")},{default:t(()=>[a(R,{modelValue:r.value.weight,"onUpdate:modelValue":l[2]||(l[2]=o=>r.value.weight=o),precision:0,min:1,max:100,placeholder:e.$t("model.agent.placeholder.weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"remark",label:e.$t("key.label.remark")},{default:t(()=>[a(C,{modelValue:r.value.remark,"onUpdate:modelValue":l[3]||(l[3]=o=>r.value.remark=o),placeholder:e.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{orientation:"left"},{default:t(()=>[m(c(e.$t("common.title.advanced")),1)]),_:1}),a(n,{field:"models",label:e.$t("key.label.models")},{default:t(()=>[a(E,{modelValue:r.value.models,"onUpdate:modelValue":l[4]||(l[4]=o=>r.value.models=o),placeholder:e.$t("key.placeholder.models"),"allow-search":!0,"allow-clear":!0,"tree-checkable":!0,data:k.value,"max-tag-count":3,scrollbar:!1,"tree-checked-strategy":"child"},null,8,["modelValue","placeholder","data"])]),_:1},8,["label"]),a(n,{field:"model_agents",label:e.$t("key.label.modelAgents")},{default:t(()=>[a($,{modelValue:r.value.model_agents,"onUpdate:modelValue":l[5]||(l[5]=o=>r.value.model_agents=o),placeholder:e.$t("key.placeholder.modelAgents"),"max-tag-count":3,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:t(()=>[(_(!0),b(M,null,q(v.value,o=>(_(),A(w,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"is_agents_only",label:e.$t("key.label.isAgentsOnly")},{default:t(()=>[a(L,{modelValue:r.value.is_agents_only,"onUpdate:modelValue":l[6]||(l[6]=o=>r.value.is_agents_only=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(n,{field:"is_never_disable",label:e.$t("key.label.is_never_disable")},{default:t(()=>[a(L,{modelValue:r.value.is_never_disable,"onUpdate:modelValue":l[7]||(l[7]=o=>r.value.is_never_disable=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(N,null,{default:t(()=>[F("div",ve,[a(B,{type:"secondary",onClick:l[8]||(l[8]=o=>e.$router.push({name:"ModelKeyList"}))},{default:t(()=>[m(c(e.$t("button.cancel")),1)]),_:1}),a(B,{type:"primary",onClick:K},{default:t(()=>[m(c(e.$t("button.submit")),1)]),_:1})])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Je=H(he,[["__scopeId","data-v-bd4b7c8c"]]);export{Je as default};
