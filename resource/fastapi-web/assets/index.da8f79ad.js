import{_ as F,E as j}from"./index.8811ab93.js";/* empty css               *//* empty css                */import{d as C,e as h,B as g,aD as $,aG as l,aH as e,aL as n,aM as v,bB as A,bC as R,b2 as B,b1 as G,bK as J,aU as S,b5 as L,C as M,aJ as P,aI as H,aE as D,aS as X,bX as Q,bi as E,aT as W,bz as Y,F as Z,bs as x,u as ee,aK as le,aF as ae,bL as te,bM as oe,bJ as re,bN as ue}from"./arco.aed15247.js";import{u as I}from"./loading.b5911e1d.js";import{d as N,e as de}from"./model.50451186.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               */import{h as T}from"./vue.0cc5b64a.js";/* empty css               *//* empty css                */import{e as ne}from"./agent.0082dedc.js";/* empty css               */import"./chart.9aa6eafa.js";import"./base.87fcf6e2.js";const se=C({__name:"base-info",emits:["changeStep"],setup(y,{emit:f}){const{setLoading:p}=I(!0),m=T(),_=h(),d=h({id:"",corp:"",name:"",model:"",type:"",remark:"",status:1});(async(u={id:m.query.id})=>{p(!0);try{const{data:o}=await N(u);d.value.id=o.id,d.value.corp=o.corp,d.value.name=o.name,d.value.model=o.model,d.value.type=String(o.type),d.value.remark=o.remark,d.value.status=o.status}catch{}finally{p(!1)}})();const a=async()=>{var o;await((o=_.value)==null?void 0:o.validate())||f("changeStep","forward",{...d.value})};return(u,o)=>{const i=A,r=R,t=B,k=G,b=J,q=S,w=L;return g(),$(w,{ref_key:"formRef",ref:_,model:d.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:l(()=>[e(t,{field:"corp",label:u.$t("model.label.corp"),rules:[{required:!0,message:u.$t("model.error.corp.required")}]},{default:l(()=>[e(r,{modelValue:d.value.corp,"onUpdate:modelValue":o[0]||(o[0]=c=>d.value.corp=c),placeholder:u.$t("model.placeholder.corp")},{default:l(()=>[e(i,{value:"OpenAI"},{default:l(()=>[n("OpenAI")]),_:1}),e(i,{value:"Midjourney"},{default:l(()=>[n("Midjourney")]),_:1}),e(i,{value:"GLM"},{default:l(()=>[n("\u667A\u8C31AI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"name",label:u.$t("model.label.name"),rules:[{required:!0,message:u.$t("model.error.name.required")}]},{default:l(()=>[e(k,{modelValue:d.value.name,"onUpdate:modelValue":o[1]||(o[1]=c=>d.value.name=c),placeholder:u.$t("model.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"model",label:u.$t("model.label.model"),rules:[{required:!0,message:u.$t("model.error.model.required")},{message:u.$t("model.error.model.pattern")}]},{default:l(()=>[e(k,{modelValue:d.value.model,"onUpdate:modelValue":o[2]||(o[2]=c=>d.value.model=c),placeholder:u.$t("model.placeholder.model")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"type",label:u.$t("model.label.type"),rules:[{required:!0,message:u.$t("model.error.type.required")}]},{default:l(()=>[e(r,{modelValue:d.value.type,"onUpdate:modelValue":o[3]||(o[3]=c=>d.value.type=c),placeholder:u.$t("model.placeholder.type")},{default:l(()=>[e(i,{value:"1"},{default:l(()=>[n("\u6587\u751F\u6587")]),_:1}),e(i,{value:"2"},{default:l(()=>[n("\u6587\u751F\u56FE")]),_:1}),e(i,{value:"3"},{default:l(()=>[n("\u56FE\u751F\u6587")]),_:1}),e(i,{value:"4"},{default:l(()=>[n("\u56FE\u751F\u56FE")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(t,{field:"remark",label:u.$t("model.label.remark"),rules:[{required:!1}]},{default:l(()=>[e(b,{modelValue:d.value.remark,"onUpdate:modelValue":o[4]||(o[4]=c=>d.value.remark=c),placeholder:u.$t("model.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(t,null,{default:l(()=>[e(q,{type:"primary",onClick:a},{default:l(()=>[n(v(u.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const me=F(se,[["__scopeId","data-v-0f21da28"]]),ie=C({__name:"advanced",emits:["changeStep"],setup(y,{emit:f}){const{setLoading:p}=I(!0),m=T(),_=h([]);(async()=>{p(!0);try{const{data:r}=await ne();_.value=r.items}catch{}finally{p(!1)}})();const V=h(),a=h({prompt_ratio:1,completion_ratio:1,data_format:"",is_enable_model_agent:!1,model_agents:[],is_public:!0});(async(r={id:m.query.id})=>{p(!0);try{const{data:t}=await N(r);a.value.prompt_ratio=t.prompt_ratio,a.value.completion_ratio=t.completion_ratio,a.value.data_format=String(t.data_format),a.value.is_enable_model_agent=t.is_enable_model_agent,a.value.model_agents=t.model_agents,a.value.is_public=t.is_public}catch{}finally{p(!1)}})();const o=async()=>{var t;await((t=V.value)==null?void 0:t.validate())||f("changeStep","submit",{...a.value})},i=()=>{f("changeStep","backward")};return(r,t)=>{const k=X,b=B,q=Q,w=E,c=W,z=A,K=R,U=S,O=L;return g(),$(O,{ref_key:"formRef",ref:V,model:a.value,class:"form","label-col-props":{span:5},"wrapper-col-props":{span:18}},{default:l(()=>[e(b,{field:"prompt_ratio",label:r.$t("model.label.promptRatio"),rules:[{required:!0,message:r.$t("model.error.promptRatio.required")}]},{default:l(()=>[e(k,{modelValue:a.value.prompt_ratio,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.prompt_ratio=s),min:1,placeholder:r.$t("model.placeholder.promptRatio")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"completion_ratio",label:r.$t("model.label.completionRatio"),rules:[{required:!0,message:r.$t("model.error.completionRatio.required")}]},{default:l(()=>[e(k,{modelValue:a.value.completion_ratio,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.completion_ratio=s),min:1,placeholder:r.$t("model.placeholder.completionRatio")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(b,{field:"data_format",label:r.$t("model.label.dataFormat"),rules:[{required:!0,message:r.$t("model.error.dataFormat.required")}]},{default:l(()=>[e(w,{size:"large"},{default:l(()=>[e(q,{modelValue:a.value.data_format,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.data_format=s),value:"1"},{default:l(()=>[n("\u7EDF\u4E00\u683C\u5F0F")]),_:1},8,["modelValue"]),e(q,{modelValue:a.value.data_format,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.data_format=s),value:"2"},{default:l(()=>[n("\u5B98\u65B9\u683C\u5F0F")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),e(b,{field:"is_public",label:r.$t("model.label.isPublic"),rules:[{required:!0}]},{default:l(()=>[e(c,{modelValue:a.value.is_public,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.is_public=s)},null,8,["modelValue"])]),_:1},8,["label"]),e(b,{field:"is_enable_model_agent",label:r.$t("model.label.isEnableModelAgent")},{default:l(()=>[e(c,{modelValue:a.value.is_enable_model_agent,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.is_enable_model_agent=s)},null,8,["modelValue"])]),_:1},8,["label"]),a.value.is_enable_model_agent?(g(),$(b,{key:0,field:"model_agents",label:r.$t("model.label.modelAgents"),rules:[{required:!0,message:r.$t("model.error.modelAgents.required")}]},{default:l(()=>[e(K,{modelValue:a.value.model_agents,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.model_agents=s),placeholder:r.$t("model.placeholder.modelAgents"),"max-tag-count":3,multiple:"","allow-clear":""},{default:l(()=>[(g(!0),M(P,null,H(_.value,s=>(g(),$(z,{key:s.id,value:s.id,label:s.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):D("",!0),e(b,null,{default:l(()=>[e(w,null,{default:l(()=>[e(U,{type:"secondary",onClick:i},{default:l(()=>[n(v(r.$t("model.button.prev")),1)]),_:1}),e(U,{type:"primary",onClick:o},{default:l(()=>[n(v(r.$t("model.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const pe=F(ie,[["__scopeId","data-v-235212dd"]]);const _e={},ce={class:"success-wrap"};function fe(y,f){const p=Y,m=S,_=E;return g(),M("div",ce,[e(p,{status:"success",title:y.$t("model.success.title"),subtitle:y.$t("model.success.update.subTitle")},null,8,["title","subtitle"]),e(_,{size:16},{default:l(()=>[e(m,{key:"finish",type:"secondary",onClick:f[0]||(f[0]=d=>y.$router.push({name:"ModelList"}))},{default:l(()=>[n(v(y.$t("model.button.return")),1)]),_:1}),e(m,{key:"again",type:"primary",onClick:f[1]||(f[1]=d=>y.$router.push({name:"ModelDetail",query:{id:`${y.$route.query.id}`}}))},{default:l(()=>[n(v(y.$t("model.button.view")),1)]),_:1})]),_:1})])}const be=F(_e,[["render",fe],["__scopeId","data-v-829f16db"]]),ve={class:"container"},ge={class:"wrapper"},ye={name:"ModelUpdate"},$e=C({...ye,setup(y){const{loading:f,setLoading:p}=I(!1),m=h(1),_=h({}),d=async()=>{p(!0);try{await de(_.value),m.value=3,_.value={}}catch{}finally{p(!1)}},V=(a,u)=>{if(typeof a=="number"){m.value=a;return}if(a==="forward"||a==="submit"){if(_.value={..._.value,...u},a==="submit"){d();return}m.value+=1}else a==="backward"&&(m.value-=1)};return(a,u)=>{const o=j,i=le,r=ae,t=te,k=oe,b=re,q=ue;return g(),M("div",ve,[e(r,{class:"container-breadcrumb"},{default:l(()=>[e(i,null,{default:l(()=>[e(o)]),_:1}),e(i,null,{default:l(()=>[n(v(a.$t("menu.model")),1)]),_:1}),e(i,null,{default:l(()=>[n(v(a.$t("menu.model.update")),1)]),_:1})]),_:1}),e(q,{loading:ee(f),style:{width:"100%"}},{default:l(()=>[e(b,{class:"general-card",bordered:!1},{title:l(()=>[n(v(a.$t("model.title.update")),1)]),default:l(()=>[Z("div",ge,[e(k,{current:m.value,"onUpdate:current":u[0]||(u[0]=w=>m.value=w),style:{width:"660px"},"line-less":"",class:"steps"},{default:l(()=>[e(t,{description:a.$t("model.subTitle.baseInfo")},{default:l(()=>[n(v(a.$t("model.title.baseInfo")),1)]),_:1},8,["description"]),e(t,{description:a.$t("model.subTitle.advanced")},{default:l(()=>[n(v(a.$t("model.title.advanced")),1)]),_:1},8,["description"]),e(t,{description:a.$t("model.subTitle.update.finish")},{default:l(()=>[n(v(a.$t("model.title.update.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(g(),$(x,null,[m.value===1?(g(),$(me,{key:0,onChangeStep:V})):m.value===2?(g(),$(pe,{key:1,onChangeStep:V})):m.value===3?(g(),$(be,{key:2,onChangeStep:V})):D("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const ze=F($e,[["__scopeId","data-v-b52a59e3"]]);export{ze as default};
