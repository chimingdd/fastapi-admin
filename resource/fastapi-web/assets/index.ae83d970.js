import{_ as ze,u as _a,J as ma,s as ca,A as pa,k as fa,B as va}from"./index.b2ce64ba.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css              */import{d as Ne,e as g,w as Me,bS as Pe,B as t,C as r,bn as v,aD as o,aG as e,aH as a,u as m,aL as i,aM as n,aE as ya,g as Te,bA as ka,bB as ha,ad as ba,bC as ga,bD as Re,bE as wa,bi as He,bb as Fa,b6 as Ea,r as Ue,c as me,bs as $a,b as Da,aJ as O,aI as Y,F as L,D as Ca,bT as Se,n as Va,aK as Ba,aF as qa,bF as xa,bG as Aa,b2 as Ia,bH as Ua,b1 as Sa,aS as La,bU as za,bI as Na,b5 as Ma,bJ as Pa,ab as Ta,aU as Ra,bj as Ha,bk as Oa,bl as Ya,b4 as ja,bK as Ja,bM as Ga,aV as Ka,a_ as Qa,bN as Wa}from"./arco.1da04b1e.js";import{u as Oe}from"./loading.a94ed815.js";import{q as Xa}from"./common.d049c2d1.js";import{V as Le,q as Za,c as et,a as at,s as tt,b as lt}from"./styles.bf2056c1.js";import{f as ut}from"./app.089adf34.js";import{b as ot}from"./dashboard.5b1592ea.js";import{c as ce,S as nt}from"./sortable.esm.44bb1dca.js";import{q as st}from"./model.dbe0bc97.js";import{f as it}from"./agent.1c42e289.js";/* empty css               *//* empty css                *//* empty css                */import{u as dt}from"./vue.e32cf078.js";import"./chart.4f3c6f92.js";const rt={style:{margin:"10px 0 30px 10px"}},_t={key:1},mt={key:1},ct={key:1},pt={key:1},ft={key:1},vt={key:1},yt={key:1},kt={key:1},ht={key:1},bt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},gt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},wt={key:1},Ft={key:1},Et={key:1},$t={key:1},Dt={key:1},Ct={key:1},Vt={key:1},Bt={key:1},qt={key:1},xt={key:1},At={key:1},It={key:1},Ut={key:1},St={key:1},Lt={key:1},zt={key:1},Nt={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Mt={key:1},Pt={key:1},Tt={key:1},Rt={key:1},Ht={key:1},Ot={key:1},Yt={key:1},jt={key:1},Jt={key:1},Gt={key:1},Kt={key:1},Qt={key:1},Wt={key:1},Xt={key:1},Zt={key:1},el={key:1},al={key:1},tl={key:1},ll={key:1},ul={key:1},ol={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},nl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},sl={key:1},il={key:1},dl={key:1},rl={key:1},_l={key:1},ml={key:1},cl={key:1},pl={key:1},fl={key:1},vl={key:1},yl={key:1},kl={key:1},hl={key:1},bl={key:1},gl={key:1},wl={key:1},Fl={key:1},El={key:1},$l={key:1},Dl={key:1},Cl={key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},Vl={key:1},Bl={key:1},ql={name:"ChatDetail"},xl=Ne({...ql,props:{id:{type:String,default:""}},setup(pe){const oe=pe,{loading:_,setLoading:w}=Oe(!0),l=g({}),{copy:Z,copied:j}=dt(),{proxy:ee}=Te();(async(F={id:oe.id})=>{w(!0);try{const{data:$}=await Za(F);l.value=$}catch{}finally{w(!1)}})();const I=F=>{Z(F)};Me(j,()=>{j.value&&ee.$message.success("\u590D\u5236\u6210\u529F")});const S=async(F,$)=>{const{data:f}=await et({id:F,field:$});Z(f.value)};return(F,$)=>{const f=ka,c=ha,A=ba,p=ga,h=Re,z=wa,T=He,N=Fa,M=Ea,J=Pe("permission");return t(),r("div",rt,[v((t(),o(z,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[a(p,{label:"Trace ID",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",_t,[i(n(l.value.trace_id)+" ",1),a(A,{class:"copy-btn",onClick:$[0]||($[0]=B=>I(l.value.trace_id))})]))]),_:1}),a(p,{label:"Host",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",mt,n(l.value.host||"-"),1))]),_:1}),a(p,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",ct,[i(n(l.value.creator)+" ",1),a(A,{class:"copy-btn",onClick:$[1]||($[1]=B=>S(l.value.id,"creator"))})]))]),_:1}),a(p,{label:"\u7528\u6237ID"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",pt,n(l.value.user_id||"-"),1))]),_:1}),a(p,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",ft,n(l.value.app_id||"-"),1))]),_:1}),a(p,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",vt,n(l.value.provider_name),1))]),_:1}),a(p,{label:"\u6A21\u578B"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",yt,n(l.value.model||"-"),1))]),_:1}),a(p,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",kt,n(F.$t(`dict.model_type.${l.value.model_type}`)),1))]),_:1}),a(p,{label:"\u6D41\u5F0F"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",ht,n(F.$t(`chat.dict.stream.${l.value.stream||!1}`)),1))]),_:1}),a(p,{label:"\u63D0\u95EE",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",bt,n(l.value.prompt||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",gt,n(l.value.completion||"-"),1))]),_:1}),a(p,{label:"\u5206\u7EC4\u540D\u79F0"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",wt,n(l.value.group_name||"-"),1))]),_:1}),a(p,{label:"\u5206\u7EC4\u6298\u6263",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Ft,n(l.value.discount>0?Number((l.value.discount*100).toFixed(2))+"%":"-"),1))]),_:1}),a(p,{label:"\u63D0\u95EE\u500D\u7387"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Et,n(l.value.model_type!==100?l.value.text_quota.prompt_ratio||"-":l.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54\u500D\u7387",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",$t,n(l.value.model_type!==100?l.value.text_quota.completion_ratio||"-":l.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),a(p,{label:"\u63D0\u95EE\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Dt,n(l.value.prompt_tokens||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Ct,n(l.value.completion_tokens||"-"),1))]),_:1}),a(p,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Vt,n(l.value.cache_write_tokens||"-"),1))]),_:1}),a(p,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Bt,n(l.value.cache_hit_tokens||"-"),1))]),_:1}),a(p,{label:"\u641C\u7D22\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",qt,n(l.value.search_tokens||"-"),1))]),_:1}),a(p,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",xt,n(l.value.total_tokens?l.value.total_tokens:l.value.status===1&&l.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),a(p,{label:"\u8FDE\u63A5\u8017\u65F6"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",At,[l.value.conn_time>3e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>15e3?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>5e3?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",It,[l.value.duration>18e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>12e4?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>9e4?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u603B\u8017\u65F6"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Ut,[l.value.total_time>18e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>12e4?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>9e4?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u7ED3\u679C"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",St,[l.value.status===1?(t(),o(h,{key:0,color:"green"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===2?(t(),o(h,{key:1,color:"gold"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===3?(t(),o(h,{key:2,color:"orange"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):(t(),o(h,{key:3,color:"red"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1}))]))]),_:1}),a(p,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Lt,n(l.value.client_ip||"-"),1))]),_:1}),a(p,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",zt,n(l.value.req_time||"-"),1))]),_:1}),a(p,{label:"\u9519\u8BEF\u4FE1\u606F"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Nt,n(l.value.err_msg||"-"),1))]),_:1})]),_:1})),[[J,["reseller","user"]]]),v((t(),o(z,{column:2,bordered:"","value-style":{width:"350px",padding:"5px 8px 5px 20px"}},{default:e(()=>[a(p,{label:"Trace ID",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Mt,[i(n(l.value.trace_id)+" ",1),a(A,{class:"copy-btn",onClick:$[2]||($[2]=B=>I(l.value.trace_id))})]))]),_:1}),a(p,{label:"Host"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Pt,n(l.value.host||"-"),1))]),_:1}),a(p,{label:"\u8C03\u7528\u5BC6\u94A5",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Tt,[i(n(l.value.is_smart_match?"-":l.value.creator)+" ",1),l.value.is_smart_match?ya("",!0):(t(),o(A,{key:0,class:"copy-btn",onClick:$[3]||($[3]=B=>S(l.value.id,"creator"))}))]))]),_:1}),a(p,{label:"\u7528\u6237ID"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Rt,n(l.value.is_smart_match?"-":l.value.user_id||"-"),1))]),_:1}),a(p,{label:"\u5E94\u7528ID",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Ht,n(l.value.is_smart_match?"-":l.value.app_id||"-"),1))]),_:1}),a(p,{label:"\u63D0\u4F9B\u5546"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Ot,n(l.value.provider_name),1))]),_:1}),a(p,{label:"\u6A21\u578B\u7C7B\u578B"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Yt,n(F.$t(`dict.model_type.${l.value.model_type}`)),1))]),_:1}),a(p,{label:"\u8BF7\u6C42\u6A21\u578B\u540D\u79F0"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",jt,n(l.value.model_name||"-"),1))]),_:1}),a(p,{label:"\u8BF7\u6C42\u6A21\u578B"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Jt,n(l.value.model||"-"),1))]),_:1}),a(p,{label:"\u771F\u5B9E\u6A21\u578B\u540D\u79F0"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Gt,n(l.value.real_model_name),1))]),_:1}),a(p,{label:"\u771F\u5B9E\u6A21\u578B"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Kt,n(l.value.real_model),1))]),_:1}),a(p,{label:"\u6D41\u5F0F"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Qt,n(F.$t(`chat.dict.stream.${l.value.stream||!1}`)),1))]),_:1}),a(p,{label:"\u542F\u7528\u540E\u5907"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Wt,n(F.$t(`chat.dict.is_enable_fallback.${l.value.is_enable_fallback||!1}`)),1))]),_:1}),a(p,{label:"\u540E\u5907\u4EE3\u7406"},{default:e(()=>{var B,U;return[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Xt,n(((U=(B=l.value)==null?void 0:B.fallback_config)==null?void 0:U.model_agent_name)||"-"),1))]}),_:1}),a(p,{label:"\u540E\u5907\u6A21\u578B"},{default:e(()=>{var B,U;return[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Zt,n(((U=(B=l.value)==null?void 0:B.fallback_config)==null?void 0:U.model)||"-"),1))]}),_:1}),a(p,{label:"\u542F\u7528\u8F6C\u53D1"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",el,n(F.$t(`chat.dict.is_enable_forward.${l.value.is_enable_forward||!1}`)),1))]),_:1}),a(p,{label:"\u8F6C\u53D1\u89C4\u5219"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",al,n(l.value.is_enable_forward?F.$t(`chat.dict.forward_rule.${l.value.forward_config.forward_rule||"1"}`):"-"),1))]),_:1}),a(p,{label:"\u542F\u7528\u4EE3\u7406",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",tl,n(F.$t(`chat.dict.is_enable_model_agent.${l.value.is_enable_model_agent||!1}`)),1))]),_:1}),a(p,{label:"\u4EE3\u7406\u540D\u79F0"},{default:e(()=>{var B,U;return[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",ll,n(((U=(B=l.value)==null?void 0:B.model_agent)==null?void 0:U.name)||"-"),1))]}),_:1}),a(p,{label:"\u5BC6\u94A5"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",ul,[i(n(l.value.key?l.value.key.length>0?l.value.key.substr(0,l.value.key.length/2>10?10:l.value.key.length/2)+"************************************"+l.value.key.substr(-(l.value.key.length/2>5?5:l.value.key.length/2)):l.value.key:"-")+" ",1),a(A,{class:"copy-btn",onClick:$[4]||($[4]=B=>S(l.value.id,"key"))})]))]),_:1}),a(p,{label:"\u63D0\u95EE",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",ol,n(l.value.prompt||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",nl,n(l.value.completion||"-"),1))]),_:1}),a(p,{label:"\u5206\u7EC4\u540D\u79F0",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",sl,n(l.value.group_name||"-"),1))]),_:1}),a(p,{label:"\u5206\u7EC4\u6298\u6263"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",il,n(l.value.discount>0?Number((l.value.discount*100).toFixed(2))+"%":"-"),1))]),_:1}),a(p,{label:"\u63D0\u95EE\u500D\u7387",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",dl,n(l.value.model_type!==100?l.value.text_quota.prompt_ratio||"-":l.value.multimodal_quota.text_quota.prompt_ratio||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54\u500D\u7387"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",rl,n(l.value.model_type!==100?l.value.text_quota.completion_ratio||"-":l.value.multimodal_quota.text_quota.completion_ratio||"-"),1))]),_:1}),a(p,{label:"\u63D0\u95EE\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",_l,n(l.value.prompt_tokens||"-"),1))]),_:1}),a(p,{label:"\u56DE\u7B54\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",ml,n(l.value.completion_tokens||"-"),1))]),_:1}),a(p,{label:"\u7F13\u5B58\u5199\u5165\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",cl,n(l.value.cache_write_tokens||"-"),1))]),_:1}),a(p,{label:"\u7F13\u5B58\u547D\u4E2D\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",pl,n(l.value.cache_hit_tokens||"-"),1))]),_:1}),a(p,{label:"\u641C\u7D22\u4EE4\u724C\u6570",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",fl,n(l.value.search_tokens||"-"),1))]),_:1}),a(p,{label:"\u82B1\u8D39\u4EE4\u724C\u6570"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",vl,n(l.value.total_tokens?l.value.total_tokens:l.value.status===1&&l.value.text_quota.billing_method===2?0:"-"),1))]),_:1}),a(p,{label:"\u8FDE\u63A5\u8017\u65F6",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",yl,[l.value.conn_time>1e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>5e3?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):l.value.conn_time>3e3?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.conn_time)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.conn_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u6301\u7EED\u65F6\u957F"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",kl,[l.value.duration>12e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>9e4?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):l.value.duration>6e4?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.duration)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.duration||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u603B\u8017\u65F6"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",hl,[l.value.total_time>12e4?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>9e4?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):l.value.total_time>6e4?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.total_time)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.total_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u5185\u8017"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",bl,[l.value.internal_time>500?(t(),o(h,{key:0,color:"red"},{default:e(()=>[i(n(l.value.internal_time)+" ms ",1)]),_:1})):l.value.internal_time>300?(t(),o(h,{key:1,color:"orange"},{default:e(()=>[i(n(l.value.internal_time)+" ms ",1)]),_:1})):l.value.internal_time>100?(t(),o(h,{key:2,color:"gold"},{default:e(()=>[i(n(l.value.internal_time)+" ms ",1)]),_:1})):(t(),o(h,{key:3,color:"green"},{default:e(()=>[i(n(l.value.internal_time||"-")+" ms",1)]),_:1}))]))]),_:1}),a(p,{label:"\u7ED3\u679C"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",gl,[l.value.status===1?(t(),o(h,{key:0,color:"green"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===2?(t(),o(h,{key:1,color:"gold"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):l.value.status===3?(t(),o(h,{key:2,color:"orange"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1})):(t(),o(h,{key:3,color:"red"},{default:e(()=>[i(n(F.$t(`chat.dict.status.${l.value.status}`)),1)]),_:1}))]))]),_:1}),a(p,{label:"\u672C\u5730IP"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",wl,n(l.value.local_ip||"-"),1))]),_:1}),a(p,{label:"\u5BA2\u6237\u7AEFIP"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Fl,n(l.value.client_ip||"-"),1))]),_:1}),a(p,{label:"\u8FDC\u7A0BIP",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",El,n(l.value.remote_ip||"-"),1))]),_:1}),a(p,{label:"\u8BF7\u6C42\u65F6\u95F4"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",$l,n(l.value.req_time||"-"),1))]),_:1}),a(p,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{widths:["200px"],rows:1})]),_:1})):(t(),r("span",Dl,n(l.value.created_at||"-"),1))]),_:1}),a(p,{label:"\u9519\u8BEF\u4FE1\u606F",span:2},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:1})]),_:1})):(t(),r("span",Cl,n(l.value.err_msg||"-"),1))]),_:1})]),_:1})),[[J,["admin"]]]),a(z,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[a(p,{span:2},{default:e(()=>[a(M,{type:"card"},{default:e(()=>[a(N,{key:"1",title:"\u63D0\u95EE\u4E0A\u4E0B\u6587"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:3})]),_:1})):(t(),o(T,{key:1,style:{"max-height":"220px",display:"block",overflow:"auto"}},{default:e(()=>[l.value.messages?(t(),o(m(Le),{key:0,path:"res",data:l.value.messages,"show-length":!0},null,8,["data"])):(t(),r("span",Vl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),v((t(),o(z,{layout:"inline-vertical",column:2,style:{"margin-top":"10px",position:"relative"}},{default:e(()=>[a(p,{span:2},{default:e(()=>[a(M,{type:"card"},{default:e(()=>[a(N,{key:"1",title:"\u6A21\u578B\u4EE3\u7406"},{default:e(()=>[m(_)?(t(),o(c,{key:0,animation:!0},{default:e(()=>[a(f,{rows:3})]),_:1})):(t(),o(T,{key:1},{default:e(()=>[l.value.model_agent?(t(),o(m(Le),{key:0,data:l.value.model_agent,"show-length":!0},null,8,["data"])):(t(),r("span",Bl,"-"))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})),[[J,["admin"]]])])}}});const Al=ze(xl,[["__scopeId","data-v-10af5a14"]]),Il={class:"container"},Ul={class:"action-icon"},Sl={class:"action-icon"},Ll={id:"tableSetting"},zl={style:{"margin-right":"4px",cursor:"move"}},Nl={class:"title"},Ml={name:"ChatList"},Pl=Ne({...Ml,setup(pe){const{loading:oe,setLoading:_}=Oe(!0),{t:w}=_a(),l=localStorage.getItem("userRole"),Z=Ue({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),j=()=>({app_id:g(),trace_id:g(),user_id:g(),key:"",models:[],model_agents:[],total_time:g(),status:g(),req_time:[Se().format("YYYY-MM-DD 00:00:00"),Se().format("YYYY-MM-DD 23:59:59")]}),ee=g([]),y=g(j()),I=g([]),S=g([]),F=g("medium"),$=g([]),f=g(!0),c=g(),A={current:1,pageSize:20,showTotal:!0,showPageSize:!0,pageSizeOptions:[20,50,100,500,1e3]},p=Ue({...A}),h=me(()=>[{name:w("size.mini"),value:"mini"},{name:w("size.small"),value:"small"},{name:w("size.medium"),value:"medium"},{name:w("size.large"),value:"large"}]),z=me(()=>[{title:w(l==="reseller"||l==="admin"?"chat.columns.user_id":"chat.columns.app_id"),dataIndex:l==="reseller"||l==="admin"?"user_id":"app_id",slotName:l==="reseller"||l==="admin"?"user_id":"app_id",align:"center",width:75},{title:w("chat.columns.model"),dataIndex:"model",slotName:"model",align:"center",ellipsis:!0,tooltip:!0},{title:w("chat.columns.prompt_tokens"),dataIndex:"prompt_tokens",slotName:"prompt_tokens",align:"center",width:75},{title:w("chat.columns.completion_tokens"),dataIndex:"completion_tokens",slotName:"completion_tokens",align:"center",width:75},{title:w("chat.columns.total_price"),dataIndex:"total_tokens",slotName:"total_tokens",align:"center"},{title:w("chat.columns.stream"),dataIndex:"stream",slotName:"stream",align:"center",width:60},{title:w("chat.columns.conn_time"),dataIndex:"conn_time",slotName:"conn_time",align:"center"},{title:w("chat.columns.duration"),dataIndex:"duration",slotName:"duration",align:"center"},{title:w("chat.columns.total_time"),dataIndex:"total_time",slotName:"total_time",align:"center"},{title:w("chat.columns.internal_time"),dataIndex:"internal_time",slotName:"internal_time",align:"center"},{title:w("chat.columns.status"),dataIndex:"status",slotName:"status",align:"center",width:65},{title:w("chat.columns.req_time"),dataIndex:"req_time",slotName:"req_time",align:"center",width:132},{title:w("chat.columns.operations"),dataIndex:"operations",slotName:"operations",align:"center",width:75}]);(l==="reseller"||l==="user")&&z.value.splice(9,1);const T=me(()=>[{label:w("chat.dict.status.1"),value:1},{label:w("chat.dict.status.2"),value:2},{label:w("chat.dict.status.-1"),value:-1}]);l==="admin"&&T.value.push({label:w("chat.dict.status.3"),value:3},{label:w("chat.dict.status.-100"),value:-100});const N=async(s={...A,...y.value})=>{_(!0);try{const{data:d}=await at(s);ee.value=d.items,p.current=s.current,p.pageSize=s.pageSize,p.total=d.paging.total}catch{}finally{_(!1),c.value.selectAll(!1)}};N();const M=()=>{N({...A,...y.value})},J=s=>{N({...A,...y.value,current:s})},B=s=>{A.pageSize=s,N({...A,...y.value})},U=()=>{y.value=j(),M()},Ye=(s,d)=>{F.value=s},je=(s,d,C)=>{s?I.value.splice(C,0,d):I.value=S.value.filter(x=>x.dataIndex!==d.dataIndex)},fe=(s,d,C,x=!1)=>{const q=x?ce(s):s;return d>-1&&C>-1&&q.splice(d,1,q.splice(C,1,q[d]).pop()),q},Je=s=>{s&&Va(()=>{const d=document.getElementById("tableSetting");new nt(d,{onEnd(C){const{oldIndex:x,newIndex:q}=C;fe(I.value,x,q),fe(S.value,x,q)}})})};Me(()=>z.value,s=>{I.value=ce(s),I.value.forEach((d,C)=>{d.checked=!0}),S.value=ce(I.value)},{deep:!0,immediate:!0});const ve=g([]);l==="user"&&(async()=>{try{const{data:s}=await ut();ve.value=s.items}catch{}})();const ne=g([]);(async()=>{try{const{data:s}=await st();ne.value=s.items}catch{}})();const ye=g([]);l==="admin"&&(async()=>{try{const{data:s}=await it();ye.value=s.items}catch{}})();const{proxy:ae}=Te(),se=g(!1),ke=g(),Ge=s=>{se.value=!0,ke.value=s},Ke=()=>{se.value=!1},he=g(0),be=g(0),ge=async(s={...y.value})=>{const{data:d}=await ot(s);he.value=d.rpm,be.value=d.tpm};ge();let we;const Fe=()=>{clearInterval(we)},Ee=()=>{we=setInterval(ge,3e3)},$e=()=>{document.visibilityState==="hidden"?Fe():Ee()};$a(()=>{Ee(),document.addEventListener("visibilitychange",$e)}),Da(()=>{Fe(),document.removeEventListener("visibilitychange",$e)});const De=g(),G=g(!1),P=g({}),Qe=async s=>{var C;if(await((C=De.value)==null?void 0:C.validate())){G.value=!0,s(!1);return}s(),Ce({req_time:P.value.req_time,user_id:P.value.user_id})},We=()=>{G.value=!1},Ce=s=>{if($.value.length===0&&!s.req_time){G.value=!0;return}_(!0),s.ids=$.value,tt(s).then(d=>{_(!1),ae.$message.success("\u5BFC\u51FA\u6210\u529F"),c.value.selectAll(!1);const C=new Blob([d.data],{type:"application/vnd.ms-excel"}),x=window.URL.createObjectURL(C),q=document.createElement("a");q.href=x,q.setAttribute("download","\u804A\u5929\u65E5\u5FD7.xlsx"),document.body.appendChild(q),q.click(),document.body.removeChild(q),window.URL.revokeObjectURL(x)}).catch(d=>{ae.$message.error("\u5BFC\u51FA\u5931\u8D25, \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",d)})},Ve=g(),K=g(!1),V=g({status:[1,2,3,-1]}),Xe=async s=>{var C;if(await((C=Ve.value)==null?void 0:C.validate())){K.value=!0,s(!1);return}s(),Be({action:"time",value:V.value.value,user_id:V.value.user_id,status:V.value.status})},Ze=()=>{K.value=!1},ea=s=>{$.value=s,f.value=!s.length},Be=s=>{if($.value.length===0&&!s.value)K.value=!0;else{let d=`\u662F\u5426\u786E\u5B9A\u64CD\u4F5C\u6240\u9009\u7684${$.value.length}\u6761\u6570\u636E?`;switch(s.action){case"delete":d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u6240\u9009\u7684${$.value.length}\u6761\u6570\u636E?`;break;case"time":s.user_id?d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237ID: ${s.user_id} \u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`:d=`\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BF7\u6C42\u65F6\u95F4: ${s.value[0]} \u81F3 ${s.value[1]} \u7684\u6570\u636E?`;break}ae.$modal.warning({title:"\u8B66\u544A",titleAlign:"center",content:d,hideCancel:!1,onOk:()=>{_(!0),s.ids=$.value,lt(s).then(C=>{_(!1),ae.$message.success("\u64CD\u4F5C\u6210\u529F, \u4EFB\u52A1\u5DF2\u63D0\u4EA4"),M(),c.value.selectAll(!1)})}})}};return(s,d)=>{const C=ma,x=Ba,q=qa,te=xa,R=Aa,D=Ia,E=Ua,Q=Sa,H=La,le=za,ue=Na,ie=Ma,qe=Pa,aa=Ta,W=Ra,xe=ca,de=He,re=Ha,ta=pa,la=Oa,ua=Ya,oa=fa,na=va,X=ja,sa=Ja,b=Re,ia=Ga,da=Ka,Ae=Qa,ra=Wa,k=Pe("permission");return t(),r("div",Il,[a(q,{class:"container-breadcrumb"},{default:e(()=>[a(x,null,{default:e(()=>[a(C)]),_:1}),a(x,null,{default:e(()=>[i(n(s.$t("menu.chat")),1)]),_:1}),a(x,null,{default:e(()=>[i(n(s.$t("menu.chat.list")),1)]),_:1})]),_:1}),a(ra,{class:"general-card",bordered:!1,"header-style":{padding:"20px"},"body-style":{padding:"25px 20px 20px 20px"}},{default:e(()=>[a(ue,null,{default:e(()=>[a(E,{flex:1},{default:e(()=>[a(ie,{model:y.value,"label-col-props":{span:5},"wrapper-col-props":{span:18},"label-align":"left"},{default:e(()=>[v((t(),o(ue,{gutter:16},{default:e(()=>[v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"app_id",label:s.$t("chat.form.app_id")},{default:e(()=>[a(R,{modelValue:y.value.app_id,"onUpdate:modelValue":d[0]||(d[0]=u=>y.value.app_id=u),placeholder:s.$t("chat.form.selectDefault"),scrollbar:!1,"allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),r(O,null,Y(ve.value,u=>(t(),o(te,{key:u.app_id,value:u.app_id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[a(Q,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[1]||(d[1]=u=>y.value.trace_id=u),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"user_id",label:s.$t("chat.form.reseller.user_id")},{default:e(()=>[a(H,{modelValue:y.value.user_id,"onUpdate:modelValue":d[2]||(d[2]=u=>y.value.user_id=u),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"key",label:s.$t("chat.form.key")},{default:e(()=>[a(Q,{modelValue:y.value.key,"onUpdate:modelValue":d[3]||(d[3]=u=>y.value.key=u),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"trace_id",label:s.$t("chat.form.user.trace_id")},{default:e(()=>[a(Q,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[4]||(d[4]=u=>y.value.trace_id=u),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["user"]]]),v((t(),o(E,{span:8},{default:e(()=>[a(D,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[a(H,{modelValue:y.value.total_time,"onUpdate:modelValue":d[5]||(d[5]=u=>y.value.total_time=u),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})),[[k,["reseller"]]]),a(E,{span:8},{default:e(()=>[a(D,{field:"models",label:s.$t("chat.form.models")},{default:e(()=>[a(R,{modelValue:y.value.models,"onUpdate:modelValue":d[6]||(d[6]=u=>y.value.models=u),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),r(O,null,Y(ne.value,u=>(t(),o(te,{key:u.id,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:8},{default:e(()=>[a(D,{field:"status",label:s.$t("chat.form.status")},{default:e(()=>[a(R,{modelValue:y.value.status,"onUpdate:modelValue":d[7]||(d[7]=u=>y.value.status=u),placeholder:s.$t("chat.form.selectDefault"),options:m(T),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(E,{span:8},{default:e(()=>[a(D,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[a(le,{modelValue:y.value.req_time,"onUpdate:modelValue":d[8]||(d[8]=u=>y.value.req_time=u),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["reseller","user"]]]),v((t(),o(ue,{gutter:16},{default:e(()=>[a(E,{span:5},{default:e(()=>[a(D,{field:"trace_id",label:s.$t("chat.form.trace_id"),"label-col-props":{span:6}},{default:e(()=>[a(Q,{modelValue:y.value.trace_id,"onUpdate:modelValue":d[9]||(d[9]=u=>y.value.trace_id=u),placeholder:s.$t("chat.form.trace_id.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:6},{default:e(()=>[a(D,{field:"models",label:s.$t("chat.form.models"),"label-col-props":{span:5}},{default:e(()=>[a(R,{modelValue:y.value.models,"onUpdate:modelValue":d[10]||(d[10]=u=>y.value.models=u),placeholder:s.$t("chat.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),r(O,null,Y(ne.value,u=>(t(),o(te,{key:u.id,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:5},{default:e(()=>[a(D,{field:"key",label:s.$t("chat.form.key"),"label-col-props":{span:6}},{default:e(()=>[a(Q,{modelValue:y.value.key,"onUpdate:modelValue":d[11]||(d[11]=u=>y.value.key=u),placeholder:s.$t("chat.form.key.placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:8},{default:e(()=>[a(D,{field:"total_time",label:s.$t("chat.form.total_time")},{default:e(()=>[a(H,{modelValue:y.value.total_time,"onUpdate:modelValue":d[12]||(d[12]=u=>y.value.total_time=u),placeholder:s.$t("chat.form.total_time.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:5},{default:e(()=>[a(D,{field:"user_id",label:s.$t("chat.form.user_id"),"label-col-props":{span:6}},{default:e(()=>[a(H,{modelValue:y.value.user_id,"onUpdate:modelValue":d[13]||(d[13]=u=>y.value.user_id=u),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:6},{default:e(()=>[a(D,{field:"model_agents",label:s.$t("key.form.modelAgents"),"label-col-props":{span:5}},{default:e(()=>[a(R,{modelValue:y.value.model_agents,"onUpdate:modelValue":d[14]||(d[14]=u=>y.value.model_agents=u),placeholder:s.$t("key.form.selectDefault"),"max-tag-count":1,scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:e(()=>[(t(!0),r(O,null,Y(ye.value,u=>(t(),o(te,{key:u.id,value:u.id,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(E,{span:5},{default:e(()=>[a(D,{field:"status",label:s.$t("chat.form.status"),"label-col-props":{span:6}},{default:e(()=>[a(R,{modelValue:y.value.status,"onUpdate:modelValue":d[15]||(d[15]=u=>y.value.status=u),placeholder:s.$t("chat.form.selectDefault"),options:m(T),scrollbar:!1,"allow-clear":""},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"])]),_:1}),a(E,{span:8},{default:e(()=>[a(D,{field:"req_time",label:s.$t("chat.form.req_time")},{default:e(()=>[a(le,{modelValue:y.value.req_time,"onUpdate:modelValue":d[16]||(d[16]=u=>y.value.req_time=u),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})),[[k,["admin"]]])]),_:1},8,["model"])]),_:1}),a(qe,{style:{height:"84px"},direction:"vertical"}),a(E,{flex:"86px",style:{"text-align":"right"}},{default:e(()=>[a(de,{direction:"vertical",size:18},{default:e(()=>[a(W,{type:"primary",onClick:M},{icon:e(()=>[a(aa)]),default:e(()=>[i(" "+n(s.$t("chat.form.search")),1)]),_:1}),a(W,{onClick:U},{icon:e(()=>[a(xe)]),default:e(()=>[i(" "+n(s.$t("chat.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(qe,{style:{"margin-top":"0","margin-bottom":"16px"}}),a(ue,{style:{"margin-bottom":"16px","align-items":"center"}},{default:e(()=>[a(E,{span:3},{default:e(()=>[a(de,null,{default:e(()=>[a(W,{type:"primary",onClick:d[17]||(d[17]=u=>Ce({}))},{default:e(()=>[i(" \u5BFC\u51FA ")]),_:1}),v((t(),o(W,{type:"primary",status:"danger",onClick:d[18]||(d[18]=u=>Be({action:"delete"}))},{default:e(()=>[i(" \u5220\u9664 ")]),_:1})),[[k,["admin"]]])]),_:1})]),_:1}),a(E,{span:14},{default:e(()=>[i(" \u82B1\u8D39 = ( \u63D0\u95EE \xD7 \u63D0\u95EE\u500D\u7387 + \u56DE\u7B54 \xD7 \u56DE\u7B54\u500D\u7387 ) \xD7 \u5206\u7EC4\u6298\u6263 \xF7 500000 \xA0\xA0\u6216\xA0\xA0 \u56DE\u7B54 \xD7 \u5206\u7EC4\u6298\u6263 \xF7 500000 ")]),_:1}),a(E,{span:2},{default:e(()=>[i(" RPM: \xA0"+n(he.value.toLocaleString()),1)]),_:1}),a(E,{span:3},{default:e(()=>[i(" TPM: \xA0"+n(be.value.toLocaleString()),1)]),_:1}),a(E,{span:2,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:e(()=>[a(re,{content:s.$t("actions.refresh")},{default:e(()=>[L("div",{class:"action-icon",onClick:M},[a(xe,{size:"18"})])]),_:1},8,["content"]),a(ua,{onSelect:Ye},{content:e(()=>[(t(!0),r(O,null,Y(m(h),u=>(t(),o(la,{key:u.value,value:u.value,class:Ca({active:u.value===F.value})},{default:e(()=>[L("span",null,n(u.name),1)]),_:2},1032,["value","class"]))),128))]),default:e(()=>[a(re,{content:s.$t("actions.density")},{default:e(()=>[L("div",Ul,[a(ta,{size:"18"})])]),_:1},8,["content"])]),_:1}),a(re,{content:s.$t("actions.column_setting")},{default:e(()=>[a(sa,{trigger:"click",position:"bl",onPopupVisibleChange:Je},{content:e(()=>[L("div",Ll,[(t(!0),r(O,null,Y(S.value,(u,Ie)=>(t(),r("div",{key:u.dataIndex,class:"setting"},[L("div",zl,[a(na)]),L("div",null,[a(X,{modelValue:u.checked,"onUpdate:modelValue":_e=>u.checked=_e,onChange:_e=>je(_e,u,Ie)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),L("div",Nl,n(u.title==="#"?"\u5E8F\u5217\u53F7":u.title),1)]))),128))])]),default:e(()=>[L("div",Sl,[a(oa,{size:"18"})])]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),a(ia,{ref_key:"tableRef",ref:c,"row-key":"id",loading:m(oe),pagination:p,columns:I.value,data:ee.value,bordered:!1,size:F.value,"row-selection":Z,onPageChange:J,onPageSizeChange:B,onSelectionChange:ea},{user_id:e(({record:u})=>[i(n(u.is_smart_match?"-":u.user_id),1)]),prompt_tokens:e(({record:u})=>[i(n(u.prompt_tokens?u.prompt_tokens:u.status===1&&u.billing_method===2?0:"-"),1)]),completion_tokens:e(({record:u})=>[i(n(u.completion_tokens?u.completion_tokens:u.status===1&&u.billing_method===2?0:"-"),1)]),total_tokens:e(({record:u})=>[i(n(u.total_tokens?`$${m(Xa)(u.total_tokens)}`:u.status===1&&u.billing_method===2?0:"-"),1)]),stream:e(({record:u})=>[i(n(s.$t(`chat.dict.stream.${u.stream||!1}`)),1)]),conn_time:e(({record:u})=>[u.conn_time>3e4?v((t(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.conn_time>15e3?v((t(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.conn_time>5e3?v((t(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((t(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(u.conn_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),u.conn_time>1e4?v((t(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):u.conn_time>5e3?v((t(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):u.conn_time>3e3?v((t(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(u.conn_time),1)]),_:2},1024)),[[k,["admin"]]]):v((t(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(u.conn_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),duration:e(({record:u})=>[u.duration>18e4?v((t(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.duration>12e4?v((t(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.duration>9e4?v((t(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((t(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(u.duration||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),u.duration>12e4?v((t(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["admin"]]]):u.duration>9e4?v((t(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["admin"]]]):u.duration>6e4?v((t(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(u.duration),1)]),_:2},1024)),[[k,["admin"]]]):v((t(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(u.duration||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),total_time:e(({record:u})=>[u.total_time>18e4?v((t(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.total_time>12e4?v((t(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.total_time>9e4?v((t(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((t(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(u.total_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),u.total_time>12e4?v((t(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["admin"]]]):u.total_time>9e4?v((t(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["admin"]]]):u.total_time>6e4?v((t(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(u.total_time),1)]),_:2},1024)),[[k,["admin"]]]):v((t(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(u.total_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),internal_time:e(({record:u})=>[u.internal_time>1e3?v((t(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.internal_time>500?v((t(),o(b,{key:1,color:"orange"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):u.internal_time>300?v((t(),o(b,{key:2,color:"gold"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["reseller","user"]]]):v((t(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(u.internal_time||"-"),1)]),_:2},1024)),[[k,["reseller","user"]]]),u.internal_time>500?v((t(),o(b,{key:4,color:"red"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):u.internal_time>300?v((t(),o(b,{key:5,color:"orange"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):u.internal_time>100?v((t(),o(b,{key:6,color:"gold"},{default:e(()=>[i(n(u.internal_time),1)]),_:2},1024)),[[k,["admin"]]]):v((t(),o(b,{key:7,color:"green"},{default:e(()=>[i(n(u.internal_time||"-"),1)]),_:2},1024)),[[k,["admin"]]])]),status:e(({record:u})=>[u.status===-1?(t(),o(b,{key:0,color:"red"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${u.status}`)),1)]),_:2},1024)):u.status===2?(t(),o(b,{key:1,color:"gold"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${u.status}`)),1)]),_:2},1024)):u.status===3?(t(),o(b,{key:2,color:"orange"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${u.status}`)),1)]),_:2},1024)):(t(),o(b,{key:3,color:"green"},{default:e(()=>[i(n(s.$t(`chat.dict.status.${u.status}`)),1)]),_:2},1024))]),operations:e(({record:u})=>[a(W,{type:"text",size:"small",onClick:Ie=>Ge(u.id)},{default:e(()=>[i(n(s.$t("chat.columns.operations.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["loading","pagination","columns","data","size","row-selection"]),a(da,{title:s.$t("menu.chat.detail"),width:700,footer:!1,visible:se.value,"unmount-on-close":"","render-to-body":"",onCancel:Ke},{default:e(()=>[a(Al,{id:ke.value},null,8,["id"])]),_:1},8,["title","visible"]),a(Ae,{visible:G.value,"onUpdate:visible":d[21]||(d[21]=u=>G.value=u),title:s.$t("chat.form.title.chat_export"),onCancel:We,onBeforeOk:Qe},{default:e(()=>[a(ie,{ref_key:"chatExportForm",ref:De,model:P.value},{default:e(()=>[a(D,{field:"req_time",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[a(le,{modelValue:P.value.req_time,"onUpdate:modelValue":d[19]||(d[19]=u=>P.value.req_time=u),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),v((t(),o(D,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[a(H,{modelValue:P.value.user_id,"onUpdate:modelValue":d[20]||(d[20]=u=>P.value.user_id=u),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),[[k,["reseller","admin"]]])]),_:1},8,["model"])]),_:1},8,["visible","title"]),a(Ae,{visible:K.value,"onUpdate:visible":d[28]||(d[28]=u=>K.value=u),title:s.$t("chat.form.title.chat_del"),onCancel:Ze,onBeforeOk:Xe},{default:e(()=>[a(ie,{ref_key:"chatDelForm",ref:Ve,model:V.value},{default:e(()=>[a(D,{field:"value",label:s.$t("chat.form.req_time"),rules:[{required:!0,message:s.$t("chat.error.req_time.required")}]},{default:e(()=>[a(le,{modelValue:V.value.value,"onUpdate:modelValue":d[22]||(d[22]=u=>V.value.value=u),placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],"time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"show-time":""},null,8,["modelValue"])]),_:1},8,["label","rules"]),a(D,{field:"status",label:s.$t("chat.form.req.status"),rules:[{required:!0,message:s.$t("chat.error.req.status.required")}]},{default:e(()=>[a(de,{size:"large"},{default:e(()=>[a(X,{modelValue:V.value.status,"onUpdate:modelValue":d[23]||(d[23]=u=>V.value.status=u),value:1},{default:e(()=>[i(" \u6210\u529F ")]),_:1},8,["modelValue"]),a(X,{modelValue:V.value.status,"onUpdate:modelValue":d[24]||(d[24]=u=>V.value.status=u),value:2},{default:e(()=>[i(" \u4E2D\u6B62 ")]),_:1},8,["modelValue"]),a(X,{modelValue:V.value.status,"onUpdate:modelValue":d[25]||(d[25]=u=>V.value.status=u),value:3},{default:e(()=>[i(" \u91CD\u8BD5 ")]),_:1},8,["modelValue"]),a(X,{modelValue:V.value.status,"onUpdate:modelValue":d[26]||(d[26]=u=>V.value.status=u),value:-1},{default:e(()=>[i(" \u5931\u8D25 ")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),a(D,{field:"user_id",label:s.$t("chat.form.req.user_id")},{default:e(()=>[a(H,{modelValue:V.value.user_id,"onUpdate:modelValue":d[27]||(d[27]=u=>V.value.user_id=u),placeholder:s.$t("chat.form.user_id.placeholder"),precision:0,min:1,"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]),_:1})])}}});const gu=ze(Pl,[["__scopeId","data-v-f269884b"]]);export{gu as default};
