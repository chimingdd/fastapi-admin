import{L as J,_ as K}from"./index.901bf666.js";/* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               */import{d as M,e as _,B as p,C as k,aH as t,aG as r,aL as u,aM as s,F as L,aD as f,aJ as F,aI as I,aE as y,u as n,bT as i,aK as P,aF as Q,b1 as W,b2 as X,bA as Y,bB as Z,bQ as x,bi as ee,b4 as le,aT as ae,aS as te,bW as oe,bO as re,aU as ue,b5 as se,bI as de,bR as ne,g as ie}from"./arco.75032696.js";import{f as pe}from"./vue.ebfaaf45.js";import{u as me}from"./loading.96e1cbd7.js";import{c as ce}from"./notice.3aef045c.js";import{q as fe}from"./admin_user.a25d1213.js";import{q as be}from"./admin_reseller.f16aef9a.js";import{A as ve}from"./aieditor.5f1d4773.js";import"./chart.f8f3ffb1.js";/* empty css                */const _e={class:"container"},ye={class:"wrapper"},Ve={class:"submit-btn"},$e={name:"NoticeCreate"},ge=M({...$e,setup(we){const{proxy:N}=ie(),{loading:H,setLoading:b}=me(!1),R=pe(),U=_(),l=_({title:"",content:"",category:"",scope:"1",users:[],resellers:[],channels:["web","email"],is_popup:!1,priority:_(),expires_at:"",scheduled_time:"",remark:"",status:1}),q=_([]);(async()=>{b(!0);try{const{data:e}=await fe();q.value=e.items}catch{}finally{b(!1)}})();const C=_([]);(async()=>{b(!0);try{const{data:e}=await be();C.value=e.items}catch{}finally{b(!1)}})();const $=async e=>{var V;if(!await((V=U.value)==null?void 0:V.validate())){b(!0);try{l.value.status=e,await ce(l.value).then(()=>{let m="\u64CD\u4F5C\u6210\u529F";e===1?m="\u53D1\u5E03\u6210\u529F":e===2&&(m="\u4FDD\u5B58\u6210\u529F"),N.$message.success(m),R.push({name:"NoticeList"})})}catch{}finally{b(!1)}}};return(e,o)=>{const V=J,m=P,S=Q,E=W,d=X,c=Y,g=Z,v=x,w=ee,D=le,T=ae,A=te,B=oe,z=re,h=ue,O=se,j=de,G=ne;return p(),k("div",_e,[t(S,{class:"container-breadcrumb"},{default:r(()=>[t(m,null,{default:r(()=>[t(V)]),_:1}),t(m,null,{default:r(()=>[u(s(e.$t("menu.notice")),1)]),_:1}),t(m,null,{default:r(()=>[u(s(e.$t("menu.notice.create")),1)]),_:1})]),_:1}),t(G,{loading:n(H),style:{width:"100%"}},{default:r(()=>[t(j,{class:"general-card","body-style":{padding:"0 20px 20px 20px"},bordered:!1},{default:r(()=>[L("div",ye,[t(O,{ref_key:"formRef",ref:U,model:l.value,class:"form","label-col-props":{span:3},"wrapper-col-props":{span:18}},{default:r(()=>[t(d,{field:"title",label:e.$t("notice.label.title"),rules:[{required:!0,message:e.$t("notice.error.title.required")}]},{default:r(()=>[t(E,{modelValue:l.value.title,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.title=a),placeholder:e.$t("notice.placeholder.title"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(d,{field:"category",label:e.$t("notice.label.category"),rules:[{required:!0,message:e.$t("notice.error.category.required")}]},{default:r(()=>[t(g,{modelValue:l.value.category,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value.category=a),placeholder:e.$t("notice.placeholder.category"),scrollbar:!1,"allow-search":""},{default:r(()=>[t(c,{value:"service"},{default:r(()=>[u(s(e.$t("notice.dict.category.service")),1)]),_:1}),t(c,{value:"activity"},{default:r(()=>[u(s(e.$t("notice.dict.category.activity")),1)]),_:1}),t(c,{value:"safety"},{default:r(()=>[u(s(e.$t("notice.dict.category.safety")),1)]),_:1}),t(c,{value:"maint"},{default:r(()=>[u(s(e.$t("notice.dict.category.maint")),1)]),_:1}),t(c,{value:"product"},{default:r(()=>[u(s(e.$t("notice.dict.category.product")),1)]),_:1}),t(c,{value:"fault"},{default:r(()=>[u(s(e.$t("notice.dict.category.fault")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(d,{field:"scope",label:e.$t("notice.label.scope"),rules:[{required:!0,message:e.$t("notice.error.scope.required")}]},{default:r(()=>[t(w,{size:"large"},{default:r(()=>[t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.scope=a),value:"1"},{default:r(()=>[u(s(e.$t("notice.dict.scope.1")),1)]),_:1},8,["modelValue"]),t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[3]||(o[3]=a=>l.value.scope=a),value:"2"},{default:r(()=>[u(s(e.$t("notice.dict.scope.2")),1)]),_:1},8,["modelValue"]),t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.scope=a),value:"3"},{default:r(()=>[u(s(e.$t("notice.dict.scope.3")),1)]),_:1},8,["modelValue"]),t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[5]||(o[5]=a=>l.value.scope=a),value:"4"},{default:r(()=>[u(s(e.$t("notice.dict.scope.4")),1)]),_:1},8,["modelValue"]),t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[6]||(o[6]=a=>l.value.scope=a),value:"5"},{default:r(()=>[u(s(e.$t("notice.dict.scope.5")),1)]),_:1},8,["modelValue"]),t(v,{modelValue:l.value.scope,"onUpdate:modelValue":o[7]||(o[7]=a=>l.value.scope=a),value:"6"},{default:r(()=>[u(s(e.$t("notice.dict.scope.6")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),l.value.scope==="4"||l.value.scope==="6"?(p(),f(d,{key:0,field:"users",label:e.$t("notice.label.users"),rules:[{required:!0,message:e.$t("notice.error.users.required")}]},{default:r(()=>[t(g,{modelValue:l.value.users,"onUpdate:modelValue":o[8]||(o[8]=a=>l.value.users=a),placeholder:e.$t("notice.placeholder.users"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(p(!0),k(F,null,I(q.value,a=>(p(),f(c,{key:a.user_id,value:a.user_id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):y("",!0),l.value.scope==="5"||l.value.scope==="6"?(p(),f(d,{key:1,field:"resellers",label:e.$t("notice.label.resellers"),rules:[{required:!0,message:e.$t("notice.error.resellers.required")}]},{default:r(()=>[t(g,{modelValue:l.value.resellers,"onUpdate:modelValue":o[9]||(o[9]=a=>l.value.resellers=a),placeholder:e.$t("notice.placeholder.resellers"),scrollbar:!1,multiple:"","allow-search":"","allow-clear":""},{default:r(()=>[(p(!0),k(F,null,I(C.value,a=>(p(),f(c,{key:a.user_id,value:a.user_id,label:a.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"])):y("",!0),t(d,{field:"channels",label:e.$t("notice.label.channels"),rules:[{required:!0,message:e.$t("notice.error.channels.required")}]},{default:r(()=>[t(w,{size:"large"},{default:r(()=>[t(D,{modelValue:l.value.channels,"onUpdate:modelValue":o[10]||(o[10]=a=>l.value.channels=a),value:"web","default-checked":!0},{default:r(()=>[u(s(e.$t("notice.dict.channels.web")),1)]),_:1},8,["modelValue"]),t(D,{modelValue:l.value.channels,"onUpdate:modelValue":o[11]||(o[11]=a=>l.value.channels=a),value:"email"},{default:r(()=>[u(s(e.$t("notice.dict.channels.email")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label","rules"]),l.value.channels.includes("web")?(p(),f(d,{key:2,field:"is_popup",label:e.$t("notice.label.is_popup")},{default:r(()=>[t(T,{modelValue:l.value.is_popup,"onUpdate:modelValue":o[12]||(o[12]=a=>l.value.is_popup=a)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(d,{field:"priority",label:e.$t("notice.label.priority")},{default:r(()=>[t(A,{modelValue:l.value.priority,"onUpdate:modelValue":o[13]||(o[13]=a=>l.value.priority=a),placeholder:e.$t("notice.placeholder.priority"),precision:0,min:-999,max:99999},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{field:"expires_at",label:e.$t("notice.label.expires_at")},{default:r(()=>[t(B,{modelValue:l.value.expires_at,"onUpdate:modelValue":o[14]||(o[14]=a=>l.value.expires_at=a),placeholder:e.$t("notice.placeholder.expires_at"),"time-picker-props":{defaultValue:"23:59:59"},"disabled-date":a=>n(i)(a).isBefore(n(i)().subtract(1,"day")),style:{width:"100%"},"show-time":"",shortcuts:[{label:"1",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(1,"day")},{label:"7",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(7,"day")},{label:"15",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(15,"day")},{label:"30",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(30,"day")},{label:"90",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(90,"day")},{label:"180",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(180,"day")},{label:"365",value:()=>n(i)(l.value.expires_at||new Date().setHours(23,59,59,999)).add(365,"day")}]},null,8,["modelValue","placeholder","disabled-date","shortcuts"])]),_:1},8,["label"]),t(d,{field:"scheduled_time",label:e.$t("notice.label.scheduled_time")},{default:r(()=>[t(B,{modelValue:l.value.scheduled_time,"onUpdate:modelValue":o[15]||(o[15]=a=>l.value.scheduled_time=a),placeholder:e.$t("notice.placeholder.scheduled_time"),"disabled-date":a=>n(i)(a).isBefore(n(i)().subtract(1,"day")),style:{width:"100%"},"show-time":""},null,8,["modelValue","placeholder","disabled-date"])]),_:1},8,["label"]),t(d,{field:"content",label:e.$t("notice.label.content"),rules:[{required:!0,message:e.$t("notice.error.content.required")}]},{default:r(()=>[t(ve,{modelValue:l.value.content,"onUpdate:modelValue":o[16]||(o[16]=a=>l.value.content=a),style:{flex:"1",height:"1024px"}},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(d,{field:"remark",label:e.$t("notice.label.remark")},{default:r(()=>[t(z,{modelValue:l.value.remark,"onUpdate:modelValue":o[17]||(o[17]=a=>l.value.remark=a),placeholder:e.$t("notice.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(w,null,{default:r(()=>[L("div",Ve,[t(h,{type:"secondary",onClick:o[18]||(o[18]=a=>$(2))},{default:r(()=>[u(s(e.$t("button.draft")),1)]),_:1}),l.value.scheduled_time?y("",!0):(p(),f(h,{key:0,type:"primary",onClick:o[19]||(o[19]=a=>$(1))},{default:r(()=>[u(s(e.$t("button.publish")),1)]),_:1})),l.value.scheduled_time?(p(),f(h,{key:1,type:"primary",onClick:o[20]||(o[20]=a=>$(3))},{default:r(()=>[u(s(e.$t("button.scheduled")),1)]),_:1})):y("",!0)])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["loading"])])}}});const Qe=K(ge,[["__scopeId","data-v-c304aeec"]]);export{Qe as default};
