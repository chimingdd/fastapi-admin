import{d as h,r as k,o as i,f as b,w as a,g as e,j as u,k as c,aP as B,aQ as L,F as N,b1 as F,B as I,m as R,_ as w,q,s as K,ar as U,a4 as M,aJ as A,i as D,ay as O,y as z,h as P,gD as j,aM as E,aN as J,b6 as Q,b7 as G,b3 as H,b8 as W}from"./index.9d2a6f93.js";import{u as T}from"./loading.2f897f78.js";/* empty css                */import{a as X}from"./key.493bda66.js";/* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css              *//* empty css               *//* empty css               */import{q as Y}from"./model.d6c87741.js";/* empty css               */const Z=h({__name:"base-info",emits:["changeStep"],setup(S,{emit:f}){const d=k(),t=k({corp:"",key:"",remark:""}),p=async()=>{var l;await((l=d.value)==null?void 0:l.validate())||f("changeStep","forward",{...t.value})};return(s,l)=>{const o=B,m=L,n=N,r=F,v=I,y=R;return i(),b(y,{ref_key:"formRef",ref:d,model:t.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e(n,{field:"corp",label:s.$t("key.label.corp"),rules:[{required:!0,message:s.$t("key.error.corp.required")}]},{default:a(()=>[e(m,{modelValue:t.value.corp,"onUpdate:modelValue":l[0]||(l[0]=_=>t.value.corp=_),placeholder:s.$t("key.placeholder.corp")},{default:a(()=>[e(o,{value:"OpenAI"},{default:a(()=>[u("OpenAI")]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"key",label:s.$t("key.label.key"),rules:[{required:!0,message:s.$t("key.error.key.required")}]},{default:a(()=>[e(r,{modelValue:t.value.key,"onUpdate:modelValue":l[1]||(l[1]=_=>t.value.key=_),placeholder:s.$t("key.placeholder.key"),"auto-size":{minRows:5,maxRows:10}},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(n,{field:"remark",label:s.$t("key.label.remark"),rules:[{required:!1}]},{default:a(()=>[e(r,{modelValue:t.value.remark,"onUpdate:modelValue":l[2]||(l[2]=_=>t.value.remark=_),placeholder:s.$t("key.placeholder.remark")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(n,null,{default:a(()=>[e(v,{type:"primary",onClick:p},{default:a(()=>[u(c(s.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const x=w(Z,[["__scopeId","data-v-b340c0e9"]]),ee=h({__name:"advanced",emits:["changeStep"],setup(S,{emit:f}){const{setLoading:d}=T(!0),t=k([]);(async()=>{d(!0);try{const{data:n}=await Y();t.value=n.items}catch{}finally{d(!1)}})();const s=k(),l=k({models:[]}),o=async()=>{var r;await((r=s.value)==null?void 0:r.validate())||f("changeStep","submit",{...l.value})},m=()=>{f("changeStep","backward")};return(n,r)=>{const v=B,y=L,_=N,$=I,C=M,V=R;return i(),b(V,{ref_key:"formRef",ref:s,model:l.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[e(_,{field:"models",label:n.$t("key.label.models"),rules:[{required:!1}]},{default:a(()=>[e(y,{modelValue:l.value.models,"onUpdate:modelValue":r[0]||(r[0]=g=>l.value.models=g),placeholder:n.$t("key.placeholder.models"),"max-tag-count":3,multiple:"","allow-clear":""},{default:a(()=>[(i(!0),q(K,null,U(t.value,g=>(i(),b(v,{key:g.id,value:g.id,label:g.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(_,null,{default:a(()=>[e(C,null,{default:a(()=>[e($,{type:"secondary",onClick:m},{default:a(()=>[u(c(n.$t("key.button.prev")),1)]),_:1}),e($,{type:"primary",onClick:o},{default:a(()=>[u(c(n.$t("key.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const ae=w(ee,[["__scopeId","data-v-668ab032"]]),te={class:"success-wrap"},oe=h({__name:"success",emits:["changeStep"],setup(S,{emit:f}){const d=()=>{f("changeStep",1)};return(t,p)=>{const s=A,l=I,o=M;return i(),q("div",te,[e(s,{status:"success",title:t.$t("key.success.title"),subtitle:t.$t("key.success.create.subTitle")},null,8,["title","subtitle"]),e(o,{size:16},{default:a(()=>[e(l,{key:"finish",type:"secondary",onClick:p[0]||(p[0]=m=>t.$router.push({name:"KeyModelList"}))},{default:a(()=>[u(c(t.$t("key.button.finish")),1)]),_:1}),e(l,{key:"again",type:"primary",onClick:d},{default:a(()=>[u(c(t.$t("key.button.again")),1)]),_:1})]),_:1})])}}});const le=w(oe,[["__scopeId","data-v-9a43fb75"]]),se={class:"container"},ne={class:"wrapper"},re={name:"KeyCreate"},ue=h({...re,setup(S){const{loading:f,setLoading:d}=T(!1),t=k(1),p=k({}),s=async()=>{d(!0);try{await X(p.value),t.value=3,p.value={}}catch{}finally{d(!1)}},l=(o,m)=>{if(typeof o=="number"){t.value=o;return}if(o==="forward"||o==="submit"){if(p.value={...p.value,...m},o==="submit"){s();return}t.value+=1}else o==="backward"&&(t.value-=1)};return(o,m)=>{const n=j,r=E,v=J,y=Q,_=G,$=H,C=W;return i(),q("div",se,[e(v,{class:"container-breadcrumb"},{default:a(()=>[e(r,null,{default:a(()=>[e(n)]),_:1}),e(r,null,{default:a(()=>[u(c(o.$t("menu.key")),1)]),_:1}),e(r,null,{default:a(()=>[u(c(o.$t("menu.key.create")),1)]),_:1})]),_:1}),e(C,{loading:P(f),style:{width:"100%"}},{default:a(()=>[e($,{class:"general-card",bordered:!1},{title:a(()=>[u(c(o.$t("key.title.create")),1)]),default:a(()=>[D("div",ne,[e(_,{current:t.value,"onUpdate:current":m[0]||(m[0]=V=>t.value=V),style:{width:"580px"},"line-less":"",class:"steps"},{default:a(()=>[e(y,{description:o.$t("key.subTitle.baseInfo")},{default:a(()=>[u(c(o.$t("key.title.baseInfo")),1)]),_:1},8,["description"]),e(y,{description:o.$t("key.subTitle.advanced")},{default:a(()=>[u(c(o.$t("key.title.advanced")),1)]),_:1},8,["description"]),e(y,{description:o.$t("key.subTitle.create.finish")},{default:a(()=>[u(c(o.$t("key.title.create.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(i(),b(O,null,[t.value===1?(i(),b(x,{key:0,onChangeStep:l})):t.value===2?(i(),b(ae,{key:1,onChangeStep:l})):t.value===3?(i(),b(le,{key:2,onChangeStep:l})):z("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}});const he=w(ue,[["__scopeId","data-v-f5e95bba"]]);export{he as default};
